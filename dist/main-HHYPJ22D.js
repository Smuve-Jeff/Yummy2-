import{a as S,b as A}from"./chunk-2NFLSA4Y.js";var Do;function Ri(){return Do}function Qe(t){let e=Do;return Do=t,e}var al=Symbol("NotFound");function Jt(t){return t===al||t?.name==="\u0275NotFound"}var Ee=null,ki=!1,bo=1,df=null,ge=Symbol("SIGNAL");function P(t){let e=Ee;return Ee=t,e}function Li(){return Ee}var Dt={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xt(t){if(ki)throw new Error("");if(Ee===null)return;Ee.consumerOnSignalRead(t);let e=Ee.producersTail;if(e!==void 0&&e.producer===t)return;let n,i=Ee.recomputing;if(i&&(n=e!==void 0?e.nextProducer:Ee.producers,n!==void 0&&n.producer===t)){Ee.producersTail=n,n.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===Ee&&(!i||pf(r,Ee)))return;let o=nn(Ee),s={producer:t,consumer:Ee,nextProducer:n,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};Ee.producersTail=s,e!==void 0?e.nextProducer=s:Ee.producers=s,o&&dl(t,s)}function ll(){bo++}function Vi(t){if(!(nn(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===bo)){if(!t.producerMustRecompute(t)&&!tn(t)){Oi(t);return}t.producerRecomputeValue(t),Oi(t)}}function wo(t){if(t.consumers===void 0)return;let e=ki;ki=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let i=n.consumer;i.dirty||ff(i)}}finally{ki=e}}function Io(){return Ee?.consumerAllowSignalWrites!==!1}function ff(t){t.dirty=!0,wo(t),t.consumerMarkedDirty?.(t)}function Oi(t){t.dirty=!1,t.lastCleanEpoch=bo}function bt(t){return t&&cl(t),P(t)}function cl(t){t.producersTail=void 0,t.recomputing=!0}function en(t,e){P(e),t&&ul(t)}function ul(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(nn(t))do n=xo(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function tn(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,i=e.lastReadVersion;if(i!==n.version||(Vi(n),i!==n.version))return!0}return!1}function wt(t){if(nn(t)){let e=t.producers;for(;e!==void 0;)e=xo(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function dl(t,e){let n=t.consumersTail,i=nn(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!i)for(let r=t.producers;r!==void 0;r=r.nextProducer)dl(r.producer,r)}function xo(t){let e=t.producer,n=t.nextProducer,i=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(e.consumers=i,!nn(e)){let o=e.producers;for(;o!==void 0;)o=xo(o)}return n}function nn(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Bi(t){df?.(t)}function pf(t,e){let n=e.producersTail;if(n!==void 0){let i=e.producers;do{if(i===t)return!0;if(i===n)break;i=i.nextProducer}while(i!==void 0)}return!1}function ji(t,e){return Object.is(t,e)}function Hn(t,e){let n=Object.create(mf);n.computation=t,e!==void 0&&(n.equal=e);let i=()=>{if(Vi(n),Xt(n),n.value===jn)throw n.error;return n.value};return i[ge]=n,Bi(n),i}var Pi=Symbol("UNSET"),Fi=Symbol("COMPUTING"),jn=Symbol("ERRORED"),mf=A(S({},Dt),{value:Pi,dirty:!0,error:null,equal:ji,kind:"computed",producerMustRecompute(t){return t.value===Pi||t.value===Fi},producerRecomputeValue(t){if(t.value===Fi)throw new Error("");let e=t.value;t.value=Fi;let n=bt(t),i,r=!1;try{i=t.computation(),P(null),r=e!==Pi&&e!==jn&&i!==jn&&t.equal(e,i)}catch(o){i=jn,t.error=o}finally{en(t,n)}if(r){t.value=e;return}t.value=i,t.version++}});function hf(){throw new Error}var fl=hf;function pl(t){fl(t)}function To(t){fl=t}var gf=null;function Mo(t,e){let n=Object.create(Hi);n.value=t,e!==void 0&&(n.equal=e);let i=()=>ml(n);return i[ge]=n,Bi(n),[i,s=>rn(n,s),s=>So(n,s)]}function ml(t){return Xt(t),t.value}function rn(t,e){Io()||pl(t),t.equal(t.value,e)||(t.value=e,vf(t))}function So(t,e){Io()||pl(t),rn(t,e(t.value))}var Hi=A(S({},Dt),{equal:ji,value:void 0,kind:"signal"});function vf(t){t.version++,ll(),wo(t),gf?.(t)}function Ie(t){return typeof t=="function"}function Ui(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var $i=Ui(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Un(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var _e=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ie(i))try{i()}catch(o){e=o instanceof $i?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{hl(o)}catch(s){e=e??[],s instanceof $i?e=[...e,...s.errors]:e.push(s)}}if(e)throw new $i(e)}}add(e){var n;if(e&&e!==this)if(this.closed)hl(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Un(n,e)}remove(e){let{_finalizers:n}=this;n&&Un(n,e),e instanceof t&&e._removeParent(this)}};_e.EMPTY=(()=>{let t=new _e;return t.closed=!0,t})();var Ao=_e.EMPTY;function Gi(t){return t instanceof _e||t&&"closed"in t&&Ie(t.remove)&&Ie(t.add)&&Ie(t.unsubscribe)}function hl(t){Ie(t)?t():t.unsubscribe()}var je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var on={setTimeout(t,e,...n){let{delegate:i}=on;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=on;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gl(t){on.setTimeout(()=>{let{onUnhandledError:e}=je;if(e)e(t);else throw t})}function No(){}var vl=Ro("C",void 0,void 0);function yl(t){return Ro("E",void 0,t)}function El(t){return Ro("N",t,void 0)}function Ro(t,e,n){return{kind:t,value:e,error:n}}var It=null;function sn(t){if(je.useDeprecatedSynchronousErrorHandling){let e=!It;if(e&&(It={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=It;if(It=null,n)throw i}}else t()}function Cl(t){je.useDeprecatedSynchronousErrorHandling&&It&&(It.errorThrown=!0,It.error=t)}var xt=class extends _e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gi(e)&&e.add(this)):this.destination=Cf}static create(e,n,i){return new an(e,n,i)}next(e){this.isStopped?Po(El(e),this):this._next(e)}error(e){this.isStopped?Po(yl(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Po(vl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},yf=Function.prototype.bind;function ko(t,e){return yf.call(t,e)}var Fo=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){qi(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){qi(i)}else qi(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){qi(n)}}},an=class extends xt{constructor(e,n,i){super();let r;if(Ie(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&je.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ko(e.next,o),error:e.error&&ko(e.error,o),complete:e.complete&&ko(e.complete,o)}):r=e}this.destination=new Fo(r)}};function qi(t){je.useDeprecatedSynchronousErrorHandling?Cl(t):gl(t)}function Ef(t){throw t}function Po(t,e){let{onStoppedNotification:n}=je;n&&on.setTimeout(()=>n(t,e))}var Cf={closed:!0,next:No,error:Ef,complete:No};var _l=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Dl(t){return t}function bl(t){return t.length===0?Dl:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var ln=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=Df(n)?n:new an(n,i,r);return sn(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=wl(i),new i((r,o)=>{let s=new an({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[_l](){return this}pipe(...n){return bl(n)(this)}toPromise(n){return n=wl(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function wl(t){var e;return(e=t??je.Promise)!==null&&e!==void 0?e:Promise}function _f(t){return t&&Ie(t.next)&&Ie(t.error)&&Ie(t.complete)}function Df(t){return t&&t instanceof xt||_f(t)&&Gi(t)}function bf(t){return Ie(t?.lift)}function Il(t){return e=>{if(bf(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function xl(t,e,n,i,r){return new Oo(t,e,n,i,r)}var Oo=class extends xt{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Tl=Ui(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ft=(()=>{class t extends ln{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new zi(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Tl}next(n){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Ao:(this.currentObservers=null,o.push(n),new _e(()=>{this.currentObservers=null,Un(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ln;return n.source=this,n}}return t.create=(e,n)=>new zi(e,n),t})(),zi=class extends ft{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Ao}};var $n=class extends ft{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};function Lo(t,e){return Il((n,i)=>{let r=0;n.subscribe(xl(i,o=>{i.next(t.call(e,o,r++))}))})}var Ml=A(S({},Dt),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function Sl(t){if(t.dirty=!1,t.version>0&&!tn(t))return;t.version++;let e=bt(t);try{t.cleanup(),t.fn()}finally{en(t,e)}}var Ki="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",H=class extends Error{code;constructor(e,n){super(Wn(e,n)),this.code=e}};function wf(t){return`NG0${Math.abs(t)}`}function Wn(t,e){return`${wf(t)}${e?": "+e:""}`}function Y(t){for(let e in t)if(t[e]===Y)return e;throw Error("")}function pt(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(pt).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function Ji(t,e){return t?e?`${t} ${e}`:t:e||""}var If=Y({__forward_ref__:Y});function Xi(t){return t.__forward_ref__=Xi,t.toString=function(){return pt(this())},t}function Ae(t){return Rl(t)?t():t}function Rl(t){return typeof t=="function"&&t.hasOwnProperty(If)&&t.__forward_ref__===Xi}function ee(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Qn(t){return{providers:t.providers||[],imports:t.imports||[]}}function er(t){return xf(t,tr)}function xf(t,e){return t.hasOwnProperty(e)&&t[e]||null}function Tf(t){let e=t?.[tr]??null;return e||null}function Bo(t){return t&&t.hasOwnProperty(Qi)?t[Qi]:null}var tr=Y({\u0275prov:Y}),Qi=Y({\u0275inj:Y}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=ee({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Yo(t){return t&&!!t.\u0275providers}var Zo=Y({\u0275cmp:Y}),Ko=Y({\u0275dir:Y}),Jo=Y({\u0275pipe:Y});var jo=Y({\u0275fac:Y}),At=Y({__NG_ELEMENT_ID__:Y}),Al=Y({__NG_ENV_ID__:Y});function ht(t){return typeof t=="string"?t:t==null?"":String(t)}function kl(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ht(t)}var Pl=Y({ngErrorCode:Y}),Mf=Y({ngErrorMessage:Y}),Sf=Y({ngTokenPath:Y});function Xo(t,e){return Fl("",-200,e)}function nr(t,e){throw new H(-201,!1)}function Fl(t,e,n){let i=new H(e,t);return i[Pl]=e,i[Mf]=t,n&&(i[Sf]=n),i}function Af(t){return t[Pl]}var Ho;function Ol(){return Ho}function Se(t){let e=Ho;return Ho=t,e}function es(t,e,n){let i=er(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(e!==void 0)return e;nr(t,"Injector")}var Nf={},Tt=Nf,Rf="__NG_DI_FLAG__",Uo=class{injector;constructor(e){this.injector=e}retrieve(e,n){let i=Mt(n)||0;try{return this.injector.get(e,i&8?null:Tt,i)}catch(r){if(Jt(r))return r;throw r}}};function kf(t,e=0){let n=Ri();if(n===void 0)throw new H(-203,!1);if(n===null)return es(t,void 0,e);{let i=Pf(e),r=n.retrieve(t,i);if(Jt(r)){if(i.optional)return null;throw r}return r}}function z(t,e=0){return(Ol()||kf)(Ae(t),e)}function N(t,e){return z(t,Mt(e))}function Mt(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pf(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function $o(t){let e=[];for(let n=0;n<t.length;n++){let i=Ae(t[n]);if(Array.isArray(i)){if(i.length===0)throw new H(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=Ff(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(z(r,o))}else e.push(z(i))}return e}function Ff(t){return t[Rf]}function un(t,e){let n=t.hasOwnProperty(jo);return n?t[jo]:null}function Ll(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Vl(t){return t.flat(Number.POSITIVE_INFINITY)}function ir(t,e){t.forEach(n=>Array.isArray(n)?ir(n,e):e(n))}function ts(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Yn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Bl(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function rr(t,e,n){let i=dn(t,e);return i>=0?t[i|1]=n:(i=~i,Bl(t,i,e,n)),i}function or(t,e){let n=dn(t,e);if(n>=0)return t[n|1]}function dn(t,e){return Of(t,e,1)}function Of(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Nt={},De=[],Rt=new $(""),ns=new $("",-1),is=new $(""),qn=class{get(e,n=Tt){if(n===Tt){let r=Fl("",-201);throw r.name="\u0275NotFound",r}return n}};function kt(t){return t[Zo]||null}function rs(t){return t[Ko]||null}function jl(t){return t[Jo]||null}function Zn(t){return{\u0275providers:t}}function Hl(...t){return{\u0275providers:os(!0,t),\u0275fromNgModule:!0}}function os(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return ir(e,s=>{let a=s;Yi(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Ul(r,o),n}function Ul(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];ss(r,o=>{e(o,i)})}}function Yi(t,e,n,i){if(t=Ae(t),!t)return!1;let r=null,o=Bo(t),s=!o&&kt(t);if(!o&&!s){let l=t.ngModule;if(o=Bo(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)Yi(u,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{ir(o.imports,f=>{Yi(f,e,n,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&Ul(u,e)}if(!a){let u=un(r)||(()=>new r);e({provide:r,useFactory:u,deps:De},r),e({provide:is,useValue:r,multi:!0},r),e({provide:Rt,useValue:()=>z(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=t;ss(l,f=>{e(f,u)})}}else return!1;return r!==t&&t.providers!==void 0}function ss(t,e){for(let n of t)Yo(n)&&(n=n.\u0275providers),Array.isArray(n)?ss(n,e):e(n)}var Lf=Y({provide:String,useValue:Y});function $l(t){return t!==null&&typeof t=="object"&&Lf in t}function Vf(t){return!!(t&&t.useExisting)}function Bf(t){return!!(t&&t.useFactory)}function Zi(t){return typeof t=="function"}var Kn=new $(""),Wi={},Nl={},Vo;function Jn(){return Vo===void 0&&(Vo=new qn),Vo}var Pe=class{},St=class extends Pe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,qo(e,s=>this.processProvider(s)),this.records.set(ns,cn(void 0,this)),r.has("environment")&&this.records.set(Pe,cn(void 0,this));let o=this.records.get(Kn);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(is,De,{self:!0}))}retrieve(e,n){let i=Mt(n)||0;try{return this.get(e,Tt,i)}catch(r){if(Jt(r))return r;throw r}}destroy(){Gn(this),this._destroyed=!0;let e=P(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),P(e)}}onDestroy(e){return Gn(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Gn(this);let n=Qe(this),i=Se(void 0),r;try{return e()}finally{Qe(n),Se(i)}}get(e,n=Tt,i){if(Gn(this),e.hasOwnProperty(Al))return e[Al](this);let r=Mt(i),o,s=Qe(this),a=Se(void 0);try{if(!(r&4)){let u=this.records.get(e);if(u===void 0){let f=Gf(e)&&er(e);f&&this.injectableDefInScope(f)?u=cn(Go(e),Wi):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u,r)}let l=r&2?Jn():this.parent;return n=r&8&&n===Tt?null:n,l.get(e,n)}catch(l){let u=Af(l);throw u===-200||u===-201?new H(u,null):l}finally{Se(a),Qe(s)}}resolveInjectorInitializers(){let e=P(null),n=Qe(this),i=Se(void 0),r;try{let o=this.get(Rt,De,{self:!0});for(let s of o)s()}finally{Qe(n),Se(i),P(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(pt(i));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ae(e);let n=Zi(e)?e:Ae(e&&e.provide),i=Hf(e);if(!Zi(e)&&e.multi===!0){let r=this.records.get(n);r||(r=cn(void 0,Wi,!0),r.factory=()=>$o(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n,i){let r=P(null);try{if(n.value===Nl)throw Xo(pt(e));return n.value===Wi&&(n.value=Nl,n.value=n.factory(void 0,i)),typeof n.value=="object"&&n.value&&$f(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{P(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ae(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Go(t){let e=er(t),n=e!==null?e.factory:un(t);if(n!==null)return n;if(t instanceof $)throw new H(204,!1);if(t instanceof Function)return jf(t);throw new H(204,!1)}function jf(t){if(t.length>0)throw new H(204,!1);let n=Tf(t);return n!==null?()=>n.factory(t):()=>new t}function Hf(t){if($l(t))return cn(void 0,t.useValue);{let e=Gl(t);return cn(e,Wi)}}function Gl(t,e,n){let i;if(Zi(t)){let r=Ae(t);return un(r)||Go(r)}else if($l(t))i=()=>Ae(t.useValue);else if(Bf(t))i=()=>t.useFactory(...$o(t.deps||[]));else if(Vf(t))i=(r,o)=>z(Ae(t.useExisting),o!==void 0&&o&8?8:void 0);else{let r=Ae(t&&(t.useClass||t.provide));if(Uf(t))i=()=>new r(...$o(t.deps));else return un(r)||Go(r)}return i}function Gn(t){if(t.destroyed)throw new H(205,!1)}function cn(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Uf(t){return!!t.deps}function $f(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Gf(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function qo(t,e){for(let n of t)Array.isArray(n)?qo(n,e):n&&Yo(n)?qo(n.\u0275providers,e):e(n)}function sr(t,e){let n;t instanceof St?(Gn(t),n=t):n=new Uo(t);let i,r=Qe(n),o=Se(void 0);try{return e()}finally{Qe(r),Se(o)}}function ql(){return Ol()!==void 0||Ri()!=null}var He=0,k=1,F=2,fe=3,Oe=4,Le=5,fn=6,pn=7,oe=8,st=9,Ze=10,te=11,mn=12,as=13,Pt=14,Ve=15,gt=16,Ft=17,Ke=18,Xn=19,ls=20,rt=21,ar=22,at=23,Ne=24,lr=25,Ot=26,ve=27,zl=1,cs=6,vt=7,ei=8,Lt=9,ie=10;function lt(t){return Array.isArray(t)&&typeof t[zl]=="object"}function Ue(t){return Array.isArray(t)&&t[zl]===!0}function us(t){return(t.flags&4)!==0}function Vt(t){return t.componentOffset>-1}function cr(t){return(t.flags&1)===1}function Bt(t){return!!t.template}function hn(t){return(t[F]&512)!==0}function jt(t){return(t[F]&256)===256}var ds="svg",Wl="math";function Be(t){for(;Array.isArray(t);)t=t[He];return t}function fs(t,e){return Be(e[t])}function $e(t,e){return Be(e[t.index])}function ti(t,e){return t.data[e]}function Je(t,e){let n=e[t];return lt(n)?n:n[He]}function Ql(t){return(t[F]&4)===4}function ur(t){return(t[F]&128)===128}function Yl(t){return Ue(t[fe])}function Xe(t,e){return e==null?null:t[e]}function ps(t){t[Ft]=0}function ms(t){t[F]&1024||(t[F]|=1024,ur(t)&&Ht(t))}function Zl(t,e){for(;t>0;)e=e[Pt],t--;return e}function ni(t){return!!(t[F]&9216||t[Ne]?.dirty)}function dr(t){t[Ze].changeDetectionScheduler?.notify(8),t[F]&64&&(t[F]|=1024),ni(t)&&Ht(t)}function Ht(t){t[Ze].changeDetectionScheduler?.notify(0);let e=mt(t);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!ur(e)));)e=mt(e)}function hs(t,e){if(jt(t))throw new H(911,!1);t[rt]===null&&(t[rt]=[]),t[rt].push(e)}function Kl(t,e){if(t[rt]===null)return;let n=t[rt].indexOf(e);n!==-1&&t[rt].splice(n,1)}function mt(t){let e=t[fe];return Ue(e)?e[fe]:e}function gs(t){return t[pn]??=[]}function vs(t){return t.cleanup??=[]}function Jl(t,e,n,i){let r=gs(e);r.push(n),t.firstCreatePass&&vs(t).push(i,r.length-1)}var B={lFrame:pc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var zo=!1;function Xl(){return B.lFrame.elementDepthCount}function ec(){B.lFrame.elementDepthCount++}function ys(){B.lFrame.elementDepthCount--}function tc(){return B.bindingsEnabled}function nc(){return B.skipHydrationRootTNode!==null}function Es(t){return B.skipHydrationRootTNode===t}function Cs(){B.skipHydrationRootTNode=null}function U(){return B.lFrame.lView}function Ce(){return B.lFrame.tView}function C(t){return B.lFrame.contextLView=t,t[oe]}function _(t){return B.lFrame.contextLView=null,t}function Re(){let t=_s();for(;t!==null&&t.type===64;)t=t.parent;return t}function _s(){return B.lFrame.currentTNode}function ic(){let t=B.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function gn(t,e){let n=B.lFrame;n.currentTNode=t,n.isParent=e}function Ds(){return B.lFrame.isParent}function rc(){B.lFrame.isParent=!1}function bs(){return zo}function vn(t){let e=zo;return zo=t,e}function oc(){let t=B.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function sc(){return B.lFrame.bindingIndex}function ac(t){return B.lFrame.bindingIndex=t}function yt(){return B.lFrame.bindingIndex++}function fr(t){let e=B.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function lc(){return B.lFrame.inI18n}function cc(t,e){let n=B.lFrame;n.bindingIndex=n.bindingRootIndex=t,pr(e)}function uc(){return B.lFrame.currentDirectiveIndex}function pr(t){B.lFrame.currentDirectiveIndex=t}function dc(t){let e=B.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function mr(){return B.lFrame.currentQueryIndex}function ii(t){B.lFrame.currentQueryIndex=t}function qf(t){let e=t[k];return e.type===2?e.declTNode:e.type===1?t[Le]:null}function ws(t,e,n){if(n&4){let r=e,o=t;for(;r=r.parent,r===null&&!(n&1);)if(r=qf(o),r===null||(o=o[Pt],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=B.lFrame=fc();return i.currentTNode=e,i.lView=t,!0}function hr(t){let e=fc(),n=t[k];B.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function fc(){let t=B.lFrame,e=t===null?null:t.child;return e===null?pc(t):e}function pc(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function mc(){let t=B.lFrame;return B.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Is=mc;function gr(){let t=mc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function hc(t){return(B.lFrame.contextLView=Zl(t,B.lFrame.contextLView))[oe]}function et(){return B.lFrame.selectedIndex}function Et(t){B.lFrame.selectedIndex=t}function vr(){let t=B.lFrame;return ti(t.tView,t.selectedIndex)}function Ut(){B.lFrame.currentNamespace=ds}function gc(){return B.lFrame.currentNamespace}var vc=!0;function yr(){return vc}function Er(t){vc=t}function Wo(t,e=null,n=null,i){let r=yc(t,e,n,i);return r.resolveInjectorInitializers(),r}function yc(t,e=null,n=null,i,r=new Set){let o=[n||De,Hl(t)];return i=i||(typeof t=="object"?void 0:pt(t)),new St(o,e||Jn(),i||null,r)}var ot=class t{static THROW_IF_NOT_FOUND=Tt;static NULL=new qn;static create(e,n){if(Array.isArray(e))return Wo({name:""},n,e,"");{let i=e.name??"";return Wo({name:i},e.parent,e.providers,i)}}static \u0275prov=ee({token:t,providedIn:"any",factory:()=>z(ns)});static __NG_ELEMENT_ID__=-1},Ge=new $(""),$t=(()=>{class t{static __NG_ELEMENT_ID__=zf;static __NG_ENV_ID__=n=>n}return t})(),zn=class extends $t{_lView;constructor(e){super(),this._lView=e}get destroyed(){return jt(this._lView)}onDestroy(e){let n=this._lView;return hs(n,e),()=>Kl(n,e)}};function zf(){return new zn(U())}var Fe=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ct=new $("",{providedIn:"root",factory:()=>{let t=N(Pe),e;return n=>{t.destroyed&&!e?setTimeout(()=>{throw n}):(e??=t.get(Fe),e.handleError(n))}}}),Ec={provide:Rt,useValue:()=>void N(Fe),multi:!0};function w(t,e){let[n,i,r]=Mo(t,e?.equal),o=n,s=o[ge];return o.set=i,o.update=r,o.asReadonly=xs.bind(o),o}function xs(){let t=this[ge];if(t.readonlyFn===void 0){let e=()=>this();e[ge]=t,t.readonlyFn=e}return t.readonlyFn}var ri=(()=>{class t{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=Wf}return t})();function Wf(){return new ri(U(),Re())}var Ye=class{},oi=new $("",{providedIn:"root",factory:()=>!1});var Ts=new $(""),Cr=new $(""),Gt=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new $n(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ln(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})();function qt(...t){}var si=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new Qo})}return t})(),Qo=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,i=this.queues.get(n);i.has(e)&&(i.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(e)||i.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,i]of this.queues)n===null?e||=this.flushQueue(i):e||=n.run(()=>this.flushQueue(i));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let i of e)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}};function ua(t){return{toString:t}.toString()}function rp(t){return typeof t=="function"}var Tr=class{previousValue;currentValue;firstChange;constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Zc(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function op(t){return t.type.prototype.ngOnChanges&&(t.setInput=ap),sp}function sp(){let t=Jc(this),e=t?.current;if(e){let n=t.previous;if(n===Nt)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function ap(t,e,n,i,r){let o=this.declaredInputs[i],s=Jc(t)||lp(t,{previous:Nt,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Tr(u&&u.currentValue,n,l===Nt),Zc(t,e,r,n)}var Kc="__ngSimpleChanges__";function Jc(t){return t[Kc]||null}function lp(t,e){return t[Kc]=e}var Cc=[];var K=function(t,e=null,n){for(let i=0;i<Cc.length;i++){let r=Cc[i];r(t,e,n)}};function cp(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=op(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function up(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function Dr(t,e,n){Xc(t,e,3,n)}function br(t,e,n,i){(t[F]&3)===n&&Xc(t,e,n,i)}function Ms(t,e){let n=t[F];(n&3)===e&&(n&=16383,n+=1,t[F]=n)}function Xc(t,e,n,i){let r=i!==void 0?t[Ft]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[Ft]+=65536),(a<o||o==-1)&&(dp(t,n,e,l),t[Ft]=(t[Ft]&4294901760)+l+2),l++}function _c(t,e){K(4,t,e);let n=P(null);try{e.call(t)}finally{P(n),K(5,t,e)}}function dp(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[F]>>14<t[Ft]>>16&&(t[F]&3)===e&&(t[F]+=16384,_c(a,o)):_c(a,o)}var En=-1,ci=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,i,r){this.factory=e,this.name=r,this.canSeeViewProviders=n,this.injectImpl=i}};function fp(t){return(t.flags&8)!==0}function pp(t){return(t.flags&16)!==0}function mp(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];gp(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function hp(t){return t===3||t===4||t===6}function gp(t){return t.charCodeAt(0)===64}function Ur(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?Dc(t,n,r,null,e[++i]):Dc(t,n,r,null,null))}}return t}function Dc(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){r!==null&&(t[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),r!==null&&t.splice(o++,0,r)}function eu(t){return t!==En}function Mr(t){return t&32767}function vp(t){return t>>16}function Sr(t,e){let n=vp(t),i=e;for(;n>0;)i=i[Pt],n--;return i}var Fs=!0;function bc(t){let e=Fs;return Fs=t,e}var yp=256,tu=yp-1,nu=5,Ep=0,tt={};function Cp(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(At)&&(i=n[At]),i==null&&(i=n[At]=Ep++);let r=i&tu,o=1<<r;e.data[t+(r>>nu)]|=o}function iu(t,e){let n=ru(t,e);if(n!==-1)return n;let i=e[k];i.firstCreatePass&&(t.injectorIndex=e.length,Ss(i.data,t),Ss(e,null),Ss(i.blueprint,null));let r=da(t,e),o=t.injectorIndex;if(eu(r)){let s=Mr(r),a=Sr(r,e),l=a[k].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|l[s+u]}return e[o+8]=r,o}function Ss(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ru(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function da(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=cu(r),i===null)return En;if(n++,r=r[Pt],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return En}function _p(t,e,n){Cp(t,e,n)}function ou(t,e,n){if(n&8||t!==void 0)return t;nr(e,"NodeInjector")}function su(t,e,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=t[st],o=Se(void 0);try{return r?r.get(e,i,n&8):es(e,i,n&8)}finally{Se(o)}}return ou(i,e,n)}function au(t,e,n,i=0,r){if(t!==null){if(e[F]&2048&&!(i&2)){let s=Ip(t,e,n,i,tt);if(s!==tt)return s}let o=lu(t,e,n,i,tt);if(o!==tt)return o}return su(e,n,i,r)}function lu(t,e,n,i,r){let o=bp(n);if(typeof o=="function"){if(!ws(e,t,i))return i&1?ou(r,n,i):su(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&8))nr(n);else return s}finally{Is()}}else if(typeof o=="number"){let s=null,a=ru(t,e),l=En,u=i&1?e[Ve][Le]:null;for((a===-1||i&4)&&(l=a===-1?da(t,e):e[a+8],l===En||!Ic(i,!1)?a=-1:(s=e[k],a=Mr(l),e=Sr(l,e)));a!==-1;){let f=e[k];if(wc(o,a,f.data)){let v=Dp(a,e,n,s,i,u);if(v!==tt)return v}l=e[a+8],l!==En&&Ic(i,e[k].data[a+8]===u)&&wc(o,a,e)?(s=f,a=Mr(l),e=Sr(l,e)):a=-1}}return r}function Dp(t,e,n,i,r,o){let s=e[k],a=s.data[t+8],l=i==null?Vt(a)&&Fs:i!=s&&(a.type&3)!==0,u=r&1&&o===a,f=wr(a,s,n,l,u);return f!==null?Ar(e,s,f,a,r):tt}function wr(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,u=t.directiveEnd,f=o>>20,v=i?a:a+f,b=r?a+f:u;for(let D=v;D<b;D++){let O=s[D];if(D<l&&n===O||D>=l&&O.type===n)return D}if(r){let D=s[l];if(D&&Bt(D)&&D.type===n)return l}return null}function Ar(t,e,n,i,r){let o=t[n],s=e.data;if(o instanceof ci){let a=o;if(a.resolving){let D=kl(s[n]);throw Xo(D)}let l=bc(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],f,v=a.injectImpl?Se(a.injectImpl):null,b=ws(t,i,0);try{o=t[n]=a.factory(void 0,r,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&cp(n,s[n],e)}finally{v!==null&&Se(v),bc(l),a.resolving=!1,Is()}}return o}function bp(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(At)?t[At]:void 0;return typeof e=="number"?e>=0?e&tu:wp:e}function wc(t,e,n){let i=1<<t;return!!(n[e+(t>>nu)]&i)}function Ic(t,e){return!(t&2)&&!(t&1&&e)}var zt=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return au(this._tNode,this._lView,e,Mt(i),n)}};function wp(){return new zt(Re(),U())}function Ip(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[F]&2048&&!hn(s);){let a=lu(o,s,n,i|2,tt);if(a!==tt)return a;let l=o.parent;if(!l){let u=s[ls];if(u){let f=u.get(n,tt,i);if(f!==tt)return f}l=cu(s),s=s[Pt]}o=l}return r}function cu(t){let e=t[k],n=e.type;return n===2?e.declTNode:n===1?t[Le]:null}function xp(){return wn(Re(),U())}function wn(t,e){return new In($e(t,e))}var In=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=xp}return t})();function uu(t){return t instanceof In?t.nativeElement:t}function Tp(){return this._results[Symbol.iterator]()}var Nr=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ft}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=Vl(e);(this._changesDetected=!Ll(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Tp};function du(t){return(t.flags&128)===128}var fa=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(fa||{}),fu=new Map,Mp=0;function Sp(){return Mp++}function Ap(t){fu.set(t[Xn],t)}function Os(t){fu.delete(t[Xn])}var xc="__ngContext__";function Cn(t,e){lt(e)?(t[xc]=e[Xn],Ap(e)):t[xc]=e}function pu(t){return hu(t[mn])}function mu(t){return hu(t[Oe])}function hu(t){for(;t!==null&&!Ue(t);)t=t[Oe];return t}var Ls;function pa(t){Ls=t}function gu(){if(Ls!==void 0)return Ls;if(typeof document<"u")return document;throw new H(210,!1)}var $r=new $("",{providedIn:"root",factory:()=>Np}),Np="ng",Gr=new $(""),vi=new $("",{providedIn:"platform",factory:()=>"unknown"});var qr=new $("",{providedIn:"root",factory:()=>gu().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Rp="h",kp="b";var vu="r";var yu="di";var Eu=!1,Cu=new $("",{providedIn:"root",factory:()=>Eu});var Pp=(t,e,n,i)=>{};function Fp(t,e,n,i){Pp(t,e,n,i)}function ma(t){return(t.flags&32)===32}var Op=()=>null;function _u(t,e,n=!1){return Op(t,e,n)}function Du(t,e){let n=t.contentQueries;if(n!==null){let i=P(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];ii(o),a.contentQueries(2,e[s],s)}}}finally{P(i)}}}function Vs(t,e,n){ii(0);let i=P(null);try{e(t,n)}finally{P(i)}}function bu(t,e,n){if(us(e)){let i=P(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{P(i)}}}var ut=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t})(ut||{});var Rr=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ki})`}};function zr(t){return t instanceof Rr?t.changingThisBreaksApplicationSecurity:t}function wu(t,e){let n=Iu(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Ki})`)}return n===e}function Iu(t){return t instanceof Rr&&t.getTypeName()||null}var Lp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xu(t){return t=String(t),t.match(Lp)?t:"unsafe:"+t}var ha=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(ha||{});function re(t){let e=Vp();return e?e.sanitize(ha.URL,t)||"":wu(t,"URL")?zr(t):xu(ht(t))}function Vp(){let t=U();return t&&t[Ze].sanitizer}function xn(t){return t.ownerDocument.defaultView}function Bp(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}var Tu="ng-template";function jp(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&Bp(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(ga(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function ga(t){return t.type===4&&t.value!==Tu}function Hp(t,e,n){let i=t.type===4&&!n?Tu:t.value;return e===i}function Up(t,e,n){let i=4,r=t.attrs,o=r!==null?qp(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!qe(i)&&!qe(l))return!1;if(s&&qe(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!Hp(t,l,n)||l===""&&e.length===1){if(qe(i))return!1;s=!0}}else if(i&8){if(r===null||!jp(t,r,l,n)){if(qe(i))return!1;s=!0}}else{let u=e[++a],f=$p(l,r,ga(t),n);if(f===-1){if(qe(i))return!1;s=!0;continue}if(u!==""){let v;if(f>o?v="":v=r[f+1].toLowerCase(),i&2&&u!==v){if(qe(i))return!1;s=!0}}}}return qe(i)||s}function qe(t){return(t&1)===0}function $p(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return zp(e,t)}function Gp(t,e,n=!1){for(let i=0;i<e.length;i++)if(Up(t,e[i],n))return!0;return!1}function qp(t){for(let e=0;e<t.length;e++){let n=t[e];if(hp(n))return e}return t.length}function zp(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function Tc(t,e){return t?":not("+e.trim()+")":e}function Wp(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!qe(s)&&(e+=Tc(o,r),r=""),i=s,o=o||!qe(i);n++}return r!==""&&(e+=Tc(o,r)),e}function Qp(t){return t.map(Wp).join(",")}function Yp(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!qe(r))break;r=o}i++}return n.length&&e.push(1,...n),e}var be={};function Zp(t,e){return t.createText(e)}function Kp(t,e,n){t.setValue(e,n)}function Mu(t,e,n){return t.createElement(e,n)}function kr(t,e,n,i,r){t.insertBefore(e,n,i,r)}function Su(t,e,n){t.appendChild(e,n)}function Mc(t,e,n,i,r){i!==null?kr(t,e,n,i,r):Su(t,e,n)}function Au(t,e,n,i){t.removeChild(null,e,n,i)}function Jp(t,e,n){t.setAttribute(e,"style",n)}function Xp(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Nu(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&mp(t,e,i),r!==null&&Xp(t,e,r),o!==null&&Jp(t,e,o)}function va(t,e,n,i,r,o,s,a,l,u,f){let v=ve+i,b=v+r,D=em(v,b),O=typeof u=="function"?u():u;return D[k]={type:t,blueprint:D,template:n,queries:null,viewQuery:a,declTNode:e,data:D.slice().fill(null,v),bindingStartIndex:v,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:O,incompleteFirstPass:!1,ssrId:f}}function em(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:be);return n}function tm(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=va(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ya(t,e,n,i,r,o,s,a,l,u,f){let v=e.blueprint.slice();return v[He]=r,v[F]=i|4|128|8|64|1024,(u!==null||t&&t[F]&2048)&&(v[F]|=2048),ps(v),v[fe]=v[Pt]=t,v[oe]=n,v[Ze]=s||t&&t[Ze],v[te]=a||t&&t[te],v[st]=l||t&&t[st]||null,v[Le]=o,v[Xn]=Sp(),v[fn]=f,v[ls]=u,v[Ve]=e.type==2?t[Ve]:v,v}function nm(t,e,n){let i=$e(e,t),r=tm(n),o=t[Ze].rendererFactory,s=Ea(t,ya(t,r,null,Ru(n),i,e,null,o.createRenderer(i,n),null,null,null));return t[e.index]=s}function Ru(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function ku(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Ea(t,e){return t[mn]?t[as][Oe]=e:t[mn]=e,t[as]=e,e}function c(t=1){Pu(Ce(),U(),et()+t,!1)}function Pu(t,e,n,i){if(!i)if((e[F]&3)===3){let o=t.preOrderCheckHooks;o!==null&&Dr(e,o,n)}else{let o=t.preOrderHooks;o!==null&&br(e,o,0,n)}Et(n)}var Wr=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Wr||{});function Bs(t,e,n,i){let r=P(null);try{let[o,s,a]=t.inputs[n],l=null;(s&Wr.SignalBased)!==0&&(l=e[o][ge]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(e,i)),t.setInput!==null?t.setInput(e,l,i,n,o):Zc(e,l,o,i)}finally{P(r)}}var dt=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(dt||{}),im;function Ca(t,e){return im(t,e)}var Wt=new Set,_a=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(_a||{}),yi=new $(""),Sc=new Set;function Zt(t){Sc.has(t)||(Sc.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Fu=!1,js=class extends ft{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,ql()&&(this.destroyRef=N($t,{optional:!0})??void 0,this.pendingTasks=N(Gt,{optional:!0})??void 0)}emit(e){let n=P(null);try{super.next(e)}finally{P(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof _e&&e.add(a),a}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},ct=js;function Ou(t){let e,n;function i(){t=qt;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),i()})),()=>i()}function Ac(t){return queueMicrotask(()=>t()),()=>{t=qt}}var Da="isAngularZone",Pr=Da+"_ID",rm=0,me=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new ct(!1);onMicrotaskEmpty=new ct(!1);onStable=new ct(!1);onError=new ct(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=Fu}=e;if(typeof Zone>"u")throw new H(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,am(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Da)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new H(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new H(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,om,qt,qt);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},om={};function ba(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sm(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Ou(()=>{t.callbackScheduled=!1,Hs(t),t.isCheckStableRunning=!0,ba(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Hs(t)}function am(t){let e=()=>{sm(t)},n=rm++;t._inner=t._inner.fork({name:"angular",properties:{[Da]:!0,[Pr]:n,[Pr+n]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(lm(l))return i.invokeTask(o,s,a,l);try{return Nc(t),i.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Rc(t)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return Nc(t),i.invoke(o,s,a,l,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!cm(l)&&e(),Rc(t)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Hs(t),ba(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Hs(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Nc(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Rc(t){t._nesting--,ba(t)}var ui=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new ct;onMicrotaskEmpty=new ct;onStable=new ct;onError=new ct;run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function lm(t){return Lu(t,"__ignore_ng_zone__")}function cm(t){return Lu(t,"__scheduler_tick__")}function Lu(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var Vu=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=ee({token:t,providedIn:"root",factory:()=>new t})}return t})();var Bu=new $("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function ju(t,e,n){let i=t.get(Bu);if(Array.isArray(e))for(let r of e)i.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else i.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);i.scheduler&&i.scheduler(t)}function um(t,e){let n=t.get(Bu);if(e.detachedLeaveAnimationFns){for(let i of e.detachedLeaveAnimationFns)n.queue.delete(i);e.detachedLeaveAnimationFns=void 0}}function dm(t,e){for(let[n,i]of e)ju(t,i.animateFns)}function kc(t,e,n,i){let r=t?.[Ot]?.enter;e!==null&&r&&r.has(n.index)&&dm(i,r)}function yn(t,e,n,i,r,o,s,a){if(r!=null){let l,u=!1;Ue(r)?l=r:lt(r)&&(u=!0,r=r[He]);let f=Be(r);t===0&&i!==null?(kc(a,i,o,n),s==null?Su(e,i,f):kr(e,i,f,s||null,!0)):t===1&&i!==null?(kc(a,i,o,n),kr(e,i,f,s||null,!0)):t===2?Pc(a,o,n,v=>{Au(e,f,u,v)}):t===3&&Pc(a,o,n,()=>{e.destroyNode(f)}),l!=null&&wm(e,t,n,l,o,i,s)}}function fm(t,e){Hu(t,e),e[He]=null,e[Le]=null}function pm(t,e,n,i,r,o){i[He]=r,i[Le]=e,Yr(t,i,n,1,r,o)}function Hu(t,e){e[Ze].changeDetectionScheduler?.notify(9),Yr(t,e,e[te],2,null,null)}function mm(t){let e=t[mn];if(!e)return As(t[k],t);for(;e;){let n=null;if(lt(e))n=e[mn];else{let i=e[ie];i&&(n=i)}if(!n){for(;e&&!e[Oe]&&e!==t;)lt(e)&&As(e[k],e),e=e[fe];e===null&&(e=t),lt(e)&&As(e[k],e),n=e&&e[Oe]}e=n}}function wa(t,e){let n=t[Lt],i=n.indexOf(e);n.splice(i,1)}function Qr(t,e){if(jt(e))return;let n=e[te];n.destroyNode&&Yr(t,e,n,3,null,null),mm(e)}function As(t,e){if(jt(e))return;let n=P(null);try{e[F]&=-129,e[F]|=256,e[Ne]&&wt(e[Ne]),vm(t,e),gm(t,e),e[k].type===1&&e[te].destroy();let i=e[gt];if(i!==null&&Ue(e[fe])){i!==e[fe]&&wa(i,e);let r=e[Ke];r!==null&&r.detachView(t)}Os(e)}finally{P(n)}}function Pc(t,e,n,i){let r=t?.[Ot];if(r==null||r.leave==null||!r.leave.has(e.index))return i(!1);t&&Wt.add(t),ju(n,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let u=s.animateFns[l],{promise:f}=u();a.push(f)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),hm(t,i)}else t&&Wt.delete(t),i(!1)},r)}function hm(t,e){let n=t[Ot]?.running;if(n){n.then(()=>{t[Ot].running=void 0,Wt.delete(t),e(!0)});return}e(!1)}function gm(t,e){let n=t.cleanup,i=e[pn];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[n[s+1]];n[s].call(a)}i!==null&&(e[pn]=null);let r=e[rt];if(r!==null){e[rt]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=e[at];if(o!==null){e[at]=null;for(let s of o)s.destroy()}}function vm(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof ci)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];K(4,a,l);try{l.call(a)}finally{K(5,a,l)}}else{K(4,r,o);try{o.call(r)}finally{K(5,r,o)}}}}}function ym(t,e,n){return Em(t,e.parent,n)}function Em(t,e,n){let i=e;for(;i!==null&&i.type&168;)e=i,i=e.parent;if(i===null)return n[He];if(Vt(i)){let{encapsulation:r}=t.data[i.directiveStart+i.componentOffset];if(r===ut.None||r===ut.Emulated)return null}return $e(i,n)}function Cm(t,e,n){return Dm(t,e,n)}function _m(t,e,n){return t.type&40?$e(t,n):null}var Dm=_m,Fc;function Ia(t,e,n,i){let r=ym(t,i,e),o=e[te],s=i.parent||e[Le],a=Cm(s,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Mc(o,r,n[l],a,!1);else Mc(o,r,n,a,!1);Fc!==void 0&&Fc(o,i,e,n,r)}function ai(t,e){if(e!==null){let n=e.type;if(n&3)return $e(e,t);if(n&4)return Us(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return ai(t,i);{let r=t[e.index];return Ue(r)?Us(-1,r):Be(r)}}else{if(n&128)return ai(t,e.next);if(n&32)return Ca(e,t)()||Be(t[e.index]);{let i=Uu(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=mt(t[Ve]);return ai(r,i)}else return ai(t,e.next)}}}return null}function Uu(t,e){if(e!==null){let i=t[Ve][Le],r=e.projection;return i.projection[r]}return null}function Us(t,e){let n=ie+t+1;if(n<e.length){let i=e[n],r=i[k].firstChild;if(r!==null)return ai(i,r)}return e[vt]}function xa(t,e,n,i,r,o,s){for(;n!=null;){let a=i[st];if(n.type===128){n=n.next;continue}let l=i[n.index],u=n.type;if(s&&e===0&&(l&&Cn(Be(l),i),n.flags|=2),!ma(n))if(u&8)xa(t,e,n.child,i,r,o,!1),yn(e,t,a,r,l,n,o,i);else if(u&32){let f=Ca(n,i),v;for(;v=f();)yn(e,t,a,r,v,n,o,i);yn(e,t,a,r,l,n,o,i)}else u&16?bm(t,e,i,n,r,o):yn(e,t,a,r,l,n,o,i);n=s?n.projectionNext:n.next}}function Yr(t,e,n,i,r,o){xa(n,i,t.firstChild,e,r,o,!1)}function bm(t,e,n,i,r,o){let s=n[Ve],l=s[Le].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];yn(e,t,n[st],r,f,i,o,n)}else{let u=l,f=s[fe];du(i)&&(u.flags|=128),xa(t,e,u,f,r,o,!0)}}function wm(t,e,n,i,r,o,s){let a=i[vt],l=Be(i);a!==l&&yn(e,t,n,o,a,r,s);for(let u=ie;u<i.length;u++){let f=i[u];Yr(f[k],f,t,e,o,a)}}function Im(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:dt.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=dt.Important),t.setStyle(n,i,r,o))}}function $u(t,e,n,i,r){let o=et(),s=i&2;try{Et(-1),s&&e.length>ve&&Pu(t,e,ve,!1),K(s?2:0,r,n),n(i,r)}finally{Et(o),K(s?3:1,r,n)}}function Gu(t,e,n){Rm(t,e,n),(n.flags&64)===64&&km(t,e,n)}function Ta(t,e,n=$e){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function xm(t,e,n,i){let o=i.get(Cu,Eu)||n===ut.ShadowDom,s=t.selectRootElement(e,o);return Tm(s),s}function Tm(t){Mm(t)}var Mm=()=>null;function Sm(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Am(t,e,n,i,r,o){let s=e[k];if(Ma(t,s,e,n,i)){Vt(t)&&Nm(e,t.index);return}t.type&3&&(n=Sm(n)),qu(t,e,n,i,r,o)}function qu(t,e,n,i,r,o){if(t.type&3){let s=$e(t,e);i=o!=null?o(i,t.value||"",n):i,r.setProperty(s,n,i)}else t.type&12}function Nm(t,e){let n=Je(e,t);n[F]&16||(n[F]|=64)}function Rm(t,e,n){let i=n.directiveStart,r=n.directiveEnd;Vt(n)&&nm(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||iu(n,e);let o=n.initialInputs;for(let s=i;s<r;s++){let a=t.data[s],l=Ar(e,t,s,n);if(Cn(l,e),o!==null&&Vm(e,s-i,l,a,n,o),Bt(a)){let u=Je(n.index,e);u[oe]=Ar(e,t,s,n)}}}function km(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=uc();try{Et(o);for(let a=i;a<r;a++){let l=t.data[a],u=e[a];pr(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Pm(l,u)}}finally{Et(-1),pr(s)}}function Pm(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Fm(t,e){let n=t.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];Gp(e,o.selectors,!1)&&(i??=[],Bt(o)?i.unshift(o):i.push(o))}return i}function Om(t,e,n,i,r,o){let s=$e(t,e);Lm(e[te],s,o,t.value,n,i,r)}function Lm(t,e,n,i,r,o,s){if(o==null)t.removeAttribute(e,r,n);else{let a=s==null?ht(o):s(o,i||"",r);t.setAttribute(e,r,a,n)}}function Vm(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];Bs(i,n,l,u)}}function zu(t,e,n,i,r){let o=ve+n,s=e[k],a=r(s,e,t,i,n);e[o]=a,gn(t,!0);let l=t.type===2;return l?(Nu(e[te],a,t),(Xl()===0||cr(t))&&Cn(a,e),ec()):Cn(a,e),yr()&&(!l||!ma(t))&&Ia(s,e,a,t),t}function Wu(t){let e=t;return Ds()?rc():(e=e.parent,gn(e,!1)),e}function Bm(t,e){let n=t[st];if(!n)return;let i;try{i=n.get(Ct,null)}catch{i=null}i?.(e)}function Ma(t,e,n,i,r){let o=t.inputs?.[i],s=t.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],v=e.data[u];Bs(v,n[u],f,r),a=!0}if(o)for(let l of o){let u=n[l],f=e.data[l];Bs(f,u,i,r),a=!0}return a}function jm(t,e){let n=Je(e,t),i=n[k];Hm(i,n);let r=n[He];r!==null&&n[fn]===null&&(n[fn]=_u(r,n[st])),K(18),Sa(i,n,n[oe]),K(19,n[oe])}function Hm(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Sa(t,e,n){hr(e);try{let i=t.viewQuery;i!==null&&Vs(1,i,n);let r=t.template;r!==null&&$u(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Ke]?.finishViewCreation(t),t.staticContentQueries&&Du(t,e),t.staticViewQueries&&Vs(2,t.viewQuery,n);let o=t.components;o!==null&&Um(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[F]&=-5,gr()}}function Um(t,e){for(let n=0;n<e.length;n++)jm(t,e[n])}function Zr(t,e,n,i){let r=P(null);try{let o=e.tView,a=t[F]&4096?4096:16,l=ya(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=t[e.index];l[gt]=u;let f=t[Ke];return f!==null&&(l[Ke]=f.createEmbeddedView(o)),Sa(o,l,n),l}finally{P(r)}}function di(t,e){return!e||e.firstChild===null||du(t)}function fi(t,e,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&i.push(Be(o)),Ue(o)&&Qu(o,i);let s=n.type;if(s&8)fi(t,e,n.child,i);else if(s&32){let a=Ca(n,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=Uu(e,n);if(Array.isArray(a))i.push(...a);else{let l=mt(e[Ve]);fi(l[k],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Qu(t,e){for(let n=ie;n<t.length;n++){let i=t[n],r=i[k].firstChild;r!==null&&fi(i[k],i,r,e)}t[vt]!==t[He]&&e.push(t[vt])}function Yu(t){if(t[lr]!==null){for(let e of t[lr])e.impl.addSequence(e);t[lr].length=0}}var Zu=[];function $m(t){return t[Ne]??Gm(t)}function Gm(t){let e=Zu.pop()??Object.create(zm);return e.lView=t,e}function qm(t){t.lView[Ne]!==t&&(t.lView=null,Zu.push(t))}var zm=A(S({},Dt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ht(t.lView)},consumerOnSignalRead(){this.lView[Ne]=this}});function Wm(t){let e=t[Ne]??Object.create(Qm);return e.lView=t,e}var Qm=A(S({},Dt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=mt(t.lView);for(;e&&!Ku(e[k]);)e=mt(e);e&&ms(e)},consumerOnSignalRead(){this.lView[Ne]=this}});function Ku(t){return t.type!==2}function Ju(t){if(t[at]===null)return;let e=!0;for(;e;){let n=!1;for(let i of t[at])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));e=n&&!!(t[F]&8192)}}var Ym=100;function Xu(t,e=0){let i=t[Ze].rendererFactory,r=!1;r||i.begin?.();try{Zm(t,e)}finally{r||i.end?.()}}function Zm(t,e){let n=bs();try{vn(!0),$s(t,e);let i=0;for(;ni(t);){if(i===Ym)throw new H(103,!1);i++,$s(t,1)}}finally{vn(n)}}function Km(t,e,n,i){if(jt(e))return;let r=e[F],o=!1,s=!1;hr(e);let a=!0,l=null,u=null;o||(Ku(t)?(u=$m(e),l=bt(u)):Li()===null?(a=!1,u=Wm(e),l=bt(u)):e[Ne]&&(wt(e[Ne]),e[Ne]=null));try{ps(e),ac(t.bindingStartIndex),n!==null&&$u(t,e,n,2,i);let f=(r&3)===3;if(!o)if(f){let D=t.preOrderCheckHooks;D!==null&&Dr(e,D,null)}else{let D=t.preOrderHooks;D!==null&&br(e,D,0,null),Ms(e,0)}if(s||Jm(e),Ju(e),ed(e,0),t.contentQueries!==null&&Du(t,e),!o)if(f){let D=t.contentCheckHooks;D!==null&&Dr(e,D)}else{let D=t.contentHooks;D!==null&&br(e,D,1),Ms(e,1)}eh(t,e);let v=t.components;v!==null&&nd(e,v,0);let b=t.viewQuery;if(b!==null&&Vs(2,b,i),!o)if(f){let D=t.viewCheckHooks;D!==null&&Dr(e,D)}else{let D=t.viewHooks;D!==null&&br(e,D,2),Ms(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ar]){for(let D of e[ar])D();e[ar]=null}o||(Yu(e),e[F]&=-73)}catch(f){throw o||Ht(e),f}finally{u!==null&&(en(u,l),a&&qm(u)),gr()}}function ed(t,e){for(let n=pu(t);n!==null;n=mu(n))for(let i=ie;i<n.length;i++){let r=n[i];td(r,e)}}function Jm(t){for(let e=pu(t);e!==null;e=mu(e)){if(!(e[F]&2))continue;let n=e[Lt];for(let i=0;i<n.length;i++){let r=n[i];ms(r)}}}function Xm(t,e,n){K(18);let i=Je(e,t);td(i,n),K(19,i[oe])}function td(t,e){ur(t)&&$s(t,e)}function $s(t,e){let i=t[k],r=t[F],o=t[Ne],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&tn(o)),s||=!1,o&&(o.dirty=!1),t[F]&=-9217,s)Km(i,t,i.template,t[oe]);else if(r&8192){let a=P(null);try{Ju(t),ed(t,1);let l=i.components;l!==null&&nd(t,l,1),Yu(t)}finally{P(a)}}}function nd(t,e,n){for(let i=0;i<e.length;i++)Xm(t,e[i],n)}function eh(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Et(~r);else{let o=r,s=n[++i],a=n[++i];cc(s,o);let l=e[o];K(24,l),a(2,l),K(25,l)}}}finally{Et(-1)}}function Aa(t,e){let n=bs()?64:1088;for(t[Ze].changeDetectionScheduler?.notify(e);t;){t[F]|=n;let i=mt(t);if(hn(t)&&!i)return t;t=i}return null}function id(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function rd(t,e){let n=ie+e;if(n<t.length)return t[n]}function Kr(t,e,n,i=!0){let r=e[k];if(th(r,e,t,n),i){let s=Us(n,t),a=e[te],l=a.parentNode(t[vt]);l!==null&&pm(r,t[Le],a,e,l,s)}let o=e[fn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function od(t,e){let n=pi(t,e);return n!==void 0&&Qr(n[k],n),n}function pi(t,e){if(t.length<=ie)return;let n=ie+e,i=t[n];if(i){let r=i[gt];r!==null&&r!==t&&wa(r,i),e>0&&(t[n-1][Oe]=i[Oe]);let o=Yn(t,ie+e);fm(i[k],i);let s=o[Ke];s!==null&&s.detachView(o[k]),i[fe]=null,i[Oe]=null,i[F]&=-129}return i}function th(t,e,n,i){let r=ie+i,o=n.length;i>0&&(n[r-1][Oe]=e),i<o-ie?(e[Oe]=n[r],ts(n,ie+i,e)):(n.push(e),e[Oe]=null),e[fe]=n;let s=e[gt];s!==null&&n!==s&&sd(s,e);let a=e[Ke];a!==null&&a.insertView(t),dr(e),e[F]|=128}function sd(t,e){let n=t[Lt],i=e[fe];if(lt(i))t[F]|=2;else{let r=i[fe][Ve];e[Ve]!==r&&(t[F]|=2)}n===null?t[Lt]=[e]:n.push(e)}var _n=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[k];return fi(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[oe]}set context(e){this._lView[oe]=e}get destroyed(){return jt(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[fe];if(Ue(e)){let n=e[ei],i=n?n.indexOf(this):-1;i>-1&&(pi(e,i),Yn(n,i))}this._attachedToViewContainer=!1}Qr(this._lView[k],this._lView)}onDestroy(e){hs(this._lView,e)}markForCheck(){Aa(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[F]&=-129}reattach(){dr(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,Xu(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new H(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=hn(this._lView),n=this._lView[gt];n!==null&&!e&&wa(n,this._lView),Hu(this._lView[k],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new H(902,!1);this._appRef=e;let n=hn(this._lView),i=this._lView[gt];i!==null&&!n&&sd(i,this._lView),dr(this._lView)}};var Dn=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nh;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let o=Zr(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new _n(o)}}return t})();function nh(){return Na(Re(),U())}function Na(t,e){return t.type&4?new Dn(e,t,wn(t,e)):null}function Jr(t,e,n,i,r){let o=t.data[e];if(o===null)o=ih(t,e,n,i,r),lc()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=ic();o.injectorIndex=s===null?-1:s.injectorIndex}return gn(o,!0),o}function ih(t,e,n,i,r){let o=_s(),s=Ds(),a=s?o:o&&o.parent,l=t.data[e]=oh(t,a,n,e,i,r);return rh(t,l,o,s),l}function rh(t,e,n,i){t.firstChild===null&&(t.firstChild=e),n!==null&&(i?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function oh(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return nc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var sD=new RegExp(`^(\\d+)*(${kp}|${Rp})*(.*)`);function sh(t){let e=t[cs]??[],i=t[fe][te],r=[];for(let o of e)o.data[yu]!==void 0?r.push(o):ah(o,i);t[cs]=r}function ah(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[vu];for(;n<r;){let o=i.nextSibling;Au(e,i,!1),i=o,n++}}}var lh=()=>null,ch=()=>null;function Gs(t,e){return lh(t,e)}function ad(t,e,n){return ch(t,e,n)}var ld=class{},Xr=class{},qs=class{resolveComponentFactory(e){throw new H(917,!1)}},eo=class{static NULL=new qs},Qt=class{};var cd=(()=>{class t{static \u0275prov=ee({token:t,providedIn:"root",factory:()=>null})}return t})();var Ir={},zs=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){let r=this.injector.get(e,Ir,i);return r!==Ir||n===Ir?r:this.parentInjector.get(e,n,i)}};function Fr(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=Ji(r,a);else if(o==2){let l=a,u=e[++s];i=Ji(i,l+": "+u+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function Ra(t,e=0){let n=U();if(n===null)return z(t,e);let i=Re();return au(i,n,Ae(t),e)}function uh(t,e,n,i,r){let o=i===null?null:{"":-1},s=r(t,n);if(s!==null){let a=s,l=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,u]=f.resolveHostDirectives(s);break}ph(t,e,n,a,o,l,u)}o!==null&&i!==null&&dh(n,i,o)}function dh(t,e,n){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new H(-301,!1);i.push(e[r],o)}}function fh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function ph(t,e,n,i,r,o,s){let a=i.length,l=!1;for(let b=0;b<a;b++){let D=i[b];!l&&Bt(D)&&(l=!0,fh(t,n,b)),_p(iu(n,e),t,D.type)}Eh(n,t.data.length,a);for(let b=0;b<a;b++){let D=i[b];D.providersResolver&&D.providersResolver(D)}let u=!1,f=!1,v=ku(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let b=0;b<a;b++){let D=i[b];if(n.mergedAttrs=Ur(n.mergedAttrs,D.hostAttrs),hh(t,n,e,v,D),yh(v,D,r),s!==null&&s.has(D)){let[G,ae]=s.get(D);n.directiveToIndex.set(D.type,[v,G+n.directiveStart,ae+n.directiveStart])}else(o===null||!o.has(D))&&n.directiveToIndex.set(D.type,v);D.contentQueries!==null&&(n.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(n.flags|=64);let O=D.type.prototype;!u&&(O.ngOnChanges||O.ngOnInit||O.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!f&&(O.ngOnChanges||O.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),v++}mh(t,n,o)}function mh(t,e,n){for(let i=e.directiveStart;i<e.directiveEnd;i++){let r=t.data[i];if(n===null||!n.has(r))Oc(0,e,r,i),Oc(1,e,r,i),Vc(e,i,!1);else{let o=n.get(r);Lc(0,e,o,i),Lc(1,e,o,i),Vc(e,i,!0)}}}function Oc(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(i),ud(e,o)}}function Lc(t,e,n,i){let r=t===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),ud(e,s)}}function ud(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Vc(t,e,n){let{attrs:i,inputs:r,hostDirectiveInputs:o}=t;if(i===null||!n&&r===null||n&&o===null||ga(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===e){s??=[],s.push(l,i[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===e){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function hh(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=un(r.type,!0)),s=new ci(o,Bt(r),Ra,null);t.blueprint[i]=s,n[i]=s,gh(t,e,i,ku(t,n,r.hostVars,be),r)}function gh(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;vh(s)!=a&&s.push(a),s.push(n,i,o)}}function vh(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yh(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;Bt(e)&&(n[""]=t)}}function Eh(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function dd(t,e,n,i,r,o,s,a){let l=e[k],u=l.consts,f=Xe(u,s),v=Jr(l,t,n,i,f);return o&&uh(l,e,v,Xe(u,a),r),v.mergedAttrs=Ur(v.mergedAttrs,v.attrs),v.attrs!==null&&Fr(v,v.attrs,!1),v.mergedAttrs!==null&&Fr(v,v.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,v),v}function fd(t,e){up(t,e),us(e)&&t.queries.elementEnd(e)}function Ch(t,e,n,i,r,o){let s=e.consts,a=Xe(s,r),l=Jr(e,t,n,i,a);if(l.mergedAttrs=Ur(l.mergedAttrs,l.attrs),o!=null){let u=Xe(s,o);l.localNames=[];for(let f=0;f<u.length;f+=2)l.localNames.push(u[f],-1)}return l.attrs!==null&&Fr(l,l.attrs,!1),l.mergedAttrs!==null&&Fr(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function _h(t,e,n){return t[e]=n}function Dh(t,e){return t[e]}function We(t,e,n){if(n===be)return!1;let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function bh(t,e,n,i){let r=We(t,e,n);return We(t,e+1,i)||r}function xr(t,e,n){return function i(r){let o=Vt(t)?Je(t.index,e):e;Aa(o,5);let s=e[oe],a=Bc(e,s,n,r),l=i.__ngNextListenerFn__;for(;l;)a=Bc(e,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Bc(t,e,n,i){let r=P(null);try{return K(6,e,n),n(i)!==!1}catch(o){return Bm(t,o),!1}finally{K(7,e,n),P(r)}}function pd(t,e,n,i,r,o,s,a){let l=cr(t),u=!1,f=null;if(!i&&l&&(f=Ih(e,n,o,t.index)),f!==null){let v=f.__ngLastListenerFn__||f;v.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let v=$e(t,n),b=i?i(v):v;Fp(n,b,o,a);let D=r.listen(b,o,a);if(!wh(o)){let O=i?G=>i(Be(G[t.index])):t.index;md(O,e,n,o,a,D,!1)}}return u}function wh(t){return t.startsWith("animation")||t.startsWith("transition")}function Ih(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[pn],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function md(t,e,n,i,r,o,s){let a=e.firstCreatePass?vs(e):null,l=gs(n),u=l.length;l.push(r,o),a&&a.push(i,t,u,(u+1)*(s?-1:1))}function jc(t,e,n,i,r,o){let s=e[n],a=e[k],u=a.data[n].outputs[i],v=s[u].subscribe(o);md(t.index,a,e,r,o,v,!0)}var Ws=Symbol("BINDING");var Qs=class extends eo{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=kt(e);return new mi(n,this.ngModule)}};function xh(t){return Object.keys(t).map(e=>{let[n,i,r]=t[e],o={propName:n,templateName:e,isSignal:(i&Wr.SignalBased)!==0};return r&&(o.transform=r),o})}function Th(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function Mh(t,e,n){let i=e instanceof Pe?e:e?.injector;return i&&t.getStandaloneInjector!==null&&(i=t.getStandaloneInjector(i)||i),i?new zs(n,i):n}function Sh(t){let e=t.get(Qt,null);if(e===null)throw new H(407,!1);let n=t.get(cd,null),i=t.get(Ye,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function Ah(t,e){let n=hd(t);return Mu(e,n,n==="svg"?ds:n==="math"?Wl:null)}function hd(t){return(t.selectors[0][0]||"div").toLowerCase()}var mi=class extends Xr{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=xh(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Th(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=Qp(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,i,r,o,s){K(22);let a=P(null);try{let l=this.componentDef,u=Nh(i,l,s,o),f=Mh(l,r||this.ngModule,e),v=Sh(f),b=v.rendererFactory.createRenderer(null,l),D=i?xm(b,i,l.encapsulation,f):Ah(l,b),O=s?.some(Hc)||o?.some(le=>typeof le!="function"&&le.bindings.some(Hc)),G=ya(null,u,null,512|Ru(l),null,null,v,b,f,null,_u(D,f,!0));G[ve]=D,hr(G);let ae=null;try{let le=dd(ve,G,2,"#host",()=>u.directiveRegistry,!0,0);Nu(b,D,le),Cn(D,G),Gu(u,G,le),bu(u,le,G),fd(u,le),n!==void 0&&kh(le,this.ngContentSelectors,n),ae=Je(le.index,G),G[oe]=ae[oe],Sa(u,G,null)}catch(le){throw ae!==null&&Os(ae),Os(G),le}finally{K(23),gr()}return new Or(this.componentType,G,!!O)}finally{P(a)}}};function Nh(t,e,n,i){let r=t?["ng-version","20.3.12"]:Yp(e.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[Ws].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(i)for(let f=0;f<i.length;f++){let v=i[f];if(typeof v!="function")for(let b of v.bindings){a+=b[Ws].requiredVars;let D=f+1;b.create&&(b.targetIdx=D,(o??=[]).push(b)),b.update&&(b.targetIdx=D,(s??=[]).push(b))}}let l=[e];if(i)for(let f of i){let v=typeof f=="function"?f:f.type,b=rs(v);l.push(b)}return va(0,null,Rh(o,s),1,a,l,null,null,null,[r],null)}function Rh(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let i of t)i.create();if(n&2&&e)for(let i of e)i.update()}}function Hc(t){let e=t[Ws].kind;return e==="input"||e==="twoWay"}var Or=class extends ld{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=ti(n[k],ve),this.location=wn(this._tNode,n),this.instance=Je(this._tNode.index,n)[oe],this.hostView=this.changeDetectorRef=new _n(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let r=this._rootLView,o=Ma(i,r[k],r,e,n);this.previousInputValues.set(e,n);let s=Je(i.index,r);Aa(s,1)}get injector(){return new zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function kh(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null&&o.length?Array.from(o):null)}}var Ei=(()=>{class t{static __NG_ELEMENT_ID__=Ph}return t})();function Ph(){let t=Re();return vd(t,U())}var Fh=Ei,gd=class extends Fh{_lContainer;_hostTNode;_hostLView;constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return wn(this._hostTNode,this._hostLView)}get injector(){return new zt(this._hostTNode,this._hostLView)}get parentInjector(){let e=da(this._hostTNode,this._hostLView);if(eu(e)){let n=Sr(e,this._hostLView),i=Mr(e),r=n[k].data[i+8];return new zt(r,n)}else return new zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Uc(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ie}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Gs(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,di(this._hostTNode,s)),a}createComponent(e,n,i,r,o,s,a){let l=e&&!rp(e),u;if(l)u=n;else{let ae=n||{};u=ae.index,i=ae.injector,r=ae.projectableNodes,o=ae.environmentInjector||ae.ngModuleRef,s=ae.directives,a=ae.bindings}let f=l?e:new mi(kt(e)),v=i||this.parentInjector;if(!o&&f.ngModule==null){let le=(l?v:this.parentInjector).get(Pe,null);le&&(o=le)}let b=kt(f.componentType??{}),D=Gs(this._lContainer,b?.id??null),O=D?.firstChild??null,G=f.create(v,r,O,o,s,a);return this.insertImpl(G.hostView,u,di(this._hostTNode,D)),G}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Yl(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[fe],u=new gd(l,l[Le],l[fe]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Kr(s,r,o,i),e.attachToViewContainerRef(),ts(Ns(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Uc(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=pi(this._lContainer,n);i&&(Yn(Ns(this._lContainer),n),Qr(i[k],i))}detach(e){let n=this._adjustIndex(e,-1),i=pi(this._lContainer,n);return i&&Yn(Ns(this._lContainer),n)!=null?new _n(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function Uc(t){return t[ei]}function Ns(t){return t[ei]||(t[ei]=[])}function vd(t,e){let n,i=e[t.index];return Ue(i)?n=i:(n=id(i,e,null,t),e[t.index]=n,Ea(e,n)),Lh(n,e,t,i),new gd(n,t,e)}function Oh(t,e){let n=t[te],i=n.createComment(""),r=$e(e,t),o=n.parentNode(r);return kr(n,o,i,n.nextSibling(r),!1),i}var Lh=jh,Vh=()=>!1;function Bh(t,e,n){return Vh(t,e,n)}function jh(t,e,n,i){if(t[vt])return;let r;n.type&8?r=Be(i):r=Oh(e,n),t[vt]=r}var Ys=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Zs=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)Pa(e,n).matches!==null&&this.queries[n].setDirty()}},Ks=class{flags;read;predicate;constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=zh(e):this.predicate=e}},Js=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Xs=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,Hh(n,o)),this.matchTNodeWithReadOption(e,n,wr(n,e,o,!1,!1))}else i===Dn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,wr(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===In||r===Ei||r===Dn&&n.type&4)this.addMatch(n.index,-2);else{let o=wr(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function Hh(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function Uh(t,e){return t.type&11?wn(t,e):t.type&4?Na(t,e):null}function $h(t,e,n,i){return n===-1?Uh(e,t):n===-2?Gh(t,e,i):Ar(t,t[k],n,e)}function Gh(t,e,n){if(n===In)return wn(e,t);if(n===Dn)return Na(e,t);if(n===Ei)return vd(e,t)}function yd(t,e,n,i){let r=e[Ke].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push($h(e,f,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function ea(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=yd(t,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=e[-l];for(let v=ie;v<f.length;v++){let b=f[v];b[gt]===b[fe]&&ea(b[k],b,u,i)}if(f[Lt]!==null){let v=f[Lt];for(let b=0;b<v.length;b++){let D=v[b];ea(D[k],D,u,i)}}}}}return i}function ka(t,e){return t[Ke].queries[e].queryList}function qh(t,e,n){let i=new Nr((n&4)===4);return Jl(t,e,i,i.destroy),(e[Ke]??=new Zs).queries.push(new Ys(i))-1}function Ed(t,e,n){let i=Ce();return i.firstCreatePass&&(Wh(i,new Ks(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),qh(i,U(),e)}function zh(t){return t.split(",").map(e=>e.trim())}function Wh(t,e,n){t.queries===null&&(t.queries=new Js),t.queries.track(new Xs(e,n))}function Pa(t,e){return t.queries.getByIndex(e)}function Cd(t,e){let n=t[k],i=Pa(n,e);return i.crossesNgTemplate?ea(n,t,e,[]):yd(n,t,i,e)}function _d(t,e,n){let i,r=Hn(()=>{i._dirtyCounter();let o=Yh(i,t);if(e&&o===void 0)throw new H(-951,!1);return o});return i=r[ge],i._dirtyCounter=w(0),i._flatValue=void 0,r}function Dd(t){return _d(!0,!1,t)}function bd(t){return _d(!0,!0,t)}function Qh(t,e){let n=t[ge];n._lView=U(),n._queryIndex=e,n._queryList=ka(n._lView,e),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function Yh(t,e){let n=t._lView,i=t._queryIndex;if(n===void 0||i===void 0||n[F]&4)return e?void 0:De;let r=ka(n,i),o=Cd(n,i);return r.reset(o,uu),e?r.first:r._changesDetected||t._flatValue===void 0?t._flatValue=r.toArray():t._flatValue}var Lr=class{};var hi=class extends Lr{injector;componentFactoryResolver=new Qs(this);instance=null;constructor(e){super();let n=new St([...e.providers,{provide:Lr,useValue:this},{provide:eo,useValue:this.componentFactoryResolver}],e.parent||Jn(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function wd(t,e,n=null){return new hi({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Zh=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=os(!1,n.type),r=i.length>0?wd([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ee({token:t,providedIn:"environment",factory:()=>new t(z(Pe))})}return t})();function se(t){return ua(()=>{let e=eg(t),n=A(S({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===fa.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(Zh).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ut.Emulated,styles:t.styles||De,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Zt("NgStandalone"),tg(n);let i=t.dependencies;return n.directiveDefs=$c(i,Kh),n.pipeDefs=$c(i,jl),n.id=ng(n),n})}function Kh(t){return kt(t)||rs(t)}function to(t){return ua(()=>({type:t.type,bootstrap:t.bootstrap||De,declarations:t.declarations||De,imports:t.imports||De,exports:t.exports||De,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Jh(t,e){if(t==null)return Nt;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Wr.None,l=null),n[o]=[i,a,l],e[o]=s}return n}function Xh(t){if(t==null)return Nt;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function eg(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Nt,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||De,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Jh(t.inputs,e),outputs:Xh(t.outputs),debugInfo:null}}function tg(t){t.features?.forEach(e=>e(t))}function $c(t,e){return t?()=>{let n=typeof t=="function"?t():t,i=[];for(let r of n){let o=e(r);o!==null&&i.push(o)}return i}:null}function ng(t){let e=0,n=typeof t.consts=="function"?"":t.consts,i=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of i.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function ig(t,e,n,i,r,o,s,a){if(n.firstCreatePass){t.mergedAttrs=Ur(t.mergedAttrs,t.attrs);let f=t.tView=va(2,t,r,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),gn(t,!1);let l=rg(n,e,t,i);yr()&&Ia(n,e,l,t),Cn(l,e);let u=id(l,e,l,t);e[i+ve]=u,Ea(e,u),Bh(u,t,e)}function Vr(t,e,n,i,r,o,s,a,l,u,f){let v=n+ve,b;if(e.firstCreatePass){if(b=Jr(e,v,4,s||null,a||null),u!=null){let D=Xe(e.consts,u);b.localNames=[];for(let O=0;O<D.length;O+=2)b.localNames.push(D[O],-1)}}else b=e.data[v];return ig(b,t,e,n,i,r,o,l),u!=null&&Ta(t,b,f),b}var rg=og;function og(t,e,n,i){return Er(!0),e[te].createComment("")}var Fa=new $("");function Oa(t){return!!t&&typeof t.then=="function"}function Id(t){return!!t&&typeof t.subscribe=="function"}var xd=new $("");var La=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=N(xd,{optional:!0})??[];injector=N(ot);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=sr(this.injector,r);if(Oa(o))n.push(o);else if(Id(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Td=new $("");function Md(){To(()=>{let t="";throw new H(600,t)})}function Sd(t){return t.isBoundToModule}var sg=10;var Ci=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=N(Ct);afterRenderManager=N(Vu);zonelessEnabled=N(oi);rootEffectScheduler=N(si);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ft;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=N(Gt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Lo(n=>!n))}constructor(){N(yi,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=N(Pe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=ot.NULL){return this._injector.get(me).run(()=>{K(10);let s=n instanceof Xr;if(!this._injector.get(La).done){let O="";throw new H(405,O)}let l;s?l=n:l=this._injector.get(eo).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let u=Sd(l)?void 0:this._injector.get(Lr),f=i||l.selector,v=l.create(r,[],f,u),b=v.location.nativeElement,D=v.injector.get(Fa,null);return D?.registerApplication(b),v.onDestroy(()=>{this.detachView(v.hostView),li(this.components,v),D?.unregisterApplication(b)}),this._loadComponent(v),K(11,v),v})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){K(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(_a.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new H(101,!1);let n=P(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,P(n),this.afterTick.next(),K(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qt,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<sg;)K(14),this.synchronizeOnce(),K(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!ni(r))continue;let o=i&&!this.zonelessEnabled?0:1;Xu(r,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ni(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;li(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(Td,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>li(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new H(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function li(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function no(t,e,n,i){let r=U(),o=yt();if(We(r,o,e)){let s=Ce(),a=vr();Om(a,r,t,e,n,i)}return no}var fD=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var ta=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function Rs(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function ag(t,e,n){let i,r,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let u=t.at(o),f=e[o],v=Rs(o,u,o,f,n);if(v!==0){v<0&&t.updateValue(o,f),o++;continue}let b=t.at(s),D=e[l],O=Rs(s,b,l,D,n);if(O!==0){O<0&&t.updateValue(s,D),s--,l--;continue}let G=n(o,u),ae=n(s,b),le=n(o,f);if(Object.is(le,ae)){let Bn=n(l,D);Object.is(Bn,G)?(t.swap(o,s),t.updateValue(s,D),l--,s--):t.move(s,o),t.updateValue(o,f),o++;continue}if(i??=new Br,r??=qc(t,o,s,n),na(t,i,o,le))t.updateValue(o,f),o++,s++;else if(r.has(le))i.set(G,t.detach(o)),s--;else{let Bn=t.create(o,e[o]);t.attach(o,Bn),o++,s++}}for(;o<=l;)Gc(t,i,n,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let f=t.at(o),v=u.value,b=Rs(o,f,o,v,n);if(b!==0)b<0&&t.updateValue(o,v),o++,u=l.next();else{i??=new Br,r??=qc(t,o,s,n);let D=n(o,v);if(na(t,i,o,D))t.updateValue(o,v),o++,s++,u=l.next();else if(!r.has(D))t.attach(o,t.create(o,v)),o++,s++,u=l.next();else{let O=n(o,f);i.set(O,t.detach(o)),s--}}}for(;!u.done;)Gc(t,i,n,t.length,u.value),u=l.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function na(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function Gc(t,e,n,i,r){if(na(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function qc(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var Br=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function x(t,e,n,i,r,o,s,a){Zt("NgControlFlow");let l=U(),u=Ce(),f=Xe(u.consts,o);return Vr(l,u,t,e,n,i,r,f,256,s,a),Va}function Va(t,e,n,i,r,o,s,a){Zt("NgControlFlow");let l=U(),u=Ce(),f=Xe(u.consts,o);return Vr(l,u,t,e,n,i,r,f,512,s,a),Va}function T(t,e){Zt("NgControlFlow");let n=U(),i=yt(),r=n[i]!==be?n[i]:-1,o=r!==-1?jr(n,ve+r):void 0,s=0;if(We(n,i,t)){let a=P(null);try{if(o!==void 0&&od(o,s),t!==-1){let l=ve+t,u=jr(n,l),f=sa(n[k],l),v=ad(u,f,n),b=Zr(n,f,e,{dehydratedView:v});Kr(u,b,s,di(f,v))}}finally{P(a)}}else if(o!==void 0){let a=rd(o,s);a!==void 0&&(a[oe]=e)}}var ia=class{lContainer;$implicit;$index;constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-ie}};function ye(t){return t}function _i(t,e){return e}var ra=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function W(t,e,n,i,r,o,s,a,l,u,f,v,b){Zt("NgControlFlow");let D=U(),O=Ce(),G=l!==void 0,ae=U(),le=a?s.bind(ae[Ve][oe]):s,Bn=new ra(G,le);ae[ve+t]=Bn,Vr(D,O,t+1,e,n,i,r,Xe(O.consts,o),256),G&&Vr(D,O,t+2,l,u,f,v,Xe(O.consts,b),512)}var oa=class extends ta{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-ie}at(e){return this.getLView(e)[oe].$implicit}attach(e,n){let i=n[fn];this.needsIndexUpdate||=e!==this.length,Kr(this.lContainer,n,e,di(this.templateTNode,i)),lg(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,cg(this.lContainer,e),ug(this.lContainer,e)}create(e,n){let i=Gs(this.lContainer,this.templateTNode.tView.ssrId),r=Zr(this.hostLView,this.templateTNode,new ia(this.lContainer,n,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Qr(e[k],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[oe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[oe].$index=e}getLView(e){return dg(this.lContainer,e)}};function Q(t){let e=P(null),n=et();try{let i=U(),r=i[k],o=i[n],s=n+1,a=jr(i,s);if(o.liveCollection===void 0){let u=sa(r,s);o.liveCollection=new oa(a,i,u)}else o.liveCollection.reset();let l=o.liveCollection;if(ag(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=yt(),f=l.length===0;if(We(i,u,f)){let v=n+2,b=jr(i,v);if(f){let D=sa(r,v),O=ad(b,D,i),G=Zr(i,D,void 0,{dehydratedView:O});Kr(b,G,0,di(D,O))}else r.firstUpdatePass&&sh(b),od(b,0)}}}finally{P(e)}}function jr(t,e){return t[e]}function lg(t,e){if(t.length<=ie)return;let n=ie+e,i=t[n],r=i?i[Ot]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[st];um(o,r),Wt.delete(i),r.detachedLeaveAnimationFns=void 0}}function cg(t,e){if(t.length<=ie)return;let n=ie+e,i=t[n],r=i?i[Ot]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function ug(t,e){return pi(t,e)}function dg(t,e){return rd(t,e)}function sa(t,e){return ti(t,e)}function L(t,e,n){let i=U(),r=yt();if(We(i,r,e)){let o=Ce(),s=vr();Am(s,i,t,e,i[te],n)}return L}function aa(t,e,n,i,r){Ma(e,t,n,r?"class":"style",i)}function y(t,e,n,i){let r=U(),o=r[k],s=t+ve,a=o.firstCreatePass?dd(s,r,2,e,Fm,tc(),n,i):o.data[s];if(zu(a,r,t,e,Ad),cr(a)){let l=r[k];Gu(l,r,a),bu(l,a,r)}return i!=null&&Ta(r,a),y}function E(){let t=Ce(),e=Re(),n=Wu(e);return t.firstCreatePass&&fd(t,n),Es(n)&&Cs(),ys(),n.classesWithoutHost!=null&&fp(n)&&aa(t,n,U(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&pp(n)&&aa(t,n,U(),n.stylesWithoutHost,!1),E}function ce(t,e,n,i){return y(t,e,n,i),E(),ce}function h(t,e,n,i){let r=U(),o=r[k],s=t+ve,a=o.firstCreatePass?Ch(s,o,2,e,n,i):o.data[s];return zu(a,r,t,e,Ad),i!=null&&Ta(r,a),h}function p(){let t=Re(),e=Wu(t);return Es(e)&&Cs(),ys(),p}function J(t,e,n,i){return h(t,e,n,i),p(),J}var Ad=(t,e,n,i,r)=>(Er(!0),Mu(e[te],i,gc()));function V(){return U()}function R(t,e,n){let i=U(),r=yt();if(We(i,r,e)){let o=Ce(),s=vr();qu(s,i,t,e,i[te],n)}return R}var Di="en-US";var fg=Di;function Nd(t){typeof t=="string"&&(fg=t.toLowerCase().replace(/_/g,"-"))}function I(t,e,n){let i=U(),r=Ce(),o=Re();return pg(r,i,i[te],o,t,e,n),I}function M(t,e,n){let i=U(),r=Ce(),o=Re();return(o.type&3||n)&&pd(o,r,i,n,i[te],t,e,xr(o,i,e)),M}function pg(t,e,n,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=xr(i,e,o),pd(i,t,e,s,n,r,o,l)&&(a=!1)),a){let u=i.outputs?.[r],f=i.hostDirectiveOutputs?.[r];if(f&&f.length)for(let v=0;v<f.length;v+=2){let b=f[v],D=f[v+1];l??=xr(i,e,o),jc(i,e,b,D,r,l)}if(u&&u.length)for(let v of u)l??=xr(i,e,o),jc(i,e,v,r,r,l)}}function g(t=1){return hc(t)}function Ba(t,e,n){Ed(t,e,n)}function ja(t){let e=U(),n=Ce(),i=mr();ii(i+1);let r=Pa(n,i);if(t.dirty&&Ql(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=Cd(e,i);t.reset(o,uu),t.notifyOnChanges()}return!0}return!1}function Ha(){return ka(U(),mr())}function pe(t,e,n,i){Qh(t,Ed(e,n,i))}function ke(t=1){ii(mr()+t)}function _r(t,e){return t<<17|e<<2}function Yt(t){return t>>17&32767}function mg(t){return(t&2)==2}function hg(t,e){return t&131071|e<<17}function la(t){return t|2}function bn(t){return(t&131068)>>2}function ks(t,e){return t&-131069|e<<2}function gg(t){return(t&1)===1}function ca(t){return t|1}function vg(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Yt(s),l=bn(s);t[i]=n;let u=!1,f;if(Array.isArray(n)){let v=n;f=v[1],(f===null||dn(v,f)>0)&&(u=!0)}else f=n;if(r)if(l!==0){let b=Yt(t[a+1]);t[i+1]=_r(b,a),b!==0&&(t[b+1]=ks(t[b+1],i)),t[a+1]=hg(t[a+1],i)}else t[i+1]=_r(a,0),a!==0&&(t[a+1]=ks(t[a+1],i)),a=i;else t[i+1]=_r(l,0),a===0?a=i:t[l+1]=ks(t[l+1],i),l=i;u&&(t[i+1]=la(t[i+1])),zc(t,f,i,!0),zc(t,f,i,!1),yg(e,f,t,i,o),s=_r(a,l),o?e.classBindings=s:e.styleBindings=s}function yg(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&dn(o,e)>=0&&(n[i+1]=ca(n[i+1]))}function zc(t,e,n,i){let r=t[n+1],o=e===null,s=i?Yt(r):bn(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],u=t[s+1];Eg(l,e)&&(a=!0,t[s+1]=i?ca(u):la(u)),s=i?Yt(u):bn(u)}a&&(t[n+1]=i?la(r):ca(r))}function Eg(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?dn(t,e)>=0:!1}var ze={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Cg(t){return t.substring(ze.key,ze.keyEnd)}function _g(t){return Dg(t),Rd(t,kd(t,0,ze.textEnd))}function Rd(t,e){let n=ze.textEnd;return n===e?-1:(e=ze.keyEnd=bg(t,ze.key=e,n),kd(t,e,n))}function Dg(t){ze.key=0,ze.keyEnd=0,ze.value=0,ze.valueEnd=0,ze.textEnd=t.length}function kd(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function bg(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function we(t,e,n){return Pd(t,e,n,!1),we}function Z(t,e){return Pd(t,e,null,!0),Z}function m(t){Ig(Ng,wg,t,!0)}function wg(t,e){for(let n=_g(e);n>=0;n=Rd(e,n))rr(t,Cg(e),!0)}function Pd(t,e,n,i){let r=U(),o=Ce(),s=fr(2);if(o.firstUpdatePass&&Od(o,t,s,i),e!==be&&We(r,s,e)){let a=o.data[et()];Ld(o,a,r,r[te],t,r[s+1]=kg(e,n),i,s)}}function Ig(t,e,n,i){let r=Ce(),o=fr(2);r.firstUpdatePass&&Od(r,null,o,i);let s=U();if(n!==be&&We(s,o,n)){let a=r.data[et()];if(Vd(a,i)&&!Fd(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Ji(l,n||"")),aa(r,a,s,n,i)}else Rg(r,a,s,s[te],s[o+1],s[o+1]=Ag(t,e,n),i,o)}}function Fd(t,e){return e>=t.expandoStartIndex}function Od(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[et()],s=Fd(t,n);Vd(o,i)&&e===null&&!s&&(e=!1),e=xg(r,o,e,i),vg(r,o,e,n,s,i)}}function xg(t,e,n,i){let r=dc(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Ps(null,t,e,n,i),n=gi(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Ps(r,t,e,n,i),o===null){let l=Tg(t,e,i);l!==void 0&&Array.isArray(l)&&(l=Ps(null,t,e,l[1],i),l=gi(l,e.attrs,i),Mg(t,e,i,l))}else o=Sg(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function Tg(t,e,n){let i=n?e.classBindings:e.styleBindings;if(bn(i)!==0)return t[Yt(i)]}function Mg(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Yt(r)]=i}function Sg(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=gi(i,s,n)}return gi(i,e.attrs,n)}function Ps(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=gi(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function gi(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),rr(t,s,n?!0:e[++o]))}return t===void 0?null:t}function Ag(t,e,n){if(n==null||n==="")return De;let i=[],r=zr(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)t(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&t(i,o,r[o]);else typeof r=="string"&&e(i,r);return i}function Ng(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&rr(t,i,n)}function Rg(t,e,n,i,r,o,s,a){r===be&&(r=De);let l=0,u=0,f=0<r.length?r[0]:null,v=0<o.length?o[0]:null;for(;f!==null||v!==null;){let b=l<r.length?r[l+1]:void 0,D=u<o.length?o[u+1]:void 0,O=null,G;f===v?(l+=2,u+=2,b!==D&&(O=v,G=D)):v===null||f!==null&&f<v?(l+=2,O=f):(u+=2,O=v,G=D),O!==null&&Ld(t,e,n,i,O,G,s,a),f=l<r.length?r[l]:null,v=u<o.length?o[u]:null}}function Ld(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],f=gg(u)?Wc(l,e,n,r,bn(u),s):void 0;if(!Hr(f)){Hr(o)||mg(u)&&(o=Wc(l,null,n,r,a,s));let v=fs(et(),n);Im(i,s,v,r,o)}}function Wc(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let l=t[r],u=Array.isArray(l),f=u?l[1]:l,v=f===null,b=n[r+1];b===be&&(b=v?De:void 0);let D=v?or(b,i):f===i?b:void 0;if(u&&!Hr(D)&&(D=or(l,i)),Hr(D)&&(a=D,s))return a;let O=t[r+1];r=s?Yt(O):bn(O)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=or(l,i))}return a}function Hr(t){return t!==void 0}function kg(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=pt(zr(t)))),t}function Vd(t,e){return(t.flags&(e?8:16))!==0}function d(t,e=""){let n=U(),i=Ce(),r=t+ve,o=i.firstCreatePass?Jr(i,r,1,e,null):i.data[r],s=Pg(i,n,o,e,t);n[r]=s,yr()&&Ia(i,n,s,o),gn(o,!1)}var Pg=(t,e,n,i,r)=>(Er(!0),Zp(e[te],i));function Fg(t,e,n,i=""){return We(t,yt(),n)?e+ht(n)+i:be}function Og(t,e,n,i,r,o=""){let s=sc(),a=bh(t,s,n,r);return fr(2),a?e+ht(n)+i+ht(r)+o:be}function q(t){return j("",t),q}function j(t,e,n){let i=U(),r=Fg(i,t,e,n);return r!==be&&Bd(i,et(),r),j}function Tn(t,e,n,i,r){let o=U(),s=Og(o,t,e,n,i,r);return s!==be&&Bd(o,et(),s),Tn}function Bd(t,e,n){let i=fs(e,t);Kp(t[te],i,n)}function io(t){return We(U(),yt(),t)?ht(t):be}function _t(t,e,n){let i=oc()+t,r=U();return r[i]===be?_h(r,i,n?e.call(n):e()):Dh(r,i)}var Lg=(()=>{class t{zone=N(me);changeDetectionScheduler=N(Ye);applicationRef=N(Ci);applicationErrorHandler=N(Ct);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function jd({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new me(A(S({},Hd()),{scheduleInRootZone:n})),[{provide:me,useFactory:t},{provide:Rt,multi:!0,useFactory:()=>{let i=N(Lg,{optional:!0});return()=>i.initialize()}},{provide:Rt,multi:!0,useFactory:()=>{let i=N(Vg);return()=>{i.initialize()}}},e===!0?{provide:Ts,useValue:!0}:[],{provide:Cr,useValue:n??Fu},{provide:Ct,useFactory:()=>{let i=N(me),r=N(Pe),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(Fe),o.handleError(s))})}}}]}function Hd(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Vg=(()=>{class t{subscription=new _e;initialized=!1;zone=N(me);pendingTasks=N(Gt);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{me.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{me.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var Ua=(()=>{class t{applicationErrorHandler=N(Ct);appRef=N(Ci);taskService=N(Gt);ngZone=N(me);zonelessEnabled=N(oi);tracing=N(yi,{optional:!0});disableScheduling=N(Ts,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new _e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Pr):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(N(Cr,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ui||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let i=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Ac:Ou;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Pr+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ac(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $a(){return Zt("NgZoneless"),Zn([{provide:Ye,useExisting:Ua},{provide:me,useClass:ui},{provide:oi,useValue:!0},{provide:Cr,useValue:!1},[]])}function Bg(){return typeof $localize<"u"&&$localize.locale||Di}var Ga=new $("",{providedIn:"root",factory:()=>N(Ga,{optional:!0,skipSelf:!0})||Bg()});var ro=class{destroyed=!1;listeners=null;errorHandler=N(Fe,{optional:!0});destroyRef=N($t);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new H(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed){console.warn(Wn(953,!1));return}if(this.listeners===null)return;let n=P(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{P(n)}}};function X(t,e){return Hn(t,e?.equal)}var qa=class{[ge];constructor(e){this[ge]=e}destroy(){this[ge].destroy()}};function ue(t,e){let n=e?.injector??N(ot),i=e?.manualCleanup!==!0?n.get($t):null,r,o=n.get(ri,null,{optional:!0}),s=n.get(Ye);return o!==null?(r=Ug(o.view,s,t),i instanceof zn&&i._lView===o.view&&(i=null)):r=$g(t,n.get(si),s),r.injector=n,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new qa(r)}var Ud=A(S({},Ml),{cleanupFns:void 0,zone:null,onDestroyFn:qt,run(){let t=vn(!1);try{Sl(this)}finally{vn(t)}},cleanup(){if(!this.cleanupFns?.length)return;let t=P(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],P(t)}}}),jg=A(S({},Ud),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){wt(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),Hg=A(S({},Ud),{consumerMarkedDirty(){this.view[F]|=8192,Ht(this.view),this.notifier.notify(13)},destroy(){wt(this),this.onDestroyFn(),this.cleanup(),this.view[at]?.delete(this)}});function Ug(t,e,n){let i=Object.create(Hg);return i.view=t,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=e,i.fn=$d(i,n),t[at]??=new Set,t[at].add(i),i.consumerMarkedDirty(i),i}function $g(t,e,n){let i=Object.create(jg);return i.fn=$d(i,t),i.scheduler=e,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function $d(t,e){return()=>{e(n=>(t.cleanupFns??=[]).push(n))}}var zd=Symbol("InputSignalNode#UNSET"),e0=A(S({},Hi),{transformFn:void 0,applyValueToInputSignal(t,e){rn(t,e)}});function Wd(t,e){let n=Object.create(e0);n.value=t,n.transformFn=e?.transform;function i(){if(Xt(n),n.value===zd){let r=null;throw new H(-950,r)}return n.value}return i[ge]=n,i}var t0=new $("");t0.__NG_ELEMENT_ID__=t=>{let e=Re();if(e===null)throw new H(204,!1);if(e.type&2)return e.value;if(t&8)return null;throw new H(204,!1)};function xe(t){return new ro}function Gd(t,e){return Wd(t,e)}function n0(t){return Wd(zd,t)}var ne=(Gd.required=n0,Gd);function qd(t,e){return Dd(e)}function i0(t,e){return bd(e)}var he=(qd.required=i0,qd);var za=new $(""),r0=new $("");function bi(t){return!t.moduleRef}function o0(t){let e=bi(t)?t.r3Injector:t.moduleRef.injector,n=e.get(me);return n.run(()=>{bi(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let i=e.get(Ct),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),bi(t)){let o=()=>e.destroy(),s=t.platformInjector.get(za);s.add(o),e.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(za);s.add(o),t.moduleRef.onDestroy(()=>{li(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(o)})}return a0(i,n,()=>{let o=e.get(Gt),s=o.add(),a=e.get(La);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Ga,Di);if(Nd(l||Di),!e.get(r0,!0))return bi(t)?e.get(Ci):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(bi(t)){let f=e.get(Ci);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return s0?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var s0;function a0(t,e,n){try{let i=n();return Oa(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t(i)),i}}var oo=null;function l0(t=[],e){return ot.create({name:e,providers:[{provide:Kn,useValue:"platform"},{provide:za,useValue:new Set([()=>oo=null])},...t]})}function c0(t=[]){if(oo)return oo;let e=l0(t);return oo=e,Md(),u0(e),e}function u0(t){let e=t.get(Gr,null);sr(t,()=>{e?.forEach(n=>n())})}function Qd(t){let{rootComponent:e,appProviders:n,platformProviders:i,platformRef:r}=t;K(8);try{let o=r?.injector??c0(i),s=[jd({}),{provide:Ye,useExisting:Ua},Ec,...n||[]],a=new hi({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return o0({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{K(9)}}var Yd=null;function Ii(){return Yd}function Wa(t){Yd??=t}var wi=class{};var de=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=to({type:t});static \u0275inj=Qn({})}return t})();function Qa(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}var xi=class{};var Zd="browser";var Ti=class{_doc;constructor(e){this._doc=e}manager},so=(()=>{class t extends Ti{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,o){return n.addEventListener(i,r,o),()=>this.removeEventListener(n,i,r,o)}removeEventListener(n,i,r,o){return n.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||t)(z(Ge))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),lo=new $(""),Xa=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(s=>{s.manager=this});let r=n.filter(s=>!(s instanceof so));this._plugins=r.slice().reverse();let o=n.find(s=>s instanceof so);o&&this._plugins.push(o)}addEventListener(n,i,r,o){return this._findPluginFor(i).addEventListener(n,i,r,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new H(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||t)(z(lo),z(me))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Ya="ng-app-id";function Kd(t){for(let e of t)e.remove()}function Jd(t,e){let n=e.createElement("style");return n.textContent=t,n}function f0(t,e,n,i){let r=t.head?.querySelectorAll(`style[${Ya}="${e}"],link[${Ya}="${e}"]`);if(r)for(let o of r)o.removeAttribute(Ya),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Ka(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var el=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,f0(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,Jd);i?.forEach(r=>this.addUsage(r,this.external,Ka))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let o=i.get(n);o?o.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(Kd(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Kd(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,Jd(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,Ka(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),n.appendChild(i)}static \u0275fac=function(i){return new(i||t)(z(Ge),z($r),z(qr,8),z(vi))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Za={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},tl=/%COMP%/g;var ef="%COMP%",p0=`_nghost-${ef}`,m0=`_ngcontent-${ef}`,h0=!0,g0=new $("",{providedIn:"root",factory:()=>h0});function v0(t){return m0.replace(tl,t)}function y0(t){return p0.replace(tl,t)}function tf(t,e){return e.map(n=>n.replace(tl,t))}var nl=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,r,o,s,a,l=null,u=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new Mi(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof ao?r.applyToHost(n):r instanceof Si&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,v=this.platformIsServer,b=this.tracingService;switch(i.encapsulation){case ut.Emulated:o=new ao(l,u,i,this.appId,f,s,a,v,b);break;case ut.ShadowDom:return new Ja(l,u,n,i,s,a,this.nonce,v,b);default:o=new Si(l,u,i,f,s,a,v,b);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||t)(z(Xa),z(el),z($r),z(g0),z(Ge),z(me),z(qr),z(yi,8))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),Mi=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,i,r,o){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(Za[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Xd(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Xd(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){n.remove()}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new H(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=Za[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Za[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(dt.DashCase|dt.Important)?e.style.setProperty(n,i,r&dt.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&dt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i,r){if(typeof e=="string"&&(e=Ii().getGlobalEventTarget(this.doc,e),!e))throw new H(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,r)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Xd(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ja=class extends Mi{sharedStylesHost;hostEl;shadowRoot;constructor(e,n,i,r,o,s,a,l,u){super(e,o,s,l,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=tf(r.id,f);for(let b of f){let D=document.createElement("style");a&&D.setAttribute("nonce",a),D.textContent=b,this.shadowRoot.appendChild(D)}let v=r.getExternalStyles?.();if(v)for(let b of v){let D=Ka(b,o);a&&D.setAttribute("nonce",a),this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Si=class extends Mi{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,i,r,o,s,a,l,u){super(e,o,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?tf(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Wt.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ao=class extends Si{contentAttr;hostAttr;constructor(e,n,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(e,n,i,o,s,a,l,u,f),this.contentAttr=v0(f),this.hostAttr=y0(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}};var co=class t extends wi{supportsDOMEvents=!0;static makeCurrent(){Wa(new t)}onAndCancel(e,n,i,r){return e.addEventListener(n,i,r),()=>{e.removeEventListener(n,i,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=E0();return n==null?null:C0(n)}resetBaseElement(){Ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qa(document.cookie,e)}},Ai=null;function E0(){return Ai=Ai||document.head.querySelector("base"),Ai?Ai.getAttribute("href"):null}function C0(t){return new URL(t,document.baseURI).pathname}var _0=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||t)};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})(),nf=["alt","control","meta","shift"],D0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},b0={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rf=(()=>{class t extends Ti{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,i,r,o){let s=t.parseEventName(i),a=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ii().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=t._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),nf.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=D0[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),nf.forEach(s=>{if(s!==r){let a=b0[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{t.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||t)(z(Ge))};static \u0275prov=ee({token:t,factory:t.\u0275fac})}return t})();function il(t,e,n){let i=S({rootComponent:t,platformRef:n?.platformRef},w0(e));return Qd(i)}function w0(t){return{appProviders:[...S0,...t?.providers??[]],platformProviders:M0}}function I0(){co.makeCurrent()}function x0(){return new Fe}function T0(){return pa(document),document}var M0=[{provide:vi,useValue:Zd},{provide:Gr,useValue:I0,multi:!0},{provide:Ge,useFactory:T0}];var S0=[{provide:Kn,useValue:"root"},{provide:Fe,useFactory:x0},{provide:lo,useClass:so,multi:!0,deps:[Ge]},{provide:lo,useClass:rf,multi:!0,deps:[Ge]},nl,el,Xa,{provide:Qt,useExisting:nl},{provide:xi,useClass:_0},[]];function A0(t,e){if(t&1){let n=V();h(0,"div",8)(1,"input",16),M("input",function(r){let o=C(n).$index,s=g();return _(s.onEqBandChange(o,r))}),p(),h(2,"span",17),d(3),p()()}if(t&2){let n=e.$implicit,i=g();c(),we("--thumb-bg","var(--color-"+i.theme().primary+"-400)")("--track-bg","var(--color-"+i.theme().primary+"-950)")("--thumb-border","var(--color-"+i.theme().primary+"-900)"),R("value",n.value),c(2),q(n.label)}}var Mn=class Mn{constructor(){this.eqSettings=ne.required();this.enhancements=ne.required();this.theme=ne.required();this.close=xe();this.eqChange=xe();this.enhancementsChange=xe()}onEqBandChange(e,n){let i=parseInt(n.target.value,10),r=this.eqSettings().map((o,s)=>s===e?A(S({},o),{value:i}):o);this.eqChange.emit(r)}onEnhancementToggle(e,n){let i=n.target.checked,r=A(S({},this.enhancements()),{[e]:i});this.enhancementsChange.emit(r)}onClose(){this.close.emit()}};Mn.\u0275fac=function(n){return new(n||Mn)},Mn.\u0275cmp=se({type:Mn,selectors:[["app-eq-panel"]],inputs:{eqSettings:[1,"eqSettings"],enhancements:[1,"enhancements"],theme:[1,"theme"]},outputs:{close:"close",eqChange:"eqChange",enhancementsChange:"enhancementsChange"},decls:37,vars:16,consts:[[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-4","w-auto","max-w-md","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"mb-4"],[1,"text-sm","mb-2"],[1,"flex","justify-around","items-end","h-48","bg-black/50","p-4"],[1,"flex","flex-col","items-center"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","bg-black/50","cursor-pointer"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-9","h-5","border","flex","items-center","justify-center","text-xs","peer-checked:text-black"],[1,"peer-checked:hidden"],[1,"hidden","peer-checked:inline"],["type","range","min","0","max","100",1,"slider","vertical-slider",3,"input","value"],[1,"text-xs","text-green-400/60","mt-2"]],template:function(n,i){n&1&&(h(0,"div",0),M("click",function(){return i.onClose()}),p(),h(1,"div",1)(2,"div",2)(3,"h2",3),d(4,"[[ Equalizer & Enhancements ]]"),p(),h(5,"button",4),M("click",function(){return i.onClose()}),d(6," [X] "),p()(),h(7,"div",5)(8,"h3",6),d(9,"// Graphic EQ"),p(),h(10,"div",7),W(11,A0,4,8,"div",8,ye),p()(),h(13,"div")(14,"h3",6),d(15,"// Enhancements"),p(),h(16,"div",9)(17,"label",10)(18,"span"),d(19,"Bass Boost"),p(),h(20,"div",11)(21,"input",12),M("change",function(o){return i.onEnhancementToggle("bassBoost",o)}),p(),h(22,"div",13)(23,"span",14),d(24,"[\xA0\xA0]"),p(),h(25,"span",15),d(26,"[X]"),p()()()(),h(27,"label",10)(28,"span"),d(29,"Surround Sound (UI Only)"),p(),h(30,"div",11)(31,"input",12),M("change",function(o){return i.onEnhancementToggle("surroundSound",o)}),p(),h(32,"div",13)(33,"span",14),d(34,"[\xA0\xA0]"),p(),h(35,"span",15),d(36,"[X]"),p()()()()()()()),n&2&&(c(),m("text-"+i.theme().primary+"-400"),c(4),m("hover:bg-"+i.theme().primary+"-400"),c(5),m("border border-"+i.theme().primary+"-400/30"),c(),Q(i.eqSettings()),c(6),m("border border-"+i.theme().primary+"-400/30"),c(4),R("checked",i.enhancements().bassBoost),c(),m("peer-checked:bg-"+i.theme().primary+"-400"),c(5),m("border border-"+i.theme().primary+"-400/30"),c(4),R("checked",i.enhancements().surroundSound),c(),m("peer-checked:bg-"+i.theme().primary+"-400"))},dependencies:[de],styles:["input[type=range].vertical-slider[_ngcontent-%COMP%]{writing-mode:bt-lr;-webkit-appearance:slider-vertical;width:8px;height:120px;padding:0 5px;background-color:transparent}input[type=range].vertical-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:var(--track-bg);width:4px;border-radius:0}input[type=range].vertical-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:8px;background:var(--thumb-bg);cursor:pointer;border:1px solid var(--thumb-border)}input[type=range].vertical-slider[_ngcontent-%COMP%]::-moz-range-track{background:var(--track-bg);width:4px;border-radius:0}input[type=range].vertical-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:8px;background:var(--thumb-bg);cursor:pointer;border:1px solid var(--thumb-border);border-radius:0}"]});var uo=Mn;var N0=["matrixCanvas"],Sn=class Sn{constructor(){this.canvasRef=he.required("matrixCanvas");this.FRAME_RATE_INTERVAL=250}ngAfterViewInit(){let e=this.canvasRef().nativeElement,n=e.getContext("2d");if(!n){console.error("Could not get 2D context");return}this.ctx=n,e.width=window.innerWidth,e.height=window.innerHeight;let i="SmuveJeffPresents",r=16,o=e.width/r,s=[];for(let u=0;u<o;u++)s[u]=1;let a=0,l=u=>{if(u-a>this.FRAME_RATE_INTERVAL){this.ctx.fillStyle="rgba(0, 0, 0, 0.05)",this.ctx.fillRect(0,0,e.width,e.height),this.ctx.fillStyle="#0F0",this.ctx.font=r+"px monospace";for(let f=0;f<s.length;f++){let v=i.charAt(Math.floor(Math.random()*i.length));this.ctx.fillText(v,f*r,s[f]*r),s[f]*r>e.height&&Math.random()>.975&&(s[f]=0),s[f]++}a=u}this.animationFrameId=requestAnimationFrame(l)};this.animationFrameId=requestAnimationFrame(l)}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}};Sn.\u0275fac=function(n){return new(n||Sn)},Sn.\u0275cmp=se({type:Sn,selectors:[["app-matrix-background"]],viewQuery:function(n,i){n&1&&pe(i.canvasRef,N0,5),n&2&&ke()},decls:2,vars:0,consts:[["matrixCanvas",""],[1,"absolute","top-0","left-0","w-full","h-full"]],template:function(n,i){n&1&&J(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:0}"]});var fo=Sn;var Kt=class Kt{constructor(){this._apiKey=N(rl);this._genAI=w(void 0);this._chatInstance=w(void 0);this._isAiAvailable=X(()=>!!this._genAI());this.initializeGenAI()}get genAI(){return this._genAI()}get chatInstance(){return this._chatInstance()}get isAiAvailable(){return this._isAiAvailable()}getApiKey(){return this._apiKey}async initializeGenAI(){if(!this._apiKey||this._apiKey.length<30){console.error("AiService: AI features disabled. Invalid or missing API key injected via token."),this._genAI.set(void 0),this._chatInstance.set(void 0);return}try{let e=await import("./chunk-GUGQRGJ7.js"),n=new e.GoogleGenAI({apiKey:this._apiKey});this._genAI.set(n);let i=n.chats.create({model:"gemini-3-pro-preview",config:{systemInstruction:`You are S.M.U.V.E, an expert AI music manager toolkit. You specialize in genres such as Southern Rap, Hip-Hop, R&B, and Trap music, and possess advanced management and marketing skills. Provide concise, helpful, and culturally relevant responses tailored for independent music artists.

You can manage music, generate images/videos, analyze content, and search the web for up-to-date information.

Use COMMAND:::ACTION:::PARAMETER_KEY='value' format for app commands (e.g., COMMAND:::SET_THEME:::theme='blue'). Available commands:
- SET_THEME: Apply a visual theme (e.g., theme='blue').
- PLAY_TRACK: Play a track (e.g., title='My Song').
- PAUSE_TRACK: Pause current track.
- STOP_TRACK: Stop current track.
- LOAD_TRACK: (Requires more parameters like URL or search query, use cautiously).
- NEXT_TRACK: Play next track in playlist.
- PREVIOUS_TRACK: Play previous track in playlist.
- TOGGLE_LOOP: Toggle loop for current track.
- GENERATE_IMAGE: Create an image (e.g., prompt='album cover concept').
- GENERATE_VIDEO: Create a video (e.g., prompt='music video visualizer').
- ANALYZE_IMAGE: Describe an image (e.g., imageUrl='base64data').
- FIND_ON_MAP: Search for a location (e.g., query='recording studios in Atlanta').
- FIND_ARTISTS: Search for collaborators (e.g., location='Nashville', filter='producer').
- VIEW_ARTIST_PROFILE: Display an artist's detailed profile (e.g., name='BeatMaster Flex', genre='Hip-Hop', location='Atlanta').
- START_DRUM: Start the drum machine playback.
- STOP_DRUM: Stop the drum machine playback.
- SET_BPM: Set the drum machine BPM (e.g., bpm='140').
- CLEAR_BEAT: Clear the current drum pattern.
- GENERATE_BEAT: Generate a drum pattern. The pattern parameter should be a JSON string where keys are track names (kick, snare, hihat, clap, tom, crash, perc, 808) and values are arrays of step indices (0-15). Example: pattern='{"kick": [0, 4, 8, 12], "snare": [4, 12], "hihat": [0, 2, 4, 6, 8, 10, 12, 14]}'.
- TOGGLE_TRACK_MUTE: Mute/Unmute a drum track (e.g., track='kick').
- TOGGLE_TRACK_SOLO: Solo/Unsolo a drum track (e.g., track='snare').

When VIEW_ARTIST_PROFILE is used, expect a command containing an artist's name (and optional genre/location for disambiguation). Query your knowledge base (and implicitly, the MOCK_ARTISTS data provided in the app context) to provide an adaptive, detailed insight into their profile. This should include:
- Strengths (musicality, production, stage presence, lyrical ability etc.)
- Specific collaboration potential (e.g., "collaborate with a Memphis trap producer for a new single," "feature on an T_R&B singer's track").
- Career advice (e.g., "focus on building a strong presence on TikTok," "consider licensing your beats for video games").
- Marketing insights (e.g., "target college radio stations in the Southeast," "run Instagram ad campaigns geotargeted to your city").

If you need to search for up-to-date info, use the googleSearch tool. Adapt insights based on their genre, location, influences, and collaboration interests. Your responses should be direct and highly actionable, reflecting deep expertise in these specific music genres and industry practices.`}});this._chatInstance.set(i),console.log("AiService: GoogleGenAI client initialized and chat instance created.")}catch(e){console.error("AiService: Error initializing GoogleGenAI client:",e),this._genAI.set(void 0),this._chatInstance.set(void 0)}}};Kt.\u0275fac=function(n){return new(n||Kt)},Kt.\u0275prov=ee({token:Kt,factory:Kt.\u0275fac});var Me=Kt,of=()=>Zn([{provide:Me,useClass:Me}]);var R0=(t,e)=>e.id,k0=(t,e)=>e.url;function P0(t,e){if(t&1&&(h(0,"div",2),d(1),p()),t&2){let n=g();c(),j(" ",n.errorMessage()," ")}}function F0(t,e){t&1&&(h(0,"div",3),d(1," AI services are disabled. Networking search features might be limited. "),p())}function O0(t,e){t&1&&(h(0,"span"),d(1,"[ SEARCHING... ]"),p())}function L0(t,e){t&1&&(h(0,"span"),d(1,"[ FIND ARTISTS ]"),p())}function V0(t,e){if(t&1){let n=V();h(0,"div",31),M("click",function(){let r=C(n).$implicit,o=g();return _(o.viewArtistDetail(r))}),J(1,"img",32),h(2,"div",33)(3,"h4",34),d(4),p(),h(5,"p",35),d(6),p(),h(7,"p",36),d(8),p(),h(9,"p",36),d(10),p()(),Ut(),h(11,"svg",37),J(12,"path",38),p()()}if(t&2){let n=e.$implicit,i=g();m("hover:bg-"+i.theme().blue+"-800/70"),c(),m("border-"+i.theme().neutral+"-600"),R("alt",io(n.name))("src",n.imageUrl,re),c(2),m("text-"+i.theme().blue+"-300"),c(),q(n.name),c(),m("text-"+i.theme().neutral+"-400"),c(),Tn("",n.genre," - ",n.location),c(2),j("",n.bio.substring(0,70),"..."),c(),m("text-"+i.theme().blue+"-500"),c(),j("Interest: ",n.collaborationInterest.join(", ")),c(),m("text-"+i.theme().blue+"-400")}}function B0(t,e){if(t&1&&(h(0,"p",39),d(1,"No artists found. Adjust your search or clear filters."),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-500")}}function j0(t,e){if(t&1&&(h(0,"p",35)(1,"strong"),d(2,"Specialties:"),p(),d(3),p()),t&2){let n=g(2);m("text-"+n.theme().neutral+"-400"),c(3),j(" ",n.selectedArtistProfile().specialties.join(", "))}}function H0(t,e){if(t&1&&(h(0,"p",35)(1,"strong"),d(2,"Target Audience:"),p(),d(3),p()),t&2){let n=g(2);m("text-"+n.theme().neutral+"-400"),c(3),j(" ",n.selectedArtistProfile().targetAudience)}}function U0(t,e){if(t&1&&(h(0,"p",35)(1,"strong"),d(2,"Career Goals:"),p(),d(3),p()),t&2){let n=g(2);m("text-"+n.theme().neutral+"-400"),c(3),j(" ",n.selectedArtistProfile().careerGoals)}}function $0(t,e){if(t&1&&(h(0,"a",55),d(1),p()),t&2){let n=e.$implicit,i=g(2);m("hover:text-"+i.theme().blue+"-300"),R("href",n.url,re),c(),Tn(" ",n.type.toUpperCase(),": ",n.url," ")}}function G0(t,e){if(t&1&&(h(0,"p",54),d(1,"No links available."),p()),t&2){let n=g(2);m("text-"+n.theme().neutral+"-500")}}function q0(t,e){if(t&1){let n=V();h(0,"div",40),M("click",function(){C(n);let r=g();return _(r.closeArtistDetailModal())}),p(),h(1,"div",41)(2,"div",42)(3,"h2",34),d(4),p(),h(5,"button",43),M("click",function(){C(n);let r=g();return _(r.closeArtistDetailModal())}),d(6," [X] "),p()(),h(7,"div",44),J(8,"img",45),h(9,"div",46)(10,"p",35)(11,"strong"),d(12,"Genre:"),p(),d(13),p(),h(14,"p",35)(15,"strong"),d(16,"Location:"),p(),d(17),p(),h(18,"p",35)(19,"strong"),d(20,"Collaboration Interest:"),p(),d(21),p(),h(22,"p",35)(23,"strong"),d(24,"Influences:"),p(),d(25),p(),x(26,j0,4,3,"p",47),x(27,H0,4,3,"p",47),x(28,U0,4,3,"p",47),p()(),h(29,"div",48)(30,"p",49),d(31),p(),h(32,"h3",35),d(33,"// LINKS:"),p(),h(34,"div",50),W(35,$0,2,5,"a",51,k0,!1,G0,2,2,"p",52),p(),h(38,"h3",53),d(39,"// CONTACT:"),p(),h(40,"p",54),d(41),p()()()}if(t&2){let n=g();c(),m("text-"+n.theme().blue+"-400"),c(3),j("[[ ARTIST PROFILE: ",n.selectedArtistProfile().name," ]]"),c(),m("hover:bg-"+n.theme().blue+"-400"),c(3),m("border-"+n.theme().neutral+"-600"),R("alt",io(n.selectedArtistProfile().name))("src",n.selectedArtistProfile().imageUrl,re),c(2),m("text-"+n.theme().neutral+"-400"),c(3),Tn(" ",n.selectedArtistProfile().genre," (",n.selectedArtistProfile().genres.join(", "),")"),c(),m("text-"+n.theme().neutral+"-400"),c(3),j(" ",n.selectedArtistProfile().location),c(),m("text-"+n.theme().blue+"-500"),c(3),j(" ",n.selectedArtistProfile().collaborationInterest.join(", ")),c(),m("text-"+n.theme().neutral+"-500"),c(3),j(" ",n.selectedArtistProfile().influences.join(", ")),c(),T(n.selectedArtistProfile().specialties?26:-1),c(),T(n.selectedArtistProfile().targetAudience?27:-1),c(),T(n.selectedArtistProfile().careerGoals?28:-1),c(),m("border-"+n.theme().blue+"-500/30"),c(2),q(n.selectedArtistProfile().bio),c(),m("text-"+n.theme().blue+"-300"),c(3),Q(n.selectedArtistProfile().links),c(3),m("text-"+n.theme().blue+"-300"),c(2),m("text-"+n.theme().neutral+"-400"),c(),q(n.selectedArtistProfile().contact)}}var it=[{id:"flex101",name:"BeatMaster Flex",genre:"Hip-Hop Producer",location:"Brooklyn, NY",locationLatLon:{lat:40.6782,lon:-73.9442},bio:"Award-winning producer with a knack for soulful beats and hard-hitting drums. Always looking for fresh vocalists and lyricists to elevate tracks. Specializing in old-school boom-bap and modern trap sounds.",contact:"flexbeats@email.com",imageUrl:"https://picsum.photos/seed/flex/150/150",collaborationInterest:["Vocalist","Lyricist","Rapper","Mixing Engineer"],genres:["Hip-Hop","Boom-Bap","Trap","Southern Rap"],influences:["J Dilla","DJ Premier","Madlib","Metro Boomin"],links:[{type:"soundcloud",url:"https://soundcloud.com/beatmasterflex"}],specialties:["Sampling","Drum Programming","Arrangement"],targetAudience:"Underground Hip-Hop, Trap, and R&B fans",careerGoals:"Produce a platinum album, mentor new artists"},{id:"mae202",name:"Melody Mae",genre:"Indie Pop Vocalist",location:"Los Angeles, CA",locationLatLon:{lat:34.0522,lon:-118.2437},bio:"Ethereal vocals with a dreamy vibe. Seeking producers for new tracks and live musicians for touring. Inspired by nature and introspection.",contact:"melodymae@email.com",imageUrl:"https://picsum.photos/seed/mae/150/150",collaborationInterest:["Producer","Guitarist","Songwriter","Keyboardist"],genres:["Indie Pop","Dream Pop","Alternative","R&B"],influences:["Fiona Apple","Lana Del Rey","Mazzy Star","SZA"],links:[{type:"spotify",url:"https://open.spotify.com/artist/melodymae"},{type:"instagram",url:"https://instagram.com/melodymae"}],specialties:["Vocal Harmony","Lyric Writing","Live Performance"],targetAudience:"Indie Pop, Dream Pop, and soulful R&B listeners",careerGoals:"Release a critically acclaimed album, headline festivals"},{id:"sammy303",name:"Synthwave Sammy",genre:"Electronic / Synthwave",location:"Miami, FL",locationLatLon:{lat:25.7617,lon:-80.1918},bio:"Master of retro synths and driving basslines, creating nostalgic soundscapes. Open to scoring short films, collaborating with vocalists, or DJing events.",contact:"sammywave@email.com",imageUrl:"https://picsum.photos/seed/sammy/150/150",collaborationInterest:["Vocalist","Filmmaker","DJ","Sound Designer"],genres:["Synthwave","Electronic","Vaporwave"],influences:["Com Truise","Kavinsky","Daft Punk"],links:[{type:"soundcloud",url:"https://soundcloud.com/synthwavesammy"},{type:"website",url:"https://synthwavesammy.com"}]},{id:"jake404",name:"Jazz Fusion Jake",genre:"Jazz / Fusion Guitarist",location:"New Orleans, LA",locationLatLon:{lat:29.9511,lon:-90.0715},bio:"Complex harmonies and intricate solos define my style. Looking for drummers, bassists, and horn players for a new progressive jazz project.",contact:"jakejazz@email.com",imageUrl:"https://picsum.photos/seed/jake/150/150",collaborationInterest:["Drummer","Bassist","Saxophonist","Keyboardist"],genres:["Jazz Fusion","Progressive Jazz","Funk"],influences:["Pat Metheny","John Scofield","Frank Gambale"],links:[{type:"spotify",url:"https://open.spotify.com/artist/jazzfusionjake"}]},{id:"rina505",name:"Rhythm Queen Rina",genre:"Afrobeat Drummer",location:"London, UK",locationLatLon:{lat:51.5074,lon:.1278},bio:"High-energy percussionist bringing vibrant global rhythms to any track. Collaborations in world music, hip-hop, or pop welcome. Specializing in intricate polyrhythms.",contact:"rina.drums@email.com",imageUrl:"https://picsum.photos/seed/rina/150/150",collaborationInterest:["Producer","Bassist","Vocalist","Guitarist"],genres:["Afrobeat","World Music","Funk","Hip-Hop"],influences:["Tony Allen","Fela Kuti","Ginger Baker"],links:[{type:"instagram",url:"https://instagram.com/rhythmqueenrina"}]},{id:"keys606",name:"Electro Keys Eva",genre:"Electronic Keyboardist",location:"Berlin, DE",locationLatLon:{lat:52.52,lon:13.405},bio:"Versatile keyboardist exploring ambient, techno, and house. Seeking DJs, producers, and experimental vocalists for live and studio projects.",contact:"eva.keys@email.com",imageUrl:"https://picsum.photos/seed/eva/150/150",collaborationInterest:["Producer","DJ","Vocalist","Sound Designer"],genres:["Techno","House","Ambient","Electronic"],influences:["Kraftwerk","Aphex Twin","Four Tet"],links:[{type:"soundcloud",url:"https://soundcloud.com/electrokeys"}]},{id:"rhyme707",name:"Poetic Rhyme Rex",genre:"Spoken Word / Hip-Hop",location:"Chicago, IL",locationLatLon:{lat:41.8781,lon:-87.6298},bio:"Lyricist and spoken word artist with a powerful message. Collaborations with producers across genres, from jazz to trap.",contact:"rexrhymes@email.com",imageUrl:"https://picsum.photos/seed/rex/150/150",collaborationInterest:["Producer","Vocalist","Jazz Musician"],genres:["Spoken Word","Hip-Hop","Poetry","Trap"],influences:["Gil Scott-Heron","Kendrick Lamar","Saul Williams","J. Cole"],links:[{type:"instagram",url:"https://instagram.com/poeticrex"}],specialties:["Freestyle","Storytelling","Performance Art"],targetAudience:"Conscious Hip-Hop and Spoken Word enthusiasts",careerGoals:"Release a conceptual album, perform at major poetry slams"},{id:"south808",name:"Southern Siren Sia",genre:"R&B / Trap Soul Vocalist",location:"Atlanta, GA",locationLatLon:{lat:33.7488,lon:-84.3877},bio:"Sultry vocals blending R&B smoothness with trap grit. Collaborating with producers for new EPs and visual artists for music videos. Deeply inspired by Atlanta's vibrant music scene.",contact:"siasounds@email.com",imageUrl:"https://picsum.photos/seed/sia/150/150",collaborationInterest:["Producer","Beatmaker","Video Director","Songwriter"],genres:["R&B","Trap Soul","Neo-Soul","Southern Rap"],influences:["Summer Walker","SZA","Future","Jhen\xE9 Aiko"],links:[{type:"instagram",url:"https://instagram.com/southernsirensia"},{type:"spotify",url:"https://open.spotify.com/artist/southernsirensia"}],specialties:["Vocal production","Ad-libs","Melody creation"],targetAudience:"R&B and Trap music listeners, especially in the South",careerGoals:"Build a strong brand, perform at A3C, release a full-length album"},{id:"beatrix909",name:"Beatrix B",genre:"Trap Producer",location:"Houston, TX",locationLatLon:{lat:29.7604,lon:-95.3698},bio:"Hard-hitting trap beats with cinematic undertones. Always on the lookout for new vocalists, especially those in Southern Rap and R&B, for joint projects. Ready to drop bangers.",contact:"beatrixb@email.com",imageUrl:"https://picsum.photos/seed/beatrix/150/150",collaborationInterest:["Vocalist","Rapper","Mixing Engineer","Songwriter"],genres:["Trap","Southern Rap","Hip-Hop"],influences:["Zaytoven","Cardo","Tay Keith"],links:[{type:"soundcloud",url:"https://soundcloud.com/beatrixb"}],specialties:["Beatmaking","Sound Design","Mixing"],targetAudience:"Trap and Southern Hip-Hop fans",careerGoals:"Secure major placements, build a production team"},{id:"soulful1010",name:"Soulful Sam",genre:"Neo-Soul / R&B Producer",location:"New Orleans, LA",locationLatLon:{lat:29.9511,lon:-90.0715},bio:"Crafting lush, soulful soundscapes with a modern twist. Seeking R&B and Neo-Soul vocalists, instrumentalists (especially horns and strings), for studio and live collaborations.",contact:"soulfulsam@email.com",imageUrl:"https://picsum.photos/seed/sam/150/150",collaborationInterest:["Vocalist","Instrumentalist","Songwriter","Mixing Engineer"],genres:["Neo-Soul","R&B","Jazz","Funk"],influences:["D'Angelo","Erykah Badu","Robert Glasper"],links:[{type:"spotify",url:"https://open.spotify.com/artist/soulfulsam"}],specialties:["Arrangement","Keys","Live instrumentation recording"],targetAudience:"Neo-Soul, R&B, and Jazz fusion listeners",careerGoals:"Release collaborative EPs, perform at jazz/soul festivals"}],An=class An{constructor(){this.theme=ne.required();this.initialSearchQuery=ne(null);this.searchLocation=w("");this.collaborationFilter=w("");this.displayedArtists=w([]);this.isLoading=w(!1);this.errorMessage=w(null);this.selectedArtistProfile=w(null);this.showArtistDetailModal=w(!1);this.aiService=N(Me);this.isAiAvailable=X(()=>this.aiService.isAiAvailable);this.artistProfileSelected=xe();ue(()=>{let e=this.initialSearchQuery();e&&e!==this.searchLocation()&&(this.searchLocation.set(e),this.searchArtists())}),this.displayedArtists.set(it),ue(()=>{this.selectedArtistProfile()?this.showArtistDetailModal.set(!0):this.showArtistDetailModal.set(!1)})}onSearchLocationInput(e){this.searchLocation.set(e.target.value)}onCollaborationFilterInput(e){this.collaborationFilter.set(e.target.value)}async searchArtists(){let e=this.searchLocation().trim(),n=this.collaborationFilter().trim();if(this.isLoading.set(!0),this.errorMessage.set(null),this.displayedArtists.set([]),!this.aiService.isAiAvailable){console.warn("AI services unavailable for networking search enhancement. Falling back to basic filter.");let i=it.filter(r=>{let o=!e||r.location.toLowerCase().includes(e.toLowerCase()),s=!n||r.collaborationInterest.some(a=>a.toLowerCase().includes(n.toLowerCase()));return o&&s});this.displayedArtists.set(i),i.length===0&&this.errorMessage.set("No artists found matching your criteria with basic filter."),this.isLoading.set(!1);return}try{let i=`You are an expert music industry scout specializing in Southern Rap, Hip-Hop, R&B, and Trap music genres, with advanced management and marketing skills. Given the following artists' profiles (as JSON array):

${JSON.stringify(it)}

Find artists who match the location "${e}" (if provided, prioritize this) and are interested in collaborations that include "${n}" (if provided, prioritize this). Consider their primary genre, influences, and bio for a holistic match. Provide the IDs of the top matching artists in a JSON array: {"matchingArtistIds": ["id1", "id2"]}. If no artists match, return an empty array.`,r=await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{matchingArtistIds:{type:"ARRAY",items:{type:"STRING"}}},propertyOrdering:["matchingArtistIds"]}}}),s=JSON.parse(r.text).matchingArtistIds||[],a=it.filter(l=>s.includes(l.id));this.displayedArtists.set(a),a.length===0&&this.errorMessage.set("AI found no artists matching your criteria. Try different terms.")}catch(i){console.error("AI failed to enhance networking search:",i),this.errorMessage.set("AI search enhancement failed. Falling back to basic filter.");let r=it.filter(o=>{let s=!e||o.location.toLowerCase().includes(e.toLowerCase()),a=!n||o.collaborationInterest.some(l=>l.toLowerCase().includes(n.toLowerCase()));return s&&a});this.displayedArtists.set(r),r.length===0&&this.errorMessage.set("No artists found matching your criteria with basic filter.")}finally{this.isLoading.set(!1)}}clearSearch(){this.searchLocation.set(""),this.collaborationFilter.set(""),this.displayedArtists.set(it),this.errorMessage.set(null)}viewArtistDetail(e){this.selectedArtistProfile.set(e),this.artistProfileSelected.emit(e)}closeArtistDetailModal(){this.selectedArtistProfile.set(null)}};An.\u0275fac=function(n){return new(n||An)},An.\u0275cmp=se({type:An,selectors:[["app-networking"]],inputs:{theme:[1,"theme"],initialSearchQuery:[1,"initialSearchQuery"]},outputs:{artistProfileSelected:"artistProfileSelected"},decls:55,vars:40,consts:[[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"bg-red-900/50","text-red-300","p-3","text-center","border","border-red-500","animate-fade-in"],[1,"bg-amber-900/50","text-amber-300","p-3","text-center","border","border-amber-500","animate-fade-in"],[1,"p-4","flex","flex-col","sm:flex-row","gap-4"],[1,"flex-grow","flex","flex-col","gap-2"],["for","location-search",1,"block","text-sm"],["id","location-search","type","text","placeholder","e.g., 'Los Angeles, CA' or 'London, UK'",1,"w-full","p-2","text-sm","focus:ring-500",3,"input","value","disabled"],["for","collaboration-filter",1,"block","text-sm"],["id","collaboration-filter",1,"w-full","p-2","text-sm","focus:ring-500",3,"change","value","disabled"],["value",""],["value","Vocalist"],["value","Producer"],["value","Lyricist"],["value","Guitarist"],["value","Drummer"],["value","Bassist"],["value","DJ"],["value","Songwriter"],["value","Filmmaker"],["value","Mixing Engineer"],["value","Keyboardist"],["value","Saxophonist"],["value","Sound Designer"],[1,"flex","gap-2","justify-center"],[1,"flex-grow","px-4","py-2","border-2","text-lg","max-w-sm",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg","max-w-sm",3,"click"],[1,"text-base","mt-4"],[1,"flex-grow","overflow-y-auto","pr-2","space-y-4","p-2"],[1,"flex","items-center","gap-4","p-4","cursor-pointer","transition-colors","duration-200",3,"class"],[1,"text-center","text-sm","p-4",3,"class"],[1,"flex","items-center","gap-4","p-4","cursor-pointer","transition-colors","duration-200",3,"click"],[1,"w-20","h-20","object-cover","border",3,"src","alt"],[1,"flex-grow"],[1,"text-lg"],[1,"text-sm"],[1,"text-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"text-center","text-sm","p-4"],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-lg","flex","flex-col","z-50","animate-slide-up","font-mono","max-h-[90vh]","overflow-hidden"],[1,"flex","justify-between","items-center","mb-4"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"flex","flex-col","sm:flex-row","gap-4","mb-4","flex-shrink-0"],[1,"w-32","h-32","object-cover","border","flex-shrink-0",3,"src","alt"],[1,"flex-grow","space-y-1"],[1,"text-sm",3,"class"],[1,"flex-grow","overflow-y-auto","pr-2","text-sm","border-t","pt-4"],[1,"mb-4"],[1,"space-y-1"],["target","_blank","rel","noopener noreferrer",1,"block","text-xs","underline",3,"href","class"],[1,"text-xs",3,"class"],[1,"text-sm","mt-4"],[1,"text-xs"],["target","_blank","rel","noopener noreferrer",1,"block","text-xs","underline",3,"href"]],template:function(n,i){n&1&&(h(0,"div",0)(1,"h2",1),d(2,"[ AURA NETWORKING HUB ]"),p(),x(3,P0,2,1,"div",2),x(4,F0,2,0,"div",3),h(5,"div",4)(6,"div",5)(7,"label",6),d(8,"SEARCH LOCATION:"),p(),h(9,"input",7),M("input",function(o){return i.onSearchLocationInput(o)}),p()(),h(10,"div",5)(11,"label",8),d(12,"COLLABORATION INTEREST:"),p(),h(13,"select",9),M("change",function(o){return i.onCollaborationFilterInput(o)}),h(14,"option",10),d(15,"Any"),p(),h(16,"option",11),d(17,"Vocalist"),p(),h(18,"option",12),d(19,"Producer"),p(),h(20,"option",13),d(21,"Lyricist"),p(),h(22,"option",14),d(23,"Guitarist"),p(),h(24,"option",15),d(25,"Drummer"),p(),h(26,"option",16),d(27,"Bassist"),p(),h(28,"option",17),d(29,"DJ"),p(),h(30,"option",18),d(31,"Songwriter"),p(),h(32,"option",19),d(33,"Filmmaker"),p(),h(34,"option",20),d(35,"Mixing Engineer"),p(),h(36,"option",21),d(37,"Keyboardist"),p(),h(38,"option",22),d(39,"Saxophonist"),p(),h(40,"option",23),d(41,"Sound Designer"),p()()()(),h(42,"div",24)(43,"button",25),M("click",function(){return i.searchArtists()}),x(44,O0,2,0,"span")(45,L0,2,0,"span"),p(),h(46,"button",26),M("click",function(){return i.clearSearch()}),d(47," [ CLEAR ] "),p()(),h(48,"h3",27),d(49,"// COLLABORATORS FOUND:"),p(),h(50,"div",28),W(51,V0,13,20,"div",29,R0,!1,B0,2,2,"p",30),p()(),x(54,q0,42,37)),n&2&&(m("border border-"+i.theme().blue+"-500/30"),c(),m("text-"+i.theme().blue+"-400"),c(2),T(i.errorMessage()?3:-1),c(),T(i.isAiAvailable()?-1:4),c(),m("border border-"+i.theme().blue+"-500/20"),c(2),m("text-"+i.theme().blue+"-300"),c(2),m("focus:border-"+i.theme().blue+"-500"),R("value",i.searchLocation())("disabled",i.isLoading()),c(2),m("text-"+i.theme().blue+"-300"),c(2),m("focus:border-"+i.theme().blue+"-500"),R("value",i.collaborationFilter())("disabled",i.isLoading()),c(30),m("hover:text-black"),R("disabled",i.isLoading()),c(),T(i.isLoading()?44:45),c(2),m("hover:text-black"),c(2),m("text-"+i.theme().blue+"-300"),c(2),m("border border-"+i.theme().blue+"-500/20"),we("--chat-history-track-bg","var(--color-"+i.theme().blue+"-950)")("--chat-history-thumb-bg","var(--color-"+i.theme().blue+"-400)")("--chat-history-thumb-border","var(--color-"+i.theme().blue+"-900)")("--chat-history-thumb-hover-bg","var(--color-"+i.theme().blue+"-300)"),c(),Q(i.displayedArtists()),c(3),T(i.selectedArtistProfile()&&i.showArtistDetailModal()?54:-1))},dependencies:[de],styles:["[_nghost-%COMP%]{display:contents}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--chat-history-track-bg)}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--chat-history-thumb-bg);border:1px solid var(--chat-history-thumb-border)}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--chat-history-thumb-hover-bg)}"],changeDetection:0});var po=An;var z0=["chatHistory"],W0=(t,e)=>e.uri;function Q0(t,e){if(t&1&&(h(0,"a",26),d(1),p()),t&2){let n=e.$implicit,i=g(3);m("hover:text-"+i.theme().primary+"-300"),R("href",n.uri,re),c(),j(" ",n.title||n.uri," ")}}function Y0(t,e){if(t&1&&(h(0,"div",23)(1,"p",24),d(2,"Sources:"),p(),W(3,Q0,2,4,"a",25,W0),p()),t&2){let n=g().$implicit,i=g();m("border-"+i.theme().primary+"-500/30"),c(3),Q(n.urls)}}function Z0(t,e){if(t&1&&(h(0,"div",27),J(1,"img",28),h(2,"p",29),d(3,"Image analyzed:"),p()()),t&2){let n=g().$implicit,i=g();m("border-"+i.theme().primary+"-500/30"),c(),R("src",n.imageUrl,re),c(),m("text-"+i.theme().primary+"-500")}}function K0(t,e){if(t&1&&(h(0,"div")(1,"div",19)(2,"span",20),d(3),p(),h(4,"span"),d(5),p(),x(6,Y0,5,2,"div",21),x(7,Z0,4,5,"div",22),p()()),t&2){let n=e.$implicit,i=g();Z("text-right",n.role==="user")("text-left",n.role==="model"),c(),m(n.role==="user"?"bg-"+i.theme().primary+"-700/50":"bg-"+i.theme().primary+"-900/50"),c(),m("text-"+i.theme().primary+"-300"),c(),q(n.role==="user"?"YOU:":"S.M.U.V.E:"),c(2),q(n.content),c(),T(n.urls&&n.urls.length>0?6:-1),c(),T(n.imageUrl?7:-1)}}function J0(t,e){if(t&1&&(h(0,"div",8)(1,"div",19)(2,"span",20),d(3,"S.M.U.V.E:"),p(),h(4,"span"),d(5,"Thinking..."),p()()()),t&2){let n=g();c(),m("bg-"+n.theme().primary+"-900/50"),c(),m("text-"+n.theme().primary+"-300")}}function X0(t,e){if(t&1&&(h(0,"div",8)(1,"div",30)(2,"span",20),d(3,"S.M.U.V.E:"),p(),h(4,"span"),d(5,"Speaking..."),p()()()),t&2){let n=g();c(),m("bg-"+n.theme().primary+"-900/50"),c(),m("text-"+n.theme().primary+"-300")}}function ev(t,e){if(t&1&&(h(0,"div",31),d(1," Hi! I'm S.M.U.V.E. How can I help you with your music today? "),p()),t&2){let n=g();m("text-"+n.theme().primary+"-400/70")}}function tv(t,e){t&1&&(h(0,"div",10),d(1," AI features are currently disabled. Please check the API key configuration. "),p())}function nv(t,e){t&1&&(h(0,"span"),d(1,"[ DEEP QUERY ACTIVE (GEMINI 3 PRO) ]"),p())}function iv(t,e){t&1&&(h(0,"span"),d(1,"[ DEEP QUERY (GEMINI 3 PRO) ]"),p())}function rv(t,e){t&1&&(Ut(),h(0,"svg",15),J(1,"path",32)(2,"path",33),p())}function ov(t,e){t&1&&(Ut(),h(0,"svg",16),J(1,"path",32)(2,"path",34)(3,"path",35),p())}var Nn=class Nn{constructor(){this.close=xe();this.appCommand=xe();this.theme=ne.required();this.imageToAnalyzeUrl=ne(null);this.imageAnalysisResult=xe();this.mapLocationQuery=ne(null);this.mapLocationResult=xe();this.messages=w([]);this.userMessage=w("");this.isLoading=w(!1);this.isVoiceInputActive=w(!1);this.isSpeaking=w(!1);this.isDeepQueryActive=w(!1);this.aiService=N(Me);this.isAiAvailable=X(()=>this.aiService.isAiAvailable);this.chatHistoryRef=he("chatHistory");this.speechRecognition=null;this.speechUtterance=null;this.aiService.isAiAvailable||this.messages.update(e=>[...e,{role:"model",content:"AI services are currently unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."}]),"SpeechRecognition"in window||"webkitSpeechRecognition"in window?(this.speechRecognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.speechRecognition.continuous=!1,this.speechRecognition.interimResults=!1,this.speechRecognition.lang="en-US",this.speechRecognition.onresult=e=>{let n=e.results[0][0].transcript;this.userMessage.set(n),this.sendMessage(),this.stopVoiceInput()},this.speechRecognition.onerror=e=>{console.error("Speech recognition error:",e.error),e.error==="no-speech"||this.messages.update(n=>[...n,{role:"model",content:`Voice input error: ${e.error}. Please try again.`}]),this.stopVoiceInput()},this.speechRecognition.onend=()=>{this.isVoiceInputActive.set(!1)}):console.warn("Speech Recognition API not supported in this browser."),ue(()=>{let e=this.imageToAnalyzeUrl();e&&!this.isLoading()&&(this.messages.update(n=>[...n,{role:"user",content:"Please analyze this image.",imageUrl:e}]),this.analyzeImage(e,"Describe this image in detail. Focus on elements relevant for an album cover or music video concept."))}),ue(()=>{let e=this.mapLocationQuery();e&&!this.isLoading()&&(this.messages.update(n=>[...n,{role:"user",content:`Find on map: ${e}`}]),this.sendGoogleMapsQuery(e))})}async sendMessage(){if(!this.aiService.isAiAvailable||!this.aiService.chatInstance)return;let e=this.userMessage().trim();if(e){if(this.messages.update(n=>[...n,{role:"user",content:e}]),this.userMessage.set(""),this.isLoading.set(!0),this.stopSpeaking(),this.isDeepQueryActive())await this.sendDeepQuery(e),this.isDeepQueryActive.set(!1);else if(e.toLowerCase().startsWith("search google for")||e.toLowerCase().startsWith("google for")){let n=e.toLowerCase().startsWith("google for")?e.substring(10).trim():e.substring(17).trim();await this.sendGoogleSearchQuery(n)}else if(e.toLowerCase().startsWith("find on map")||e.toLowerCase().startsWith("map for")){let n=e.toLowerCase().startsWith("map for")?e.substring(7).trim():e.substring(11).trim();await this.sendGoogleMapsQuery(n)}else if(e.toLowerCase().startsWith("view artist profile")){let n=e.substring(19).trim();if(n){let i=it.find(r=>r.name.toLowerCase()===n.toLowerCase());if(i)await this.getArtistInsight(i),this.appCommand.emit({action:"VIEW_ARTIST_PROFILE",parameters:{name:n}});else{let r=`S.M.U.V.E doesn't have data for "${n}". Please try searching for artists first.`;this.messages.update(o=>[...o,{role:"model",content:r}]),this.speakResponse(r)}}else{let i="Please specify an artist name to view their profile.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}else try{let i=(await this.aiService.chatInstance.sendMessage({message:e})).text;if(typeof i!="string"||i.trim()===""){console.warn("Gemini API returned empty or non-string response:",i);let s="S.M.U.V.E received an empty response. Please try rephrasing.";this.messages.update(a=>[...a,{role:"model",content:s}]),this.speakResponse(s),this.isLoading.set(!1),this.scrollToBottom();return}let r=i.trim(),o=r.split(":::");if(o.length>=2&&o[0]==="CHAT"){let s=o.slice(1).join(":::");this.messages.update(a=>[...a,{role:"model",content:s}]),this.speakResponse(s)}else if(o.length>=2&&o[0]==="COMMAND"){let s=o[1].trim(),a=(o[2]||"").trim();try{let l={};if(a){let f=/(\w+)\s*=\s*'([^']*)'|(\w+)\s*=\s*(\d+)/g,v;for(;(v=f.exec(a))!==null;){let b=v[1]||v[3],D=v[2]!==void 0?v[2]:v[4];l[b]=D}}this.appCommand.emit({action:s,parameters:l});let u=`Executing command: ${s}`;this.messages.update(f=>[...f,{role:"model",content:u}]),this.speakResponse(u)}catch(l){console.error("Failed to parse command parameters:",l,"from string:",a);let u="S.M.U.V.E sent a command I couldn't understand. Please try again.";this.messages.update(f=>[...f,{role:"model",content:u}]),this.speakResponse(u)}}else console.warn("AI response did not match expected CHAT/COMMAND format:",r),this.messages.update(s=>[...s,{role:"model",content:r}]),this.speakResponse(r)}catch(n){console.error("Error sending message to Gemini API:",n);let i="Oops! Something went wrong. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}this.isLoading.set(!1),this.scrollToBottom()}}async sendGoogleSearchQuery(e){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let n=await this.aiService.genAI.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{tools:[{googleSearch:{}}]}}),i=n.text,r=n.candidates?.[0]?.groundingMetadata?.groundingChunks,o=[];if(r)for(let a of r)a.web&&a.web.uri&&o.push({uri:a.web.uri,title:a.web.title});let s={role:"model",content:i,urls:o.length>0?o:void 0};this.messages.update(a=>[...a,s]),this.speakResponse(i)}catch(n){console.error("Error sending Google Search query to Gemini API:",n);let i="Oops! Failed to perform Google Search. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async sendGoogleMapsQuery(e){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let n=await this.aiService.genAI.models.generateContent({model:"gemini-2.5-flash",contents:e,config:{tools:[{googleSearch:{}}]}}),i=n.text,r=n.candidates?.[0]?.groundingMetadata?.groundingChunks,o=[];if(r)for(let a of r)a.web&&a.web.uri&&o.push({uri:a.web.uri,title:a.web.title});let s={role:"model",content:i,urls:o.length>0?o:void 0};this.messages.update(a=>[...a,s]),this.speakResponse(i),this.mapLocationResult.emit(i)}catch(n){console.error("Error sending Google Maps query to Gemini API:",n);let i="Oops! Failed to find location on map. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async sendDeepQuery(e){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let i=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:e,config:{systemInstruction:this.aiService.chatInstance.config.systemInstruction,topK:64,topP:.95,temperature:1,seed:42}})).text;this.messages.update(r=>[...r,{role:"model",content:`[DEEP QUERY RESPONSE]: ${i}`}]),this.speakResponse(i)}catch(n){console.error("Error sending deep query to Gemini API:",n);let i="Oops! Deep query failed. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async analyzeImage(e,n="Describe this image in detail. Focus on elements relevant for an album cover or music video concept."){if(!this.aiService.isAiAvailable||!this.aiService.genAI){let i="AI services are unavailable to analyze image. Please check API key.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i);return}this.isLoading.set(!0);try{let i=e.split(";")[0].split(":")[1],r=e.split(",")[1],o={inlineData:{mimeType:i,data:r}},s={text:n},l=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:[o,s]})).text,u={role:"model",content:`IMAGE ANALYSIS: ${l}`,imageUrl:e};this.messages.update(f=>[...f,u]),this.speakResponse(`Image analysis complete. ${l}`),this.imageAnalysisResult.emit(l)}catch(i){console.error("Error analyzing image with Gemini API:",i);let r="Oops! Failed to analyze image. Please try again.";this.messages.update(o=>[...o,{role:"model",content:r}]),this.speakResponse(r)}finally{this.isLoading.set(!1),this.scrollToBottom()}}async getArtistInsight(e){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI)){this.isLoading.set(!0);try{let n=`You are S.M.U.V.E, an expert AI music manager toolkit specialized in Southern Rap, Hip-Hop, R&B, and Trap music, with advanced management and marketing skills. Provide an adaptive, detailed insight into the following independent music artist's profile. Your insights should be highly specific to their genre(s) and location, and offer actionable advice. Include:
      - Strengths (musicality, production, stage presence, lyrical ability etc.)
      - Specific collaboration potential (e.g., "collaborate with a Memphis trap producer for a new single," "feature on an Atlanta R&B singer's track").
      - Career advice (e.g., "focus on building a strong presence on TikTok," "consider licensing your beats for video games").
      - Marketing insights (e.g., "target college radio stations in the Southeast," "run Instagram ad campaigns geotargeted to your city").

Artist Profile:
Name: ${e.name}
Genre(s): ${e.genres.join(", ")}
Location: ${e.location}
Bio: ${e.bio}
Collaboration Interests: ${e.collaborationInterest.join(", ")}
Influences: ${e.influences.join(", ")}
Contact: ${e.contact}
Links: ${e.links.map(o=>`${o.type}: ${o.url}`).join(", ")}
Specialties: ${e.specialties?e.specialties.join(", "):"N/A"}
Target Audience: ${e.targetAudience||"N/A"}
Career Goals: ${e.careerGoals||"N/A"}

Provide insights relevant to their profile and the independent music scene, focusing on growth, networking, and strategic moves within their specified genres. Be specific to Southern Rap, Hip-Hop, R&B, and Trap where appropriate.`,r=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:n,config:{systemInstruction:this.aiService.chatInstance.config.systemInstruction,topK:64,topP:.95,temperature:1,seed:42}})).text;this.messages.update(o=>[...o,{role:"model",content:`[INSIGHT for ${e.name}]: ${r}`}]),this.speakResponse(`Here's an insight for ${e.name}. ${r}`)}catch(n){console.error("Error getting artist insight:",n);let i=`S.M.U.V.E failed to provide insight for ${e.name}.`;this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}finally{this.isLoading.set(!1),this.scrollToBottom()}}}toggleVoiceInput(){if(!this.speechRecognition){alert("Speech Recognition is not supported in this browser.");return}this.isVoiceInputActive()?this.stopVoiceInput():this.startVoiceInput()}startVoiceInput(){this.speechRecognition&&(this.stopSpeaking(),this.isVoiceInputActive.set(!0),this.speechRecognition.start(),this.messages.update(e=>[...e,{role:"model",content:"Listening for voice input..."}]))}stopVoiceInput(){this.speechRecognition&&(this.speechRecognition.stop(),this.isVoiceInputActive.set(!1))}speakResponse(e){"speechSynthesis"in window?(this.stopSpeaking(),this.speechUtterance=new SpeechSynthesisUtterance(e),this.speechUtterance.onstart=()=>this.isSpeaking.set(!0),this.speechUtterance.onend=()=>this.isSpeaking.set(!1),this.speechUtterance.onerror=n=>{console.error("Speech synthesis error:",n),this.isSpeaking.set(!1)},window.speechSynthesis.speak(this.speechUtterance)):console.warn("Speech Synthesis API not supported in this browser.")}stopSpeaking(){this.speechUtterance&&(window.speechSynthesis.cancel(),this.isSpeaking.set(!1))}scrollToBottom(){requestAnimationFrame(()=>{if(this.chatHistoryRef()){let e=this.chatHistoryRef().nativeElement;e.scrollTop=e.scrollHeight}})}toggleDeepQuery(){this.isDeepQueryActive.update(e=>!e),this.isDeepQueryActive()?(this.messages.update(e=>[...e,{role:"model",content:"Deep Query mode activated. I will use Gemini 3 Pro for more complex reasoning. Please ask your question."}]),this.speakResponse("Deep Query mode activated. Please ask your question.")):(this.messages.update(e=>[...e,{role:"model",content:"Deep Query mode deactivated."}]),this.speakResponse("Deep Query mode deactivated."))}onClose(){this.stopVoiceInput(),this.stopSpeaking(),this.close.emit()}};Nn.\u0275fac=function(n){return new(n||Nn)},Nn.\u0275cmp=se({type:Nn,selectors:[["app-chatbot"]],viewQuery:function(n,i){n&1&&pe(i.chatHistoryRef,z0,5),n&2&&ke()},inputs:{theme:[1,"theme"],imageToAnalyzeUrl:[1,"imageToAnalyzeUrl"],mapLocationQuery:[1,"mapLocationQuery"]},outputs:{close:"close",appCommand:"appCommand",imageAnalysisResult:"imageAnalysisResult",mapLocationResult:"mapLocationResult"},decls:26,vars:41,consts:[["chatHistory",""],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:right-4","sm:bottom-4","border-2","bg-black/90","backdrop-blur-lg","p-4","w-full","max-w-sm","h-[70vh]","flex","flex-col","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"flex-grow","overflow-y-auto","pr-2","mb-4","border-b","pb-2","space-y-3","chat-history"],[3,"text-right","text-left"],[1,"text-left"],[1,"text-center","py-4",3,"class"],[1,"text-center","py-4","text-red-400"],[1,"flex","gap-2","mb-2"],["type","button",1,"flex-grow","p-2","border","hover:text-black","text-sm","transition-colors",3,"click","disabled"],[1,"flex","gap-2",3,"submit"],["type","button",1,"p-2","border","hover:text-black","text-sm","transition-colors","flex","items-center","justify-center","w-10","h-10",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5"],["type","text","placeholder","Type your message...",1,"flex-grow","bg-black","border","px-2","py-1","text-sm","focus:ring-500",3,"input","value","disabled"],["type","submit",1,"p-2","border","hover:text-black","text-sm",3,"disabled"],[1,"inline-block","p-2","rounded-lg","max-w-[85%]"],[1,"text-xs","mr-2"],[1,"text-xs","mt-2","border-t","pt-1",3,"class"],[1,"mt-2","p-1","border",3,"class"],[1,"text-xs","mt-2","border-t","pt-1"],[1,"font-bold"],["target","_blank","rel","noopener noreferrer",1,"block","underline",3,"href","class"],["target","_blank","rel","noopener noreferrer",1,"block","underline",3,"href"],[1,"mt-2","p-1","border"],["alt","Image for analysis",1,"max-w-full","h-auto","object-contain",3,"src"],[1,"text-xs","mt-1"],[1,"inline-block","p-2","rounded-lg","max-w-[85%]","animate-pulse"],[1,"text-center","py-4"],["d","M8.25 4.5a3.75 3.75 0 1 1 7.5 0v8.25a3.75 3.75 0 1 1-7.5 0V4.5Z"],["d","M6 10.5a.75.75 0 0 1 .75.75v1.5a5.25 5.25 0 1 0 10.5 0v-1.5a.75.75 0 0 1 1.5 0v1.5a6.75 6.75 0 1 1-13.5 0v-1.5a.75.75 0 0 1 .75-.75Z"],["d","M12 21a2.25 2.25 0 0 0 2.25-2.25V15a.75.75 0 0 0-1.5 0v3.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75V15a.75.75 0 0 0-1.5 0v3.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75V15a.75.75 0 0 0-1.5 0v3.75A2.25 2.25 0 0 0 12 21Z"],["d","M18.75 10.5a.75.75 0 0 0-1.5 0v1.5a6.75 6.75 0 0 1-13.5 0v-1.5a.75.75 0 0 0-1.5 0v1.5a8.25 8.25 0 1 0 16.5 0v-1.5A.75.75 0 0 0 18.75 10.5Z"]],template:function(n,i){if(n&1){let r=V();h(0,"div",1),M("click",function(){return C(r),_(i.onClose())}),p(),h(1,"div",2)(2,"div",3)(3,"h2",4),d(4,"[[ S.M.U.V.E ]]"),p(),h(5,"button",5),M("click",function(){return C(r),_(i.onClose())}),d(6," [X] "),p()(),h(7,"div",6,0),W(9,K0,8,12,"div",7,ye),x(11,J0,6,4,"div",8)(12,X0,6,4,"div",8),x(13,ev,2,2,"div",9)(14,tv,2,0,"div",10),p(),h(15,"div",11)(16,"button",12),M("click",function(){return C(r),_(i.toggleDeepQuery())}),x(17,nv,2,0,"span")(18,iv,2,0,"span"),p()(),h(19,"form",13),M("submit",function(){return C(r),_(i.sendMessage())}),h(20,"button",14),M("click",function(){return C(r),_(i.toggleVoiceInput())}),x(21,rv,3,0,":svg:svg",15)(22,ov,4,0,":svg:svg",16),p(),h(23,"input",17),M("input",function(s){return C(r),_(i.userMessage.set(s.target.value))}),p(),h(24,"button",18),d(25," [ SEND ] "),p()()()}n&2&&(c(),m("text-"+i.theme().primary+"-400"),c(4),m("hover:bg-"+i.theme().primary+"-400"),c(2),m("border-"+i.theme().primary+"-400/30"),we("--chat-history-track-bg","var(--color-"+i.theme().primary+"-950)")("--chat-history-thumb-bg","var(--color-"+i.theme().primary+"-400)")("--chat-history-thumb-border","var(--color-"+i.theme().primary+"-900)")("--chat-history-thumb-hover-bg","var(--color-"+i.theme().primary+"-300)"),c(2),Q(i.messages()),c(2),T(i.isLoading()?11:i.isSpeaking()?12:-1),c(2),T(i.messages().length===0&&!i.isLoading()&&!i.isSpeaking()&&i.isAiAvailable()?13:i.isAiAvailable()?-1:14),c(3),m("hover:bg-"+i.theme().primary+"-400"),Z("bg-green-500",i.isDeepQueryActive())("text-black",i.isDeepQueryActive()),R("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()),c(),T(i.isDeepQueryActive()?17:18),c(2),Z("opacity-50",!i.isAiAvailable()),c(),m("hover:bg-"+i.theme().primary+"-400"),Z("bg-green-500",i.isVoiceInputActive())("text-black",i.isVoiceInputActive()),R("disabled",i.isLoading()||i.isDeepQueryActive()||!i.isAiAvailable()),c(),T(i.isVoiceInputActive()?21:22),c(2),m("focus:border-"+i.theme().primary+"-500"),R("value",i.userMessage())("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()),c(),m("hover:bg-"+i.theme().primary+"-400"),R("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()))},dependencies:[de],styles:[".chat-history[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--chat-history-track-bg)}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--chat-history-thumb-bg);border:1px solid var(--chat-history-thumb-border)}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--chat-history-thumb-hover-bg)}"],changeDetection:0});var mo=Nn;var sv=["fileInput"],av=()=>["1:1","4:3","3:4","16:9","9:16"];function lv(t,e){if(t&1&&J(0,"img",7),t&2){let n=g();R("src",n.originalImageUrl(),re)}}function cv(t,e){if(t&1&&(h(0,"span",23),d(1,"[ Upload an image for reference or leave empty ]"),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-500")}}function uv(t,e){if(t&1){let n=V();h(0,"button",24),M("click",function(){let r=C(n).$implicit,o=g();return _(o.aspectRatio.set(r))}),d(1),p()}if(t&2){let n=e.$implicit,i=g();m(i.aspectRatio()===n?"bg-"+i.theme().purple+"-500 text-black":"hover:bg-"+i.theme().purple+"-700/50"),R("disabled",i.isLoading()||!i.isAiAvailable()),c(),j(" ",n," ")}}function dv(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),p())}function fv(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATE ]"),p())}function pv(t,e){if(t&1&&(h(0,"p",19),d(1),p()),t&2){let n=g();c(),q(n.errorMessage())}}function mv(t,e){t&1&&(h(0,"p",19),d(1,"AI features are disabled due to an invalid API key."),p())}function hv(t,e){if(t&1&&J(0,"img",25),t&2){let n=e.$implicit;R("src",n,re)}}function gv(t,e){if(t&1&&W(0,hv,1,1,"img",25,ye),t&2){let n=g();Q(n.generatedImageUrls())}}function vv(t,e){if(t&1&&(h(0,"span",26),d(1,"[ Generating image... ]"),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-500")}}function yv(t,e){if(t&1&&(h(0,"span",23),d(1,"[ No image generated yet ]"),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-500")}}function Ev(t,e){if(t&1){let n=V();h(0,"button",27),M("click",function(){C(n);let r=g();return _(r.useAsAlbumArt())}),d(1," [ USE AS ALBUM ART ] "),p()}if(t&2){let n=g();m("hover:bg-"+n.theme().purple+"-500"),R("disabled",!n.isAiAvailable())}}function Cv(t,e){if(t&1){let n=V();h(0,"button",27),M("click",function(){C(n);let r=g();return _(r.requestImageAnalysis())}),d(1," [ ANALYZE IMAGE ] "),p()}if(t&2){let n=g();m("hover:bg-"+n.theme().purple+"-500"),R("disabled",!n.isAiAvailable())}}function _v(t,e){if(t&1&&(h(0,"a",28),d(1," [ DOWNLOAD ] "),p()),t&2){let n=g();m("hover:bg-"+n.theme().purple+"-500"),Z("opacity-50",!n.isAiAvailable()),R("href",n.generatedImageUrls()[0],re),no("disabled",n.isAiAvailable()?null:!0)}}var Rn=class Rn{constructor(){this.initialPrompt=ne(null);this.theme=ne.required();this.originalImageUrl=w(null);this.editPrompt=w("");this.generatedImageUrls=w([]);this.isLoading=w(!1);this.errorMessage=w(null);this.aspectRatio=w("1:1");this.aiService=N(Me);this.isAiAvailable=X(()=>this.aiService.isAiAvailable);this.fileInputRef=he("fileInput");this.imageSelected=xe();this.imageAnalysisRequest=xe();this.genAI=void 0;this.aiService.isAiAvailable?this.genAI=this.aiService.genAI:this.errorMessage.set("AI features are unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."),ue(()=>{let e=this.initialPrompt();e&&e!==this.editPrompt()&&this.editPrompt.set(e)})}handleImageUpload(e){let n=e.target.files?.[0];if(n){this.errorMessage.set(null),this.generatedImageUrls.set([]);let i=new FileReader;i.onload=r=>{this.originalImageUrl.set(r.target?.result)},i.onerror=()=>{this.errorMessage.set("Failed to read file.")},i.readAsDataURL(n)}else this.originalImageUrl.set(null),this.generatedImageUrls.set([])}async generateImage(){if(!this.isAiAvailable()||!this.genAI){this.errorMessage.set("AI features are unavailable. Please check your configuration (window.AURA_GEMINI_API_KEY).");return}let e=this.editPrompt().trim();if(!e){this.errorMessage.set("Please enter an edit prompt.");return}this.isLoading.set(!0),this.errorMessage.set(null),this.generatedImageUrls.set([]);try{let i=(await this.genAI.models.generateImages({model:"imagen-4.0-generate-001",prompt:e,config:{numberOfImages:1,outputMimeType:"image/png",aspectRatio:this.aspectRatio()}})).generatedImages[0]?.image?.imageBytes;i?this.generatedImageUrls.set([`data:image/png;base64,${i}`]):this.errorMessage.set("No image generated. Please try a different prompt.")}catch(n){console.error("Error generating image:",n),this.errorMessage.set(`Image generation failed: ${n.message||"Unknown error"}.`)}finally{this.isLoading.set(!1)}}clearImage(){this.originalImageUrl.set(null),this.generatedImageUrls.set([]),this.editPrompt.set(""),this.errorMessage.set(null),this.fileInputRef()&&(this.fileInputRef().nativeElement.value="")}useAsAlbumArt(){let e=this.generatedImageUrls().length>0?this.generatedImageUrls()[0]:this.originalImageUrl();e?this.imageSelected.emit(e):this.errorMessage.set("No image to use as album art.")}requestImageAnalysis(){let e=this.generatedImageUrls().length>0?this.generatedImageUrls()[0]:this.originalImageUrl();e?(this.imageAnalysisRequest.emit(e),alert("Image analysis requested. Check chatbot for results!")):this.errorMessage.set("No image available to analyze.")}};Rn.\u0275fac=function(n){return new(n||Rn)},Rn.\u0275cmp=se({type:Rn,selectors:[["app-image-editor"]],viewQuery:function(n,i){n&1&&pe(i.fileInputRef,sv,5),n&2&&ke()},inputs:{initialPrompt:[1,"initialPrompt"],theme:[1,"theme"]},outputs:{imageSelected:"imageSelected",imageAnalysisRequest:"imageAnalysisRequest"},decls:40,vars:40,consts:[["fileInput",""],[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","flex-grow"],[1,"flex","flex-col","gap-4","p-4"],[1,"text-base"],[1,"flex-grow","flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden"],["alt","Uploaded Image",1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"text-sm",3,"class"],[1,"w-full","text-center","block","p-2","border","hover:text-black","cursor-pointer","text-sm"],["type","file","accept","image/*",1,"hidden",3,"change"],["for","edit-prompt",1,"block","text-sm"],["id","edit-prompt","placeholder","e.g., 'A retro-futuristic album cover with glowing elements', 'A sci-fi landscape art with vibrant colors'","rows","4",1,"w-full","p-2","text-sm","focus:ring-500","resize-y",3,"input","value","disabled"],[1,"block","text-sm","mt-2"],[1,"flex","flex-wrap","gap-2","text-sm"],["type","button",1,"px-3","py-1","border",3,"class","disabled"],[1,"flex","gap-2","mt-4"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg",3,"click"],[1,"text-red-500","text-sm","mt-2","text-center"],[1,"text-sm","animate-pulse",3,"class"],[1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg","mb-2",3,"class","disabled"],["download","aura-edited-image.png",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href","class","opacity-50"],[1,"text-sm"],["type","button",1,"px-3","py-1","border",3,"click","disabled"],["alt","Generated Image",1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"text-sm","animate-pulse"],[1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg","mb-2",3,"click","disabled"],["download","aura-edited-image.png",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"]],template:function(n,i){if(n&1){let r=V();h(0,"div",1)(1,"h2",2),d(2,"[ AURA IMAGE LAB ]"),p(),h(3,"div",3)(4,"div",4)(5,"h3",5),d(6,"// ORIGINAL IMAGE (FOR CONTEXT)"),p(),h(7,"div",6),x(8,lv,1,1,"img",7)(9,cv,2,2,"span",8),p(),h(10,"label",9),d(11," [ UPLOAD IMAGE ] "),h(12,"input",10,0),M("change",function(s){return C(r),_(i.handleImageUpload(s))}),p()(),h(14,"label",11),d(15,"GENERATION PROMPT:"),p(),h(16,"textarea",12),M("input",function(s){return C(r),_(i.editPrompt.set(s.target.value))}),p(),h(17,"label",13),d(18,"ASPECT RATIO:"),p(),h(19,"div",14),W(20,uv,2,4,"button",15,_i),p(),h(22,"div",16)(23,"button",17),M("click",function(){return C(r),_(i.generateImage())}),x(24,dv,2,0,"span")(25,fv,2,0,"span"),p(),h(26,"button",18),M("click",function(){return C(r),_(i.clearImage())}),d(27," [ CLEAR ] "),p()(),x(28,pv,2,1,"p",19),x(29,mv,2,0,"p",19),p(),h(30,"div",4)(31,"h3",5),d(32,"// GENERATED IMAGE"),p(),h(33,"div",6),x(34,gv,2,0)(35,vv,2,2,"span",20)(36,yv,2,2,"span",8),p(),x(37,Ev,2,3,"button",21),x(38,Cv,2,3,"button",21),x(39,_v,2,6,"a",22),p()()()}n&2&&(m("border border-"+i.theme().purple+"-500/30"),c(),m("text-"+i.theme().purple+"-400"),c(3),m("border border-"+i.theme().purple+"-500/20"),c(),m("text-"+i.theme().purple+"-300"),c(2),m("border-"+i.theme().purple+"-700/50"),c(),T(i.originalImageUrl()?8:9),c(2),m("hover:bg-"+i.theme().purple+"-500"),c(4),m("text-"+i.theme().purple+"-300"),c(2),m("focus:border-"+i.theme().purple+"-500"),R("value",i.editPrompt())("disabled",i.isLoading()||!i.isAiAvailable()),c(),m("text-"+i.theme().purple+"-300"),c(3),Q(_t(39,av)),c(3),m("hover:text-black"),R("disabled",!i.editPrompt()||i.isLoading()||!i.isAiAvailable()),c(),T(i.isLoading()?24:25),c(2),m("hover:text-black"),c(2),T(i.errorMessage()?28:-1),c(),T(i.isAiAvailable()?-1:29),c(),m("border border-"+i.theme().purple+"-500/20"),c(),m("text-"+i.theme().purple+"-300"),c(2),m("border-"+i.theme().purple+"-700/50"),c(),T(i.generatedImageUrls().length>0?34:i.isLoading()?35:36),c(3),T(i.generatedImageUrls().length>0?37:-1),c(),T(i.generatedImageUrls().length>0?38:-1),c(),T(i.generatedImageUrls().length>0?39:-1))},dependencies:[de],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0});var ho=Rn;var Dv=["liveVideoPreview"],bv=["recordedVideoPlayer"],wv=()=>["1:1","4:3","3:4","16:9","9:16"];function Iv(t,e){if(t&1&&(h(0,"div",4),d(1),p()),t&2){let n=g();c(),j(" ",n.error()," ")}}function xv(t,e){if(t&1&&(h(0,"span",26),d(1,"[ Camera Off ]"),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-500")}}function Tv(t,e){if(t&1&&(h(0,"span",11),J(1,"span",27),d(2),p()),t&2){let n=g();c(2),j(" REC: ",n.formatTime(n.recordingTime())," ")}}function Mv(t,e){t&1&&(h(0,"span"),d(1,"[ DISABLE CAMERA ]"),p())}function Sv(t,e){t&1&&(h(0,"span"),d(1,"[ ENABLE CAMERA ]"),p())}function Av(t,e){t&1&&(h(0,"span"),d(1,"[ RECORDING... ]"),p())}function Nv(t,e){t&1&&(h(0,"span"),d(1,"[ START RECORDING ]"),p())}function Rv(t,e){if(t&1&&(h(0,"h3",28),d(1,"// RECORDED VIDEO"),p(),h(2,"div",29),J(3,"video",30,1),p(),h(5,"a",31),d(6," [ DOWNLOAD RECORDED VIDEO ] "),p()),t&2){let n=g();m("text-"+n.theme().purple+"-300"),c(2),m("border-"+n.theme().purple+"-700/50"),c(),R("src",n.recordedVideoUrl(),re),c(2),m("hover:bg-"+n.theme().purple+"-500"),R("href",n.recordedVideoUrl(),re)}}function kv(t,e){if(t&1&&(h(0,"div",15)(1,"h4",32),d(2,"// IMAGE INPUT FROM EDITOR"),p(),J(3,"img",33),p()),t&2){let n=g();c(),m("text-"+n.theme().neutral+"-400"),c(2),m("border-"+n.theme().neutral+"-600"),R("src",n.imageForVideoGeneration(),re)}}function Pv(t,e){if(t&1){let n=V();h(0,"button",34),M("click",function(){let r=C(n).$implicit,o=g();return _(o.aspectRatio.set(r))}),d(1),p()}if(t&2){let n=e.$implicit,i=g();m(i.aspectRatio()===n?"bg-"+i.theme().purple+"-500 text-black":"hover:bg-"+i.theme().purple+"-700/50"),R("disabled",i.isGeneratingVideo()||!i.isAiAvailable()),c(),j(" ",n," ")}}function Fv(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),p())}function Ov(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATE FROM PROMPT ]"),p())}function Lv(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),p())}function Vv(t,e){t&1&&(h(0,"span"),d(1,"[ GENERATE FROM IMAGE + PROMPT ]"),p())}function Bv(t,e){if(t&1){let n=V();h(0,"button",13),M("click",function(){C(n);let r=g();return _(r.generateVideo(!0))}),x(1,Lv,2,0,"span")(2,Vv,2,0,"span"),p()}if(t&2){let n=g();m("hover:text-black"),R("disabled",!n.videoPrompt()||n.isGeneratingVideo()||!n.isAiAvailable()),c(),T(n.isGeneratingVideo()?1:2)}}function jv(t,e){if(t&1&&(h(0,"p",35),d(1),p()),t&2){let n=g();m("text-"+n.theme().neutral+"-400"),c(),q(n.generationProgressMessage())}}function Hv(t,e){if(t&1&&(h(0,"h3",28),d(1,"// GENERATED AI VIDEO"),p(),h(2,"div",29),J(3,"video",36),p(),h(4,"a",37),d(5," [ DOWNLOAD AI VIDEO ] "),p()),t&2){let n=g();m("text-"+n.theme().purple+"-300"),c(2),m("border-"+n.theme().purple+"-700/50"),c(),R("src",n.generatedVideoUrl(),re),c(),m("hover:bg-"+n.theme().purple+"-500"),R("href",n.generatedVideoUrl(),re)}}var kn=class kn{constructor(){this.imageForVideoGeneration=ne(null);this.initialPrompt=ne(null);this.theme=ne.required();this.mediaStream=w(null);this.isRecording=w(!1);this.recordedVideoBlob=w(null);this.recordedVideoUrl=w(null);this.recordingTime=w(0);this.cameraEnabled=w(!1);this.isCameraActive=w(!1);this.videoPrompt=w("");this.generatedVideoUrl=w(null);this.isGeneratingVideo=w(!1);this.generationProgressMessage=w(null);this.aspectRatio=w("16:9");this.aiService=N(Me);this.isAiAvailable=X(()=>this.aiService.isAiAvailable);this.error=w(null);this.liveVideoPreviewRef=he("liveVideoPreview");this.recordedVideoPlayerRef=he("recordedVideoPlayer");this.mediaRecorder=null;this.recordedChunks=[];this.genAI=void 0;this.aiService.isAiAvailable?this.genAI=this.aiService.genAI:this.error.set("AI features are unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."),ue(()=>{let e=this.initialPrompt();e&&e!==this.videoPrompt()&&this.videoPrompt.set(e)})}ngOnDestroy(){this.stopMediaStream()}async requestMediaPermissions(){this.error.set(null),this.mediaStream()&&this.stopMediaStream();try{let e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});this.mediaStream.set(e),this.cameraEnabled.set(!0),this.isCameraActive.set(!0),this.liveVideoPreviewRef()&&(this.liveVideoPreviewRef().nativeElement.srcObject=e,await this.liveVideoPreviewRef().nativeElement.play()),console.log("Camera and microphone access granted.")}catch(e){console.error("Error accessing media devices:",e),this.error.set(`Failed to access camera/microphone: ${e.name||e.message}. Please check permissions.`),this.cameraEnabled.set(!1),this.isCameraActive.set(!1)}}stopMediaStream(){this.mediaStream()?.getTracks().forEach(e=>e.stop()),this.mediaStream.set(null),this.isCameraActive.set(!1),this.liveVideoPreviewRef()&&(this.liveVideoPreviewRef().nativeElement.srcObject=null),console.log("Media stream stopped.")}toggleCamera(){this.isCameraActive()?(this.stopMediaStream(),this.cameraEnabled.set(!1)):this.requestMediaPermissions()}startRecording(){if(!this.mediaStream()||!this.isCameraActive()){this.error.set("Camera is not active. Please enable camera first.");return}if(!this.isRecording()){this.recordedChunks=[],this.recordedVideoBlob.set(null),this.recordedVideoUrl.set(null),this.recordingTime.set(0),this.error.set(null);try{this.mediaRecorder=new MediaRecorder(this.mediaStream(),{mimeType:"video/webm; codecs=vp8,opus"}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.onstop=()=>{let e=new Blob(this.recordedChunks,{type:"video/webm"});this.recordedVideoBlob.set(e),this.recordedVideoUrl.set(URL.createObjectURL(e)),console.log("Recording stopped. Blob created."),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.onerror=e=>{console.error("MediaRecorder error:",e.error),this.error.set(`Recording error: ${e.error.name||e.error.message}`),this.isRecording.set(!1),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.start(),this.isRecording.set(!0),this.recordingIntervalId=window.setInterval(()=>this.recordingTime.update(e=>e+1),1e3),console.log("Recording started.")}catch(e){console.error("Error starting MediaRecorder:",e),this.error.set(`Failed to start recording: ${e.message}`),this.isRecording.set(!1)}}}stopRecording(){this.mediaRecorder&&this.isRecording()&&(this.mediaRecorder.stop(),this.isRecording.set(!1),console.log("Attempting to stop recording..."))}playRecordedVideo(){this.recordedVideoUrl()&&this.recordedVideoPlayerRef()&&(this.recordedVideoPlayerRef().nativeElement.load(),this.recordedVideoPlayerRef().nativeElement.play().catch(e=>console.error("Error playing recorded video:",e)))}async generateVideo(e){if(!this.isAiAvailable()||!this.genAI){this.error.set("AI features are unavailable. Please check your configuration (window.AURA_GEMINI_API_KEY).");return}let n=this.videoPrompt().trim();if(!n){this.error.set("Please enter a prompt for video generation.");return}if(e&&!this.imageForVideoGeneration()){this.error.set('Please select an image first or clear "Generate from image" option.');return}this.isGeneratingVideo.set(!0),this.error.set(null),this.generatedVideoUrl.set(null),this.generationProgressMessage.set("Starting video generation...");try{let i,r={numberOfVideos:1,aspectRatio:this.aspectRatio()};if(e&&this.imageForVideoGeneration()){let s=this.imageForVideoGeneration().split(";")[0].split(":")[1],a=this.imageForVideoGeneration().split(",")[1];i=await this.genAI.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:n,image:{imageBytes:a,mimeType:s},config:r})}else i=await this.genAI.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:n,config:r});for(this.generationProgressMessage.set("Video generation in progress. This may take a few minutes...");!i.done;)await new Promise(s=>setTimeout(s,1e4)),this.generationProgressMessage.set(`Still generating... Current status: ${i.metadata?.state||"processing"}`),i=await this.genAI.operations.getVideosOperation({operation:i});let o=i.response?.generatedVideos?.[0]?.video?.uri;o?(this.generatedVideoUrl.set(`${o}&key=${this.aiService.getApiKey()}`),this.generationProgressMessage.set("Video generation complete!")):(this.error.set("Video generation failed: No download link in response."),this.generationProgressMessage.set(null))}catch(i){console.error("Error generating video:",i),this.error.set(`Video generation failed: ${i.message||"Unknown error"}.`),this.generationProgressMessage.set(null)}finally{this.isGeneratingVideo.set(!1)}}formatTime(e){if(isNaN(e)||e<0)return"00:00";let n=Math.floor(e/60),i=Math.floor(e%60);return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}clearAll(){this.stopMediaStream(),this.isRecording.set(!1),this.recordedVideoBlob.set(null),this.recordedVideoUrl.set(null),this.recordingTime.set(0),this.videoPrompt.set(""),this.generatedVideoUrl.set(null),this.isGeneratingVideo.set(!1),this.generationProgressMessage.set(null),this.aspectRatio.set("16:9"),this.error.set(null)}};kn.\u0275fac=function(n){return new(n||kn)},kn.\u0275cmp=se({type:kn,selectors:[["app-video-editor"]],viewQuery:function(n,i){n&1&&(pe(i.liveVideoPreviewRef,Dv,5),pe(i.recordedVideoPlayerRef,bv,5)),n&2&&ke(2)},inputs:{imageForVideoGeneration:[1,"imageForVideoGeneration"],initialPrompt:[1,"initialPrompt"],theme:[1,"theme"]},decls:46,vars:48,consts:[["liveVideoPreview",""],["recordedVideoPlayer",""],[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"bg-red-900/50","text-red-300","p-3","text-center","border","border-red-500","animate-fade-in"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","flex-grow"],[1,"flex","flex-col","gap-4","p-4"],[1,"text-base"],[1,"flex-grow","flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden","bg-black","relative"],["autoplay","","muted","","playsinline","",1,"max-w-full","max-h-full","object-contain"],[1,"absolute","text-sm",3,"class"],[1,"absolute","top-2","left-2","text-red-500","animate-pulse","text-sm","flex","items-center","gap-1"],[1,"flex","gap-2"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"flex","flex-col","items-center","gap-2"],["for","video-prompt",1,"block","text-sm"],["id","video-prompt","placeholder","e.g., 'A neon hologram of a cat driving at top speed', 'A futuristic city at sunset with flying cars and towering skyscrapers.'","rows","4",1,"w-full","p-2","text-sm","focus:ring-500","resize-y",3,"input","value","disabled"],[1,"block","text-sm","mt-2"],[1,"flex","flex-wrap","gap-2","text-sm"],["type","button",1,"px-3","py-1","border",3,"class","disabled"],[1,"flex","flex-col","gap-2","mt-4"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"class","disabled"],[1,"text-sm","mt-2","text-center","animate-pulse",3,"class"],[1,"flex","justify-center","mt-4"],[1,"px-6","py-2","border-2","text-lg",3,"click"],[1,"absolute","text-sm"],[1,"w-2","h-2","rounded-full","bg-red-500"],[1,"text-base","mt-4"],[1,"flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden","bg-black"],["controls","",1,"max-w-full","max-h-full","object-contain",3,"src"],["download","aura-recorded-video.webm",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"],[1,"text-sm"],["alt","Image from editor",1,"w-24","h-24","object-cover","border",3,"src"],["type","button",1,"px-3","py-1","border",3,"click","disabled"],[1,"text-sm","mt-2","text-center","animate-pulse"],["controls","","autoplay","","loop","","muted","","playsinline","",1,"max-w-full","max-h-full","object-contain",3,"src"],["download","aura-ai-generated-video.mp4",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"]],template:function(n,i){if(n&1){let r=V();h(0,"div",2)(1,"h2",3),d(2,"[ AURA VIDEO LAB ]"),p(),x(3,Iv,2,1,"div",4),h(4,"div",5)(5,"div",6)(6,"h3",7),d(7,"// CAMERA & RECORDING"),p(),h(8,"div",8),J(9,"video",9,0),x(11,xv,2,2,"span",10),x(12,Tv,3,1,"span",11),p(),h(13,"div",12)(14,"button",13),M("click",function(){return C(r),_(i.toggleCamera())}),x(15,Mv,2,0,"span")(16,Sv,2,0,"span"),p()(),h(17,"div",12)(18,"button",13),M("click",function(){return C(r),_(i.startRecording())}),x(19,Av,2,0,"span")(20,Nv,2,0,"span"),p(),h(21,"button",14),M("click",function(){return C(r),_(i.stopRecording())}),d(22," [ STOP ] "),p()(),x(23,Rv,7,8),p(),h(24,"div",6)(25,"h3",7),d(26,"// AI VIDEO GENERATION"),p(),x(27,kv,4,5,"div",15),h(28,"label",16),d(29,"VIDEO PROMPT:"),p(),h(30,"textarea",17),M("input",function(s){return C(r),_(i.videoPrompt.set(s.target.value))}),p(),h(31,"label",18),d(32,"ASPECT RATIO:"),p(),h(33,"div",19),W(34,Pv,2,4,"button",20,_i),p(),h(36,"div",21)(37,"button",13),M("click",function(){return C(r),_(i.generateVideo(!1))}),x(38,Fv,2,0,"span")(39,Ov,2,0,"span"),p(),x(40,Bv,3,4,"button",22),p(),x(41,jv,2,3,"p",23),x(42,Hv,6,8),p()(),h(43,"div",24)(44,"button",25),M("click",function(){return C(r),_(i.clearAll())}),d(45," [ CLEAR ALL ] "),p()()()}n&2&&(m("border border-"+i.theme().purple+"-500/30"),c(),m("text-"+i.theme().purple+"-400"),c(2),T(i.error()?3:-1),c(2),m("border border-"+i.theme().purple+"-500/20"),c(),m("text-"+i.theme().purple+"-300"),c(2),m("border-"+i.theme().purple+"-700/50"),c(3),T(i.isCameraActive()?-1:11),c(),T(i.isRecording()?12:-1),c(2),m("hover:text-black"),R("disabled",i.isRecording()),c(),T(i.isCameraActive()?15:16),c(3),m("hover:text-black"),R("disabled",i.isRecording()||!i.isCameraActive()),c(),T(i.isRecording()?19:20),c(2),m("hover:text-black"),R("disabled",!i.isRecording()),c(2),T(i.recordedVideoUrl()?23:-1),c(),m("border border-"+i.theme().purple+"-500/20"),c(),m("text-"+i.theme().purple+"-300"),c(2),T(i.imageForVideoGeneration()?27:-1),c(),m("text-"+i.theme().purple+"-300"),c(2),m("focus:border-"+i.theme().purple+"-500"),R("value",i.videoPrompt())("disabled",i.isGeneratingVideo()||!i.isAiAvailable()),c(),m("text-"+i.theme().purple+"-300"),c(3),Q(_t(47,wv)),c(3),m("hover:text-black"),R("disabled",!i.videoPrompt()||i.isGeneratingVideo()||!i.isAiAvailable()),c(),T(i.isGeneratingVideo()?38:39),c(2),T(i.imageForVideoGeneration()?40:-1),c(),T(i.generationProgressMessage()?41:-1),c(),T(i.generatedVideoUrl()?42:-1),c(2),m("hover:text-black"))},dependencies:[de],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0});var go=kn;var Uv=["visualizerCanvas"],Pn=class Pn{constructor(){this.analyserNode=ne(void 0);this.canvasRef=he.required("visualizerCanvas");this.theme=ne.required();ue(()=>{let e=this.analyserNode(),n=this.theme();e?(e.fftSize=256,this.dataArray=new Uint8Array(e.frequencyBinCount),this.startVisualizer()):this.stopVisualizer()})}ngAfterViewInit(){let e=this.canvasRef().nativeElement,n=e.getContext("2d");n?(this.ctx=n,e.width=e.offsetWidth,e.height=e.offsetHeight):console.error("Failed to get 2D rendering context for visualizer canvas.")}ngOnDestroy(){this.stopVisualizer()}startVisualizer(){if(this.stopVisualizer(),!this.ctx||!this.analyserNode()||!this.dataArray)return;let e=this.canvasRef().nativeElement;e.width=e.offsetWidth,e.height=e.offsetHeight,this.animationFrameId=requestAnimationFrame(this.draw.bind(this))}stopVisualizer(){if(this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.ctx){let e=this.canvasRef().nativeElement;this.ctx.clearRect(0,0,e.width,e.height)}}draw(){let e=this.analyserNode(),n=this.canvasRef().nativeElement,i=this.ctx;if(!e||!i||!this.dataArray){this.stopVisualizer();return}e.getByteFrequencyData(this.dataArray),i.clearRect(0,0,n.width,n.height);let r=e.frequencyBinCount,o=n.width/r*.9,s=0;for(let a=0;a<r;a++){let l=this.dataArray[a]/255*n.height,u=a*(360/r);i.fillStyle=`hsl(${u}, 80%, 60%)`,i.fillRect(s,n.height-l,o,l),s+=o+n.width/r*.1}this.animationFrameId=requestAnimationFrame(this.draw.bind(this))}};Pn.\u0275fac=function(n){return new(n||Pn)},Pn.\u0275cmp=se({type:Pn,selectors:[["app-audio-visualizer"]],viewQuery:function(n,i){n&1&&pe(i.canvasRef,Uv,5),n&2&&ke()},inputs:{analyserNode:[1,"analyserNode"],theme:[1,"theme"]},decls:3,vars:2,consts:[["visualizerCanvas",""],[1,"visualizer-container"]],template:function(n,i){n&1&&(h(0,"div",1),J(1,"canvas",null,0),p()),n&2&&we("--primary-color","var(--color-"+i.theme().primary+"-700)")},dependencies:[de],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.visualizer-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:transparent;overflow:hidden;border:1px solid var(--primary-color)}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0});var vo=Pn;var lf=()=>[],$v=(t,e)=>e.midi;function Gv(t,e){t&1&&(h(0,"span"),d(1,"[ STOP ]"),p())}function qv(t,e){t&1&&(h(0,"span"),d(1,"[ PLAY ]"),p())}function zv(t,e){if(t&1&&(h(0,"div",14),d(1),p()),t&2){let n=e.$index,i=g();m(i.currentStep()===n?"text-"+i.theme().primary+"-300":"text-"+i.theme().neutral+"-400"),Z("font-bold",i.currentStep()===n),c(),j(" ",n+1," ")}}function Wv(t,e){if(t&1){let n=V();h(0,"div",17),M("click",function(){let r=C(n).$index,o=g().$implicit,s=g();return _(s.toggleNote(o.midi,r))}),p()}if(t&2){let n=e.$implicit,i=e.$index,r=g(2);m(n&&r.currentStep()===i?"bg-"+r.theme().primary+"-400":"")}}function Qv(t,e){if(t&1&&(h(0,"div",15),d(1),p(),W(2,Wv,1,2,"div",16,ye)),t&2){let n=e.$implicit,i=g();m(n.name.includes("#")?"text-"+i.theme().primary+"-400/70":"text-"+i.theme().primary+"-400"),Z("font-bold",n.name.includes("#")),c(),j(" ",i.getNoteDisplay(n)," "),c(),Q(i.sequence().get(n.midi)||_t(5,lf))}}var sf=3,Yv=12,Zv=2,af=16,ol=[],Kv=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(let t=sf;t<sf+Zv;t++)for(let e=0;e<Yv;e++)ol.push({midi:60+(t-4)*12+e,name:Kv[e],octave:t});ol.reverse();var Fn=class Fn{constructor(){this.theme=ne.required();this.allNotes=ol;this.bpm=w(120);this.isPlaying=w(!1);this.currentStep=w(-1);this.sequence=w(new Map);this.audioContext=null;this.initializeEmptySequence(),ue(()=>{this.initializeEmptySequence()})}ngAfterViewInit(){}ngOnDestroy(){this.stop(),this.audioContext?.close().catch(e=>console.error("Error closing AudioContext:",e))}initializeEmptySequence(){let e=new Map;this.allNotes.forEach(n=>{e.set(n.midi,Array(af).fill(!1))}),this.sequence.set(e)}async initAudio(){this.audioContext&&this.audioContext.state==="running"||(this.audioContext||(this.audioContext=new AudioContext,this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.gain.value=.5,this.masterGainNode.connect(this.audioContext.destination)),this.audioContext.state==="suspended"&&await this.audioContext.resume())}async togglePlay(){await this.initAudio(),this.isPlaying()?this.stop():this.start()}start(){this.isPlaying()||(this.isPlaying.set(!0),this.currentStep.set(this.currentStep()===-1?0:this.currentStep()),this.scheduleNextStep())}stop(){this.isPlaying.set(!1),this.timerId&&(clearTimeout(this.timerId),this.timerId=void 0)}resetSequence(){this.stop(),this.currentStep.set(-1),this.initializeEmptySequence()}scheduleNextStep(){if(!this.isPlaying()||!this.audioContext)return;let n=60/this.bpm()/4;this.timerId=window.setTimeout(()=>{let i=this.currentStep();this.playStep(i),this.currentStep.update(r=>(r+1)%af),this.scheduleNextStep()},n*1e3)}playStep(e){!this.audioContext||!this.masterGainNode||this.sequence().forEach((n,i)=>{n[e]&&this.playNote(i,this.audioContext.currentTime)})}playNote(e,n){if(!this.audioContext||!this.masterGainNode)return;let i=440*Math.pow(2,(e-69)/12),r=this.audioContext.createOscillator(),o=this.audioContext.createGain();r.type="sine",r.frequency.setValueAtTime(i,n),o.gain.setValueAtTime(.3,n),o.gain.exponentialRampToValueAtTime(1e-4,n+.5),r.connect(o),o.connect(this.masterGainNode),r.start(n),r.stop(n+.5)}toggleNote(e,n){this.sequence.update(i=>{let r=i.get(e);return r&&(r[n]=!r[n]),new Map(i)})}onBpmChange(e){let n=parseInt(e.target.value,10);!isNaN(n)&&n>=60&&n<=240&&(this.bpm.set(n),this.isPlaying()&&(this.stop(),this.start()))}getNoteDisplay(e){return`${e.name}${e.octave}`}};Fn.\u0275fac=function(n){return new(n||Fn)},Fn.\u0275cmp=se({type:Fn,selectors:[["app-piano-roll"]],inputs:{theme:[1,"theme"]},decls:22,vars:18,consts:[[1,"w-full","p-4","flex","flex-col","gap-4","relative"],[1,"text-center","text-lg"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4","p-2"],[1,"flex","items-center","gap-4"],[1,"w-24","px-4","py-2","border-2","text-lg",3,"click"],[1,"px-3","py-2","border-2","text-lg",3,"click"],[1,"flex","items-center","gap-2"],["for","bpm",1,"text-sm"],["id","bpm-slider","type","range","min","60","max","240",1,"w-24","aura-slider",3,"input","value"],["id","bpm-text","type","number","min","60","max","240",1,"p-1","text-sm","w-16","text-center",3,"input","value"],[1,"w-full","overflow-x-auto"],[1,"piano-roll-grid","grid","gap-0.5","p-2"],[1,"sequencer-header","text-neutral-400","text-xs","text-right","pr-2"],[1,"step-header","text-xs","text-center","p-1",3,"class","font-bold"],[1,"step-header","text-xs","text-center","p-1"],[1,"note-name","text-xs","text-right","pr-2","py-1"],[1,"note-step","w-6","h-6","border","cursor-pointer","transition-all","duration-75",3,"class"],[1,"note-step","w-6","h-6","border","cursor-pointer","transition-all","duration-75",3,"click"]],template:function(n,i){n&1&&(h(0,"div",0)(1,"h2",1),d(2,"[ AURA PIANO ROLL ]"),p(),h(3,"div",2)(4,"div",3)(5,"button",4),M("click",function(){return i.togglePlay()}),x(6,Gv,2,0,"span")(7,qv,2,0,"span"),p(),h(8,"button",5),M("click",function(){return i.resetSequence()}),d(9," [ RESET ] "),p(),h(10,"div",6)(11,"label",7),d(12,"BPM:"),p(),h(13,"input",8),M("input",function(o){return i.onBpmChange(o)}),p(),h(14,"input",9),M("input",function(o){return i.onBpmChange(o)}),p()()()(),h(15,"div",10)(16,"div",11),J(17,"div",12),W(18,zv,2,5,"div",13,ye),W(20,Qv,4,6,null,null,$v),p()()()),n&2&&(m("border border-"+i.theme().primary+"-500/30"),c(),m("text-"+i.theme().primary+"-400"),c(2),m("border border-"+i.theme().primary+"-500/20"),c(2),m("hover:text-black"),c(),T(i.isPlaying()?6:7),c(2),m("hover:text-black"),c(5),R("value",i.bpm()),c(),m("focus:border-"+i.theme().primary+"-500"),R("value",i.bpm()),c(2),m("border border-"+i.theme().primary+"-500/20"),c(2),Q(_t(17,lf).constructor(16)),c(2),Q(i.allNotes))},dependencies:[de],styles:[".piano-roll-grid[_ngcontent-%COMP%]{grid-template-columns:80px repeat(16,1fr);grid-auto-rows:24px;width:max-content}.sequencer-header[_ngcontent-%COMP%], .note-name[_ngcontent-%COMP%], .note-step[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.aura-slider[_ngcontent-%COMP%]{-webkit-appearance:none;height:4px;border-radius:2px;background:var(--color-amber-900);outline:none;opacity:.7;transition:opacity .2s}.aura-slider[_ngcontent-%COMP%]:hover{opacity:1}.aura-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;border-radius:50%;background:var(--color-amber-400);cursor:pointer;border:1px solid var(--color-amber-900)}.aura-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:var(--color-amber-400);cursor:pointer;border:1px solid var(--color-amber-900)}div[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}div[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-neutral-800)}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-primary-400);border-radius:4px;border:1px solid var(--color-primary-700)}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-primary-300)}"],changeDetection:0});var yo=Fn;var Jv=["canvasVisualizer"],Xv=(t,e)=>e.name;function ey(t,e){t&1&&(h(0,"span"),d(1,"[ || ]"),p())}function ty(t,e){t&1&&(h(0,"span"),d(1,"[ > ]"),p())}function ny(t,e){if(t&1){let n=V();h(0,"button",9),M("click",function(){C(n);let r=g();return _(r.downloadRecording())}),d(1," [ DOWNLOAD ] "),p()}}function iy(t,e){if(t&1){let n=V();h(0,"button",27),M("click",function(){let r=C(n).$index,o=g().$index,s=g();return _(s.toggleStep(o,r))}),p()}if(t&2){let n=e.$implicit,i=e.$index,r=g(2);we("background-color",n?"":i%4===0?"rgba(255,255,255,0.1)":"transparent"),Z("bg-current",n)("opacity-50",!n)("scale-110",r.isPlaying()&&r.currentStep()===i)("border-white",r.isPlaying()&&r.currentStep()===i)("bg-white",r.isPlaying()&&r.currentStep()===i&&n)}}function ry(t,e){if(t&1){let n=V();h(0,"div",14)(1,"div",16)(2,"div",17)(3,"span",18),d(4),p(),h(5,"div",19)(6,"button",20),M("click",function(){let r=C(n).$index,o=g();return _(o.toggleMute(r))}),d(7,"M"),p(),h(8,"button",20),M("click",function(){let r=C(n).$index,o=g();return _(o.toggleSolo(r))}),d(9,"S"),p()()(),h(10,"div",21)(11,"span"),d(12,"V"),p(),h(13,"input",22),M("input",function(r){let o=C(n).$index,s=g();return _(s.onVolumeChange(o,r))}),p()(),h(14,"div",21)(15,"span"),d(16,"P"),p(),h(17,"input",23),M("input",function(r){let o=C(n).$index,s=g();return _(s.onPanChange(o,r))}),p()(),h(18,"div",21)(19,"span"),d(20,"T"),p(),h(21,"input",24),M("input",function(r){let o=C(n).$index,s=g();return _(s.onPitchChange(o,r))}),p()()(),h(22,"div",25),W(23,iy,1,12,"button",26,ye),p()()}if(t&2){let n=e.$implicit;c(4),q(n.name),c(2),Z("bg-red-900",n.mute)("text-white",n.mute),c(2),Z("bg-yellow-600",n.solo)("text-white",n.solo),c(5),R("value",n.volume),c(4),R("value",n.pan),c(4),R("value",n.pitch),c(2),Q(n.steps)}}var On=class On{constructor(){this.theme=w({name:"Green Vintage",primary:"green",accent:"amber",neutral:"neutral",purple:"purple",red:"red",blue:"blue"});this.isPlaying=w(!1);this.bpm=w(120);this.currentStep=w(0);this.totalSteps=16;this.tracks=w([{name:"KICK",type:"kick",steps:Array(16).fill(!1),volume:.8,pan:0,pitch:1,mute:!1,solo:!1},{name:"SNARE",type:"snare",steps:Array(16).fill(!1),volume:.7,pan:0,pitch:1,mute:!1,solo:!1},{name:"HI-HAT",type:"hihat",steps:Array(16).fill(!1),volume:.6,pan:0,pitch:1,mute:!1,solo:!1},{name:"CLAP",type:"clap",steps:Array(16).fill(!1),volume:.6,pan:0,pitch:1,mute:!1,solo:!1},{name:"TOM",type:"tom",steps:Array(16).fill(!1),volume:.7,pan:.2,pitch:1,mute:!1,solo:!1},{name:"CRASH",type:"crash",steps:Array(16).fill(!1),volume:.5,pan:-.2,pitch:1,mute:!1,solo:!1},{name:"FX",type:"perc",steps:Array(16).fill(!1),volume:.5,pan:.3,pitch:1,mute:!1,solo:!1},{name:"808",type:"kick",steps:Array(16).fill(!1),volume:.9,pan:0,pitch:.5,mute:!1,solo:!1}]);this.schedulerTimer=null;this.nextNoteTime=0;this.scheduleAheadTime=.1;this.lookahead=25;this.mediaRecorder=null;this.recordedChunks=[];this.isRecording=w(!1);this.recordedUrl=w(null);this.audioCtx=new AudioContext,this.masterGain=this.audioCtx.createGain(),this.masterGain.connect(this.audioCtx.destination),this.destinationNode=this.audioCtx.createMediaStreamDestination(),this.masterGain.connect(this.destinationNode),this.updateTrackSteps(0,[0,4,8,12]),this.updateTrackSteps(1,[4,12]),this.updateTrackSteps(2,[2,6,10,14])}ngOnDestroy(){this.stop(),this.audioCtx.close()}updateTrackSteps(e,n){this.tracks.update(i=>{let r=[...i];return n.forEach(o=>r[e].steps[o]=!0),r})}togglePlay(){this.isPlaying()?this.stop():this.start()}start(){this.audioCtx.state==="suspended"&&this.audioCtx.resume(),this.isPlaying.set(!0),this.currentStep.set(0),this.nextNoteTime=this.audioCtx.currentTime,this.scheduler()}stop(){this.isPlaying.set(!1),this.schedulerTimer&&(window.clearTimeout(this.schedulerTimer),this.schedulerTimer=null),this.currentStep.set(0)}reset(){this.tracks.update(e=>e.map(n=>A(S({},n),{steps:Array(16).fill(!1)}))),this.stop()}changeBpm(e){this.bpm.update(n=>Math.max(60,Math.min(300,n+e)))}handleBpmInput(e){let n=parseInt(e.target.value,10);isNaN(n)||this.bpm.set(Math.max(60,Math.min(300,n)))}toggleStep(e,n){this.tracks.update(i=>{let r=[...i];return r[e].steps[n]=!r[e].steps[n],r})}scheduler(){for(;this.nextNoteTime<this.audioCtx.currentTime+this.scheduleAheadTime;)this.scheduleNote(this.currentStep(),this.nextNoteTime),this.nextNote();this.isPlaying()&&(this.schedulerTimer=window.setTimeout(()=>this.scheduler(),this.lookahead))}nextNote(){let e=60/this.bpm();this.nextNoteTime+=.25*e,this.currentStep.update(n=>(n+1)%this.totalSteps)}scheduleNote(e,n){this.tracks().forEach(i=>{if(i.steps[e]&&!i.mute){if(this.tracks().some(o=>o.solo)&&!i.solo)return;this.playDrumSound(i,n)}})}playDrumSound(e,n){let i=this.audioCtx.createOscillator(),r=this.audioCtx.createGain(),o=this.audioCtx.createStereoPanner();o.pan.value=e.pan,i.connect(r),r.connect(o),o.connect(this.masterGain);let s=n;switch(e.type){case"kick":i.frequency.setValueAtTime(150*e.pitch,s),i.frequency.exponentialRampToValueAtTime(.01,s+.5),r.gain.setValueAtTime(e.volume,s),r.gain.exponentialRampToValueAtTime(.01,s+.5),i.start(s),i.stop(s+.5);break;case"snare":i.type="triangle",i.frequency.setValueAtTime(100*e.pitch,s),r.gain.setValueAtTime(e.volume,s),r.gain.exponentialRampToValueAtTime(.01,s+.2),i.start(s),i.stop(s+.2),this.createNoise(s,.2,e.volume,e.pan);break;case"hihat":this.createNoise(s,.05,e.volume*.7,e.pan,8e3);break;case"clap":this.createNoise(s,.01,e.volume,e.pan,2e3),this.createNoise(s+.01,.01,e.volume,e.pan,2e3),this.createNoise(s+.02,.01,e.volume,e.pan,2e3),this.createNoise(s+.03,.2,e.volume,e.pan,2e3);break;case"tom":i.frequency.setValueAtTime(200*e.pitch,s),i.frequency.exponentialRampToValueAtTime(50,s+.3),r.gain.setValueAtTime(e.volume,s),r.gain.exponentialRampToValueAtTime(.01,s+.3),i.start(s),i.stop(s+.3);break;case"crash":this.createNoise(s,1.5,e.volume,e.pan,3e3);break;case"ride":i.frequency.setValueAtTime(500*e.pitch,s),r.gain.setValueAtTime(e.volume*.5,s),r.gain.exponentialRampToValueAtTime(.01,s+.5),i.start(s),i.stop(s+.5),this.createNoise(s,.5,e.volume*.4,e.pan,5e3);break;case"perc":i.type="square",i.frequency.setValueAtTime(800*e.pitch,s),i.frequency.exponentialRampToValueAtTime(100,s+.1),r.gain.setValueAtTime(e.volume*.5,s),r.gain.exponentialRampToValueAtTime(.01,s+.1),i.start(s),i.stop(s+.1);break}}createNoise(e,n,i,r,o=1e3){let s=this.audioCtx.sampleRate*n,a=this.audioCtx.createBuffer(1,s,this.audioCtx.sampleRate),l=a.getChannelData(0);for(let D=0;D<s;D++)l[D]=Math.random()*2-1;let u=this.audioCtx.createBufferSource();u.buffer=a;let f=this.audioCtx.createGain(),v=this.audioCtx.createStereoPanner(),b=this.audioCtx.createBiquadFilter();b.type="highpass",b.frequency.value=o,u.connect(b),b.connect(f),f.connect(v),v.connect(this.masterGain),v.pan.value=r,f.gain.setValueAtTime(i,e),f.gain.exponentialRampToValueAtTime(.01,e+n),u.start(e)}onVolumeChange(e,n){let i=parseFloat(n.target.value);this.tracks.update(r=>{let o=[...r];return o[e].volume=i,o})}onPanChange(e,n){let i=parseFloat(n.target.value);this.tracks.update(r=>{let o=[...r];return o[e].pan=i,o})}onPitchChange(e,n){let i=parseFloat(n.target.value);this.tracks.update(r=>{let o=[...r];return o[e].pitch=i,o})}toggleMute(e){this.tracks.update(n=>{let i=[...n];return i[e].mute=!i[e].mute,i})}toggleSolo(e){this.tracks.update(n=>{let i=[...n];return i[e].solo=!i[e].solo,i})}toggleRecording(){this.isRecording()?this.stopRecording():this.startRecording()}startRecording(){this.recordedChunks=[],this.isRecording.set(!0);let e=MediaRecorder.isTypeSupported("audio/webm;codecs=pcm")?"audio/webm;codecs=pcm":"audio/webm";this.mediaRecorder=new MediaRecorder(this.destinationNode.stream,{mimeType:e}),this.mediaRecorder.ondataavailable=n=>{n.data.size>0&&this.recordedChunks.push(n.data)},this.mediaRecorder.onstop=()=>{let n=new Blob(this.recordedChunks,{type:e});this.recordedUrl.set(URL.createObjectURL(n))},this.mediaRecorder.start()}stopRecording(){this.isRecording.set(!1),this.mediaRecorder&&this.mediaRecorder.state!=="inactive"&&this.mediaRecorder.stop()}downloadRecording(){let e=this.recordedUrl();if(!e)return;let n=document.createElement("a");n.href=e,n.download=`aura-beat-${Date.now()}.webm`,n.click()}async renderToWav(){let e=16*(60/this.bpm()),n=new OfflineAudioContext(2,44100*e,44100);this.downloadRecording()}setBpm(e){this.bpm.set(Math.max(60,Math.min(300,e)))}clearPattern(){this.tracks.update(e=>e.map(n=>A(S({},n),{steps:Array(16).fill(!1)})))}setPattern(e){this.tracks.update(n=>{let i=[...n];for(let r in e){let o=i.findIndex(s=>s.name.toLowerCase()===r.toLowerCase()||s.type===r.toLowerCase());if(o!==-1){let s=e[r];i[o].steps=Array(16).fill(!1),s.forEach(a=>{a>=0&&a<16&&(i[o].steps[a]=!0)})}}return i})}setTrackMute(e,n){this.tracks.update(i=>{let r=[...i],o=r.findIndex(s=>s.name.toLowerCase()===e.toLowerCase()||s.type===e.toLowerCase());return o!==-1&&(r[o].mute=n),r})}setTrackSolo(e,n){this.tracks.update(i=>{let r=[...i],o=r.findIndex(s=>s.name.toLowerCase()===e.toLowerCase()||s.type===e.toLowerCase());return o!==-1&&(r[o].solo=n),r})}};On.\u0275fac=function(n){return new(n||On)},On.\u0275cmp=se({type:On,selectors:[["app-drum-machine"]],viewQuery:function(n,i){if(n&1&&Ba(Jv,5),n&2){let r;ja(r=Ha())&&(i.canvasRef=r.first)}},decls:29,vars:14,consts:[[1,"w-full","h-full","flex","flex-col","gap-4","p-4","border-2","bg-black/80","backdrop-blur-sm"],[1,"flex","flex-wrap","items-center","justify-between","gap-4","p-2","border-b","border-inherit"],[1,"text-2xl","font-bold"],[1,"flex","items-center","gap-4"],[1,"flex","items-center","gap-2"],["type","number",1,"w-16","bg-transparent","border","border-inherit","p-1","text-center",3,"input","value"],[1,"flex","flex-col","gap-1"],[1,"px-1","border","border-inherit","text-xs","hover:text-black","hover:bg-current",3,"click"],[1,"w-12","h-12","flex","items-center","justify-center","border-2","text-xl","hover:text-black","hover:bg-current","transition-colors",3,"click"],[1,"p-2","border","border-inherit","hover:text-black","hover:bg-current","text-sm",3,"click"],[1,"p-2","border","border-inherit","hover:text-black","hover:bg-current","text-sm","flex","items-center","gap-2",3,"click"],[1,"w-3","h-3","rounded-full","bg-current"],[1,"p-2","border","border-inherit","hover:text-black","hover:bg-current","text-sm"],[1,"flex-grow","overflow-y-auto","space-y-2"],[1,"flex","items-center","gap-2","p-1","border","border-transparent","hover:border-inherit","transition-colors","rounded","bg-black/40"],[1,"text-xs","text-center","opacity-50"],[1,"w-32","flex","flex-col","gap-1","p-1","text-xs","border-r","border-inherit/30"],[1,"flex","justify-between","items-center"],[1,"font-bold"],[1,"flex","gap-1"],[1,"px-1","border","border-inherit",3,"click"],[1,"flex","items-center","gap-1"],["type","range","min","0","max","1","step","0.01",1,"w-full","h-1",3,"input","value"],["type","range","min","-1","max","1","step","0.1",1,"w-full","h-1",3,"input","value"],["type","range","min","0.5","max","2","step","0.1",1,"w-full","h-1",3,"input","value"],[1,"flex-grow","grid","grid-cols-16","gap-1"],[1,"w-full","aspect-square","border","border-inherit/20","transition-all","duration-75",3,"bg-current","opacity-50","scale-110","border-white","bg-white","background-color"],[1,"w-full","aspect-square","border","border-inherit/20","transition-all","duration-75",3,"click"]],template:function(n,i){n&1&&(h(0,"div",0)(1,"div",1)(2,"h2",2),d(3,"[ DRUM MACHINE ]"),p(),h(4,"div",3)(5,"div",4)(6,"span"),d(7,"BPM:"),p(),h(8,"input",5),M("input",function(o){return i.handleBpmInput(o)}),p(),h(9,"div",6)(10,"button",7),M("click",function(){return i.changeBpm(1)}),d(11,"+"),p(),h(12,"button",7),M("click",function(){return i.changeBpm(-1)}),d(13,"-"),p()()(),h(14,"button",8),M("click",function(){return i.togglePlay()}),x(15,ey,2,0,"span")(16,ty,2,0,"span"),p(),h(17,"button",9),M("click",function(){return i.reset()}),d(18," [ CLEAR ] "),p()(),h(19,"div",4)(20,"button",10),M("click",function(){return i.toggleRecording()}),J(21,"span",11),d(22),p(),x(23,ny,2,0,"button",12),p()(),h(24,"div",13),W(25,ry,25,12,"div",14,Xv),p(),h(27,"div",15),d(28," [ STUDIO QUALITY SYNTHESIS ENGINE ACTIVE ] "),p()()),n&2&&(m("text-"+i.theme().primary+"-400"),c(8),R("value",i.bpm()),c(6),m("border-"+i.theme().primary+"-500"),c(),T(i.isPlaying()?15:16),c(5),Z("text-red-500",i.isRecording())("border-red-500",i.isRecording()),c(),Z("animate-pulse",i.isRecording()),c(),j(" ",i.isRecording()?"STOP REC":"REC WAV"," "),c(),T(i.recordedUrl()?23:-1),c(2),Q(i.tracks()))},dependencies:[de],styles:[".grid-cols-16[_ngcontent-%COMP%]{grid-template-columns:repeat(16,minmax(0,1fr))}input[type=range][_ngcontent-%COMP%]{-webkit-appearance:none;background:transparent}input[type=range][_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;height:10px;width:10px;background:currentColor;cursor:pointer;margin-top:-4px}input[type=range][_ngcontent-%COMP%]::-webkit-slider-runnable-track{width:100%;height:2px;cursor:pointer;background:currentColor;opacity:.5}"],changeDetection:0});var Ln=On;var oy=["audioPlayerA"],sy=["videoPlayerA"],ay=["audioPlayerB"],ly=["videoPlayerB"],cy=["fileInput"],uf=(t,e)=>e.title,uy=(t,e)=>e.audioSrc;function dy(t,e){t&1&&(y(0,"span"),d(1,"[ DJ ]"),E())}function fy(t,e){t&1&&(y(0,"span"),d(1,"[ PIANO EDITOR ]"),E())}function py(t,e){t&1&&(y(0,"span"),d(1,"[ DRUM MACHINE ]"),E())}function my(t,e){t&1&&(y(0,"span"),d(1,"[ IMAGE EDITOR ]"),E())}function hy(t,e){t&1&&(y(0,"span"),d(1,"[ VIDEO EDITOR ]"),E())}function gy(t,e){t&1&&(y(0,"span"),d(1,"[ NETWORKING ]"),E())}function vy(t,e){t&1&&(y(0,"span"),d(1,"[ PLAYER ]"),E())}function yy(t,e){t&1&&(y(0,"span"),d(1,"[ CLOSE CHATBOT ]"),E())}function Ey(t,e){t&1&&(y(0,"span"),d(1,"[ CHATBOT ]"),E())}function Cy(t,e){if(t&1){let n=V();y(0,"video",71,3),I("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("timeupdate",function(r){C(n);let o=g(2);return _(o.onTimeUpdate(r,"A"))})("loadedmetadata",function(r){C(n);let o=g(2);return _(o.onLoadedMetadata(r,"A"))})("ended",function(){C(n);let r=g(2);return _(r.onEnded("A"))}),E()}}function _y(t,e){if(t&1){let n=V();y(0,"div",72),I("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))}),ce(1,"div",73)(2,"div",74),E()}if(t&2){let n=g(2);we("transform",n.scratchRotationA()),Z("spinning",n.deckA().isPlaying&&!n.isScratchingA()),c(),m("bg-"+n.currentTheme().accent+"-600"),c(),m(n.djBgStone900)}}function Dy(t,e){t&1&&(y(0,"span"),d(1,"[ || ]"),E())}function by(t,e){t&1&&(y(0,"span"),d(1,"[ > ]"),E())}function wy(t,e){if(t&1&&ce(0,"div",75),t&2){let n=e.$index,i=g(2);Z("green",n/12<i.vuLevelA()&&n<8)("yellow",n/12<i.vuLevelA()&&n>=8&&n<10)("red",n/12<i.vuLevelA()&&n>=10)}}function Iy(t,e){if(t&1&&(y(0,"div",76),d(1,"[ SEARCHING... ]"),E()),t&2){let n=g(2);m("border-"+n.currentTheme().accent+"-500/50")}}function xy(t,e){if(t&1){let n=V();y(0,"div",79)(1,"p",80),d(2),E(),y(3,"div",81)(4,"p",82),d(5),E(),y(6,"div",83)(7,"button",84),I("click",function(){let r=C(n).$implicit,o=g(3);return _(o.loadTrackToDeck(r,"A"))}),d(8,"->A"),E(),y(9,"button",84),I("click",function(){let r=C(n).$implicit,o=g(3);return _(o.loadTrackToDeck(r,"B"))}),d(10,"->B"),E()()()()}if(t&2){let n=e.$implicit,i=g(3);m("hover:bg-"+i.currentTheme().neutral+"-700/50"),c(2),j("> ",n.title),c(2),m(i.djTextNeutral400Class),c(),j("-- ",n.artist),c(2),m(i.djHoverBgClass),c(2),m(i.djHoverBgClass)}}function Ty(t,e){if(t&1&&(y(0,"div",77),W(1,xy,11,10,"div",78,uf),E()),t&2){let n=g(2);m("border-"+n.currentTheme().accent+"-500/50"),c(),Q(n.searchResults())}}function My(t,e){if(t&1){let n=V();y(0,"button",87),I("click",function(){C(n);let r=g(3);return _(r.shareMix())}),d(1,"[ SHARE ]"),E()}if(t&2){let n=g(3);m(n.djHoverBgClass)}}function Sy(t,e){if(t&1&&(y(0,"div",63)(1,"a",85),d(2,"[ DOWNLOAD ]"),E(),x(3,My,2,2,"button",86),E()),t&2){let n=g(2);c(),m(n.djHoverBgClass),L("href",e,re),c(2),T(n.canShare()?3:-1)}}function Ay(t,e){t&1&&(ce(0,"span",88),y(1,"span",89),d(2,"[ ACTIVE ]"),E())}function Ny(t,e){if(t&1&&ce(0,"div",75),t&2){let n=e.$index,i=g(3);Z("green",n/12<i.vuLevelMic()&&n<8)("yellow",n/12<i.vuLevelMic()&&n>=8&&n<10)("red",n/12<i.vuLevelMic()&&n>=10)}}function Ry(t,e){if(t&1){let n=V();y(0,"div",65)(1,"div",90),W(2,Ny,1,6,"div",45,ye),E(),y(4,"div",41)(5,"span",91),d(6,"VOL"),E(),y(7,"input",92),I("input",function(r){C(n);let o=g(2);return _(o.onMicVolumeChange(r))}),E()(),y(8,"div",41)(9,"span",91),d(10,"HI"),E(),y(11,"input",92),I("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"High"))}),E()(),y(12,"div",41)(13,"span",91),d(14,"MID"),E(),y(15,"input",92),I("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"Mid"))}),E()(),y(16,"div",41)(17,"span",91),d(18,"LOW"),E(),y(19,"input",92),I("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"Low"))}),E()(),y(20,"div",41)(21,"span",91),d(22,"FX"),E(),y(23,"input",93),I("input",function(r){C(n);let o=g(2);return _(o.onMicFilterChange(r))}),E()()()}if(t&2){let n=g(2);c(),m(n.djBgStone800),c(),Q(n.vuBars),c(5),L("value",n.micVolume()),c(4),L("value",n.micEqHigh()),c(4),L("value",n.micEqMid()),c(4),L("value",n.micEqLow()),c(4),L("value",n.getNormalizedFilterValue(n.micFilterFreq()))}}function ky(t,e){if(t&1&&ce(0,"div",75),t&2){let n=e.$index,i=g(2);Z("green",n/12<i.vuLevelMaster()&&n<8)("yellow",n/12<i.vuLevelMaster()&&n>=8&&n<10)("red",n/12<i.vuLevelMaster()&&n>=10)}}function Py(t,e){if(t&1){let n=V();y(0,"video",71,4),I("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("timeupdate",function(r){C(n);let o=g(2);return _(o.onTimeUpdate(r,"B"))})("loadedmetadata",function(r){C(n);let o=g(2);return _(o.onLoadedMetadata(r,"B"))})("ended",function(){C(n);let r=g(2);return _(r.onEnded("B"))}),E()}}function Fy(t,e){if(t&1){let n=V();y(0,"div",72),I("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))}),ce(1,"div",94)(2,"div",74),E()}if(t&2){let n=g(2);we("transform",n.scratchRotationB()),Z("spinning",n.deckB().isPlaying&&!n.isScratchingB()),c(),m("bg-"+n.currentTheme().accent+"-600"),c(),m(n.djBgStone900)}}function Oy(t,e){t&1&&(y(0,"span"),d(1,"[ || ]"),E())}function Ly(t,e){t&1&&(y(0,"span"),d(1,"[ > ]"),E())}function Vy(t,e){if(t&1&&ce(0,"div",75),t&2){let n=e.$index,i=g(2);Z("green",n/12<i.vuLevelB()&&n<8)("yellow",n/12<i.vuLevelB()&&n>=8&&n<10)("red",n/12<i.vuLevelB()&&n>=10)}}function By(t,e){if(t&1){let n=V();y(0,"div",22)(1,"div",23)(2,"h2",24),d(3," [ DECK A ] "),E(),y(4,"div",25)(5,"div",26)(6,"div",27),x(7,Cy,2,0,"video",28)(8,_y,3,8,"div",29),E(),y(9,"div",30)(10,"h3",31),d(11),E(),y(12,"p",32),d(13),E()(),y(14,"div",33)(15,"input",34),I("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"A"))}),E(),y(16,"div",35)(17,"span"),d(18),E(),y(19,"span"),d(20),E()()(),y(21,"div",36)(22,"button",37),I("click",function(){C(n);let r=g();return _(r.togglePlayPause("A"))}),x(23,Dy,2,0,"span")(24,by,2,0,"span"),E(),y(25,"button",38),I("click",function(){C(n);let r=g();return _(r.toggleLoop("A"))}),y(26,"span"),d(27,"[ REPEAT ]"),E()()()(),y(28,"div",39)(29,"div",40)(30,"div",41)(31,"span"),d(32,"GAIN"),E(),y(33,"input",42),I("input",function(r){C(n);let o=g();return _(o.onGainChange(r,"A"))}),E()(),y(34,"div",41)(35,"span"),d(36,"HI"),E(),y(37,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","High"))}),E()(),y(38,"div",41)(39,"span"),d(40,"MID"),E(),y(41,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","Mid"))}),E()(),y(42,"div",41)(43,"span"),d(44,"LOW"),E(),y(45,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","Low"))}),E()(),y(46,"div",41)(47,"span"),d(48,"FX"),E(),y(49,"input",43),I("input",function(r){C(n);let o=g();return _(o.onFilterChange(r,"A"))}),E()()(),y(50,"div",44),W(51,wy,1,6,"div",45,ye),E(),y(53,"div",46)(54,"span",47),d(55,"PITCH"),E(),y(56,"input",48),I("input",function(r){C(n);let o=g();return _(o.onPitchChange(r,"A"))}),E()()()()(),y(57,"div",49)(58,"h2",50),d(59,"[ MIXER ]"),E(),y(60,"div",51)(61,"form",52),I("submit",function(r){C(n);let o=g();return _(o.performSearch(r))}),y(62,"div",53)(63,"input",54),I("input",function(r){C(n);let o=g();return _(o.onSearchQueryInput(r))}),E(),y(64,"button",55),d(65,"[SCN]"),E()()(),x(66,Iy,2,2,"div",56),x(67,Ty,3,2,"div",57),E(),y(68,"div",58)(69,"h3",47),d(70,"[ RECORDING ]"),E(),y(71,"div",59)(72,"button",60),I("click",function(){C(n);let r=g();return _(r.toggleRecording())}),y(73,"span",9),ce(74,"span",61),d(75),E()(),y(76,"span",62),d(77),E()(),x(78,Sy,4,4,"div",63),E(),y(79,"div",58)(80,"h3",64),d(81," [ MICROPHONE ] "),x(82,Ay,3,0),E(),y(83,"div",59)(84,"button",60),I("click",function(){C(n);let r=g();return _(r.toggleMicrophone())}),d(85),E()(),x(86,Ry,24,7,"div",65),E(),y(87,"div",66)(88,"div",44),W(89,ky,1,6,"div",45,ye),E(),y(91,"input",67),I("input",function(r){C(n);let o=g();return _(o.onCrossfadeChange(r))}),E(),y(92,"input",68),I("input",function(r){C(n);let o=g();return _(o.onVolumeChange(r))}),E()(),y(93,"div",69)(94,"span"),d(95,"DECK A"),E(),y(96,"span"),d(97,"MASTER"),E(),y(98,"span"),d(99,"DECK B"),E()(),y(100,"button",70),I("click",function(){C(n);let r=g();return _(r.openFilePickerForDeck("B"))}),d(101,"[ LOAD FILE ]"),E()(),y(102,"div",23)(103,"h2",24),d(104," [ DECK B ] "),E(),y(105,"div",25)(106,"div",26)(107,"div",27),x(108,Py,2,0,"video",28)(109,Fy,3,8,"div",29),E(),y(110,"div",30)(111,"h3",31),d(112),E(),y(113,"p",32),d(114),E()(),y(115,"div",33)(116,"input",34),I("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"B"))}),E(),y(117,"div",35)(118,"span"),d(119),E(),y(120,"span"),d(121),E()()(),y(122,"div",36)(123,"button",37),I("click",function(){C(n);let r=g();return _(r.togglePlayPause("B"))}),x(124,Oy,2,0,"span")(125,Ly,2,0,"span"),E(),y(126,"button",38),I("click",function(){C(n);let r=g();return _(r.toggleLoop("B"))}),y(127,"span"),d(128,"[ REPEAT ]"),E()()()(),y(129,"div",39)(130,"div",40)(131,"div",41)(132,"span"),d(133,"GAIN"),E(),y(134,"input",42),I("input",function(r){C(n);let o=g();return _(o.onGainChange(r,"B"))}),E()(),y(135,"div",41)(136,"span"),d(137,"HI"),E(),y(138,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","High"))}),E()(),y(139,"div",41)(140,"span"),d(141,"MID"),E(),y(142,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","Mid"))}),E()(),y(143,"div",41)(144,"span"),d(145,"LOW"),E(),y(146,"input",42),I("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","Low"))}),E()(),y(147,"div",41)(148,"span"),d(149,"FX"),E(),y(150,"input",43),I("input",function(r){C(n);let o=g();return _(o.onFilterChange(r,"B"))}),E()()(),y(151,"div",44),W(152,Vy,1,6,"div",45,ye),E(),y(154,"div",46)(155,"span",47),d(156,"PITCH"),E(),y(157,"input",48),I("input",function(r){C(n);let o=g();return _(o.onPitchChange(r,"B"))}),E()()()()()()}if(t&2){let n,i=g();m(i.djTextNeutral400Class),c(),m(i.djBorderClass),c(),m(i.djTextColorClass),c(5),T(i.deckA().track.videoSrc?7:8),c(3),m(i.mainTextColorClass()),L("title",i.deckA().track.title),c(),q(i.deckA().track.title),c(),m(i.djTextNeutral400Class),L("title",i.deckA().track.artist),c(),j("-- ",i.deckA().track.artist," --"),c(2),L("max",i.deckA().duration)("value",i.deckA().progress),c(),m(i.djTextNeutral400Class),c(2),q(i.formatTime(i.deckA().progress)),c(2),q(i.formatTime(i.deckA().duration)),c(2),m(i.djHoverBgClass),c(),T(i.deckA().isPlaying?23:24),c(2),m(i.deckA().loop?"text-black":""),c(3),m("border-l-2 border-"+i.currentTheme().accent+"-500/20"),c(5),L("value",i.deckA().gain),c(4),L("value",i.deckA().eqHigh),c(4),L("value",i.deckA().eqMid),c(4),L("value",i.deckA().eqLow),c(4),L("value",i.getNormalizedFilterValue(i.deckA().filterFreq)),c(),m(i.djBgStone800),c(),Q(i.vuBars),c(5),L("value",i.deckA().playbackRate),c(),m(i.djBorderClass),c(),m(i.djTextColorClass),c(5),m("focus:border-"+i.currentTheme().accent+"-500"),L("value",i.searchQuery()),c(),m(i.djHoverBgClass),c(2),T(i.isSearching()?66:-1),c(),T(i.searchResults().length>0?67:-1),c(),m(i.djBorderClass),c(4),m(i.djHoverBgClass),c(2),Z("recording",i.isRecording()),c(),j(" ",i.isRecording()?"STOP":"REC"," "),c(2),q(i.formatTime(i.recordingTime())),c(),T((n=i.recordedMixUrl())?78:-1,n),c(),m(i.djBorderClass),c(3),T(i.micEnabled()?82:-1),c(2),m(i.djHoverBgClass),c(),j(" ",i.micEnabled()?"DISABLE":"ENABLE"," "),c(),T(i.micEnabled()?86:-1),c(2),m(i.djBgStone800),c(),Q(i.vuBars),c(2),L("value",i.crossfade()),c(),L("value",i.volume()),c(8),m(i.djHoverBgClass),c(2),m(i.djBorderClass),c(),m(i.djTextColorClass),c(5),T(i.deckB().track.videoSrc?108:109),c(3),m(i.mainTextColorClass()),L("title",i.deckB().track.title),c(),q(i.deckB().track.title),c(),m(i.djTextNeutral400Class),L("title",i.deckB().track.artist),c(),j("-- ",i.deckB().track.artist," --"),c(2),L("max",i.deckB().duration)("value",i.deckB().progress),c(),m(i.djTextNeutral400Class),c(2),q(i.formatTime(i.deckB().progress)),c(2),q(i.formatTime(i.deckB().duration)),c(2),m(i.djHoverBgClass),c(),T(i.deckB().isPlaying?124:125),c(2),m(i.deckB().loop?"text-black":""),c(3),m("border-l-2 border-"+i.currentTheme().accent+"-500/20"),c(5),L("value",i.deckB().gain),c(4),L("value",i.deckB().eqHigh),c(4),L("value",i.deckB().eqMid),c(4),L("value",i.deckB().eqLow),c(4),L("value",i.getNormalizedFilterValue(i.deckB().filterFreq)),c(),m(i.djBgStone800),c(),Q(i.vuBars),c(5),L("value",i.deckB().playbackRate)}}function jy(t,e){if(t&1&&ce(0,"app-piano-roll",13),t&2){let n=g();L("theme",n.currentTheme())}}function Hy(t,e){if(t&1&&ce(0,"app-drum-machine",13),t&2){let n=g();L("theme",n.currentTheme())}}function Uy(t,e){t&1&&ce(0,"video",97,3)}function $y(t,e){if(t&1&&ce(0,"img",98),t&2){let n=g(2);L("src",n.deckA().track.albumArtUrl,re)}}function Gy(t,e){t&1&&(y(0,"span"),d(1,"[ || ]"),E())}function qy(t,e){t&1&&(y(0,"span"),d(1,"[ > ]"),E())}function zy(t,e){if(t&1&&(y(0,"div",76),d(1,"[ SEARCHING... ]"),E()),t&2){let n=g(2);m(n.mainBorderClass())}}function Wy(t,e){if(t&1){let n=V();y(0,"div",79)(1,"p",80),d(2),E(),y(3,"div",81)(4,"p",119),d(5),E(),y(6,"div",83)(7,"button",120),I("click",function(){let r=C(n).$implicit,o=g(3);return _(o.addTrackToPlaylist(r,!0))}),d(8,"[ PLAY ]"),E(),y(9,"button",120),I("click",function(){let r=C(n).$implicit,o=g(3);return _(o.addTrackToPlaylist(r,!1))}),d(10,"[ +QUEUE ]"),E()()()()}if(t&2){let n=e.$implicit,i=g(3);m("hover:bg-"+i.currentTheme().primary+"-900/50"),c(),m(i.mainTextColorClass()),c(),j("> ",n.title),c(3),j("-- ",n.artist),c(2),m(i.mainHoverBgClass()),c(2),m(i.mainHoverBgClass())}}function Qy(t,e){if(t&1&&(y(0,"div",117)(1,"h3",118),d(2,"[ Search Results ]"),E(),W(3,Wy,11,10,"div",78,uf),E()),t&2){let n=g(2);m(n.mainBorderClass()),c(3),Q(n.searchResults())}}function Yy(t,e){if(t&1){let n=V();y(0,"div",121),I("click",function(){let r=C(n).$index,o=g(2);return _(o.playTrackFromPlaylist(r))}),y(1,"p",80),d(2),E(),y(3,"p",119),d(4),E()()}if(t&2){let n=e.$implicit,i=e.$index,r=g(2);m(r.currentTrackIndex()===i?"bg-"+r.currentTheme().primary+"-900/50":""),c(),Z("text-white",r.currentTrackIndex()===i),c(),j("> ",n.title),c(2),j("-- ",n.artist)}}function Zy(t,e){t&1&&(y(0,"p",115),d(1,"[ Load a file or search to begin ]"),E())}function Ky(t,e){if(t&1){let n=V();y(0,"div",14)(1,"div",95)(2,"div",96),x(3,Uy,2,0,"video",97)(4,$y,1,1,"img",98),E(),ce(5,"app-audio-visualizer",99),y(6,"div",30)(7,"h3",100),d(8),E(),y(9,"p",101),d(10),E()(),y(11,"div",33)(12,"input",34),I("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"A"))}),E(),y(13,"div",102)(14,"span"),d(15),E(),y(16,"span"),d(17),E()()(),y(18,"div",103)(19,"button",104),I("click",function(){C(n);let r=g();return _(r.playPrevious())}),d(20,"[ << ]"),E(),y(21,"button",105),I("click",function(){C(n);let r=g();return _(r.togglePlayPause("A"))}),x(22,Gy,2,0,"span")(23,qy,2,0,"span"),E(),y(24,"button",104),I("click",function(){C(n);let r=g();return _(r.playNext())}),d(25,"[ >> ]"),E()(),y(26,"div",65)(27,"span",47),d(28,"VOL:"),E(),y(29,"input",106),I("input",function(r){C(n);let o=g();return _(o.onVolumeChange(r))}),E(),y(30,"button",107),I("click",function(){C(n);let r=g();return _(r.toggleEqPanel())}),d(31,"[EQ]"),E()()(),y(32,"div",108)(33,"form",52),I("submit",function(r){C(n);let o=g();return _(o.performSearch(r))}),y(34,"div",53)(35,"input",109),I("input",function(r){C(n);let o=g();return _(o.onSearchQueryInput(r))}),E(),y(36,"button",110),d(37,"[SCN]"),E()()(),x(38,zy,2,2,"div",56),x(39,Qy,5,2,"div",111),y(40,"div",112)(41,"h3",113),d(42,"[ Playlist ]"),E(),W(43,Yy,5,6,"div",114,uy),x(45,Zy,2,0,"p",115),E(),y(46,"button",116),I("click",function(){C(n);let r=g();return _(r.openFilePickerForDeck(null))}),d(47,"[LOAD FILE]"),E()()()}if(t&2){let n=g();c(2),m(n.mainBorderClass()),c(),T(n.deckA().track.videoSrc?3:4),c(2),L("analyserNode",n.getMasterAnalyser())("theme",n.currentTheme()),c(2),m(n.mainTextColorClass()),L("title",n.deckA().track.title),c(),q(n.deckA().track.title),c(),L("title",n.deckA().track.artist),c(),j("-- ",n.deckA().track.artist," --"),c(2),L("max",n.deckA().duration)("value",n.deckA().progress),c(3),q(n.formatTime(n.deckA().progress)),c(2),q(n.formatTime(n.deckA().duration)),c(2),m(n.mainHoverBgClass()),c(2),m(n.mainHoverBgClass()),c(),T(n.deckA().isPlaying?22:23),c(2),m(n.mainHoverBgClass()),c(3),m(n.mainTextColorClass()),c(2),L("value",n.volume()),c(),m(n.mainHoverBgClass()),c(5),m("focus:border-"+n.currentTheme().primary+"-500"),L("value",n.searchQuery()),c(),m(n.mainHoverBgClass()),c(2),T(n.isSearching()?38:-1),c(),T(n.searchResults().length>0?39:-1),c(),m(n.mainBorderClass()),c(),m(n.mainTextColorClass()),c(2),Q(n.playlist()),c(2),T(n.playlist().length===0?45:-1),c(),m(n.mainHoverBgClass())}}function Jy(t,e){if(t&1){let n=V();y(0,"app-image-editor",122),I("imageSelected",function(r){C(n);let o=g();return _(o.handleImageSelectedForAlbumArt(r))})("imageAnalysisRequest",function(r){C(n);let o=g();return o.imageToAnalyzeUrl.set(r),_(o.showChatbot.set(!0))}),E()}if(t&2){let n=g();L("initialPrompt",n.imageEditorInitialPrompt())("theme",n.currentTheme())}}function Xy(t,e){if(t&1&&ce(0,"app-video-editor",16),t&2){let n=g();L("imageForVideoGeneration",n.lastImageEditorImageUrl())("initialPrompt",n.videoEditorInitialPrompt())("theme",n.currentTheme())}}function eE(t,e){if(t&1&&ce(0,"app-networking",17),t&2){let n=g();L("initialSearchQuery",n.networkingLocationQuery())("theme",n.currentTheme())}}function tE(t,e){if(t&1){let n=V();y(0,"app-eq-panel",123),I("close",function(){C(n);let r=g();return _(r.toggleEqPanel())})("eqChange",function(r){C(n);let o=g();return _(o.onMasterEqChange(r))})("enhancementsChange",function(r){C(n);let o=g();return _(o.onEnhancementsChange(r))}),E()}if(t&2){let n=g();L("eqSettings",n.eqSettings())("enhancements",n.enhancements())("theme",n.currentTheme())}}function nE(t,e){if(t&1){let n=V();y(0,"app-chatbot",124),I("appCommand",function(r){C(n);let o=g();return _(o.handleChatbotCommand(r))})("close",function(){C(n);let r=g();return _(r.showChatbot.set(!1))})("imageAnalysisResult",function(r){C(n);let o=g();return o.imageAnalysisResult.set(r),_(o.imageToAnalyzeUrl.set(null))})("mapLocationResult",function(r){C(n);let o=g();return o.mapLocationResult.set(r),_(o.mapLocationQuery.set(null))}),E()}if(t&2){let n=g();L("theme",n.currentTheme())("imageToAnalyzeUrl",n.imageToAnalyzeUrl())("mapLocationQuery",n.mapLocationQuery())}}function iE(t,e){if(t&1){let n=V();y(0,"div",125),I("click",function(){C(n);let r=g();return _(r.showApplyAlbumArtModal.set(!1))}),E(),y(1,"div",126)(2,"div",127)(3,"h2",62),d(4,"[[ Apply Album Art ]]"),E(),y(5,"button",128),I("click",function(){C(n);let r=g();return _(r.showApplyAlbumArtModal.set(!1))}),d(6," [X] "),E()(),y(7,"p",129),d(8,"Where do you want to apply this image?"),E(),y(9,"div",130)(10,"button",131),I("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("player"))}),d(11,"[ CURRENT PLAYER TRACK ]"),E(),y(12,"button",131),I("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("A"))}),d(13,"[ DECK A ]"),E(),y(14,"button",131),I("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("B"))}),d(15,"[ DECK B ]"),E()()()}if(t&2){let n=g();c(),m(n.mainTextColorClass()),c(4),m(n.mainHoverBgClass()),c(5),m(n.mainHoverBgClass()),c(2),m(n.mainHoverBgClass()),c(2),m(n.mainHoverBgClass())}}function rE(t,e){if(t&1&&(y(0,"div",133),ce(1,"img",135),E()),t&2){let n=g(2);c(),m(n.mainBorderClass()),L("src",n.imageToAnalyzeUrl(),re)}}function oE(t,e){if(t&1){let n=V();y(0,"div",125),I("click",function(){C(n);let r=g();return _(r.showImageAnalysisModal.set(!1))}),E(),y(1,"div",132)(2,"div",127)(3,"h2",62),d(4,"[[ Image Analysis Result ]]"),E(),y(5,"button",128),I("click",function(){C(n);let r=g();return r.showImageAnalysisModal.set(!1),r.imageAnalysisResult.set(null),_(r.imageToAnalyzeUrl.set(null))}),d(6," [X] "),E()(),x(7,rE,2,3,"div",133),y(8,"div",134)(9,"p"),d(10),E()()()}if(t&2){let n=g();c(),m(n.mainTextColorClass()),c(4),m(n.mainHoverBgClass()),c(2),T(n.imageToAnalyzeUrl()?7:-1),c(),m(n.mainBorderClass()),c(2),q(n.imageAnalysisResult())}}function sE(t,e){if(t&1&&(y(0,"p",137),d(1),E()),t&2){let n=g(2);m(n.mainTextColorClass()),c(),j('Query: "',n.mapLocationQuery(),'"')}}function aE(t,e){if(t&1){let n=V();y(0,"div",125),I("click",function(){C(n);let r=g();return _(r.showMapResultsModal.set(!1))}),E(),y(1,"div",132)(2,"div",127)(3,"h2",62),d(4,"[[ Map Search Result ]]"),E(),y(5,"button",128),I("click",function(){C(n);let r=g();return r.showMapResultsModal.set(!1),r.mapLocationResult.set(null),_(r.mapLocationQuery.set(null))}),d(6," [X] "),E()(),x(7,sE,2,3,"p",136),y(8,"div",134)(9,"p"),d(10),E()()()}if(t&2){let n=g();c(),m(n.mainTextColorClass()),c(4),m(n.mainHoverBgClass()),c(2),T(n.mapLocationQuery()?7:-1),c(),m(n.mainBorderClass()),c(2),q(n.mapLocationResult())}}var Eo={track:{title:"NO SIGNAL",artist:"Load a track into deck",albumArtUrl:"https://picsum.photos/seed/placeholder/500/500",audioSrc:""},isPlaying:!1,progress:0,duration:0,playbackRate:1,filterFreq:2e4,loop:!1,gain:50,eqHigh:50,eqMid:50,eqLow:50,wasPlayingBeforeScratch:!1},cf=[{name:"Green Vintage",primary:"green",accent:"amber",neutral:"neutral",purple:"purple",red:"red",blue:"blue"},{name:"Blue Retro",primary:"blue",accent:"fuchsia",neutral:"zinc",purple:"purple",red:"red",blue:"blue"},{name:"Red Glitch",primary:"red",accent:"cyan",neutral:"stone",purple:"purple",red:"red",blue:"blue"},{name:"Amber Glow",primary:"amber",accent:"green",neutral:"neutral",purple:"purple",red:"red",blue:"blue"},{name:"Purple Haze",primary:"purple",accent:"lime",neutral:"slate",purple:"purple",red:"red",blue:"blue"},{name:"Cyan Wave",primary:"cyan",accent:"violet",neutral:"gray",purple:"purple",red:"red",blue:"blue"},{name:"Yellow Neon",primary:"yellow",accent:"red",neutral:"stone",purple:"purple",red:"red",blue:"blue"}],Vn=class Vn{constructor(){this.audioPlayerARef=he("audioPlayerA");this.videoPlayerARef=he("videoPlayerA");this.audioPlayerBRef=he("audioPlayerB");this.videoPlayerBRef=he("videoPlayerB");this.fileInputRef=he("fileInput");this.drumMachineRef=he(Ln);this.mainViewMode=w("player");this.showChatbot=w(!0);this.deckA=w(S({},Eo));this.deckB=w(S({},Eo));this.crossfade=w(0);this.loadingTargetDeck=w(null);this.isScratchingA=w(!1);this.isScratchingB=w(!1);this.scratchRotationA=w("");this.scratchRotationB=w("");this.scratchStateA={active:!1,lastAngle:0,platterElement:null};this.scratchStateB={active:!1,lastAngle:0,platterElement:null};this.SCRATCH_SENSITIVITY=2.5;this.playlist=w([]);this.currentTrackIndex=w(-1);this.currentPlayerTrack=X(()=>{let e=this.currentTrackIndex(),n=this.playlist();return e>=0&&e<n.length?n[e]:null});this.volume=w(.75);this.showEqPanel=w(!1);this.searchQuery=w("");this.isSearching=w(!1);this.searchResults=w([]);this.eqSettings=w([{label:"60Hz",value:50},{label:"310Hz",value:50},{label:"1KHz",value:50},{label:"6KHz",value:50},{label:"16KHz",value:50}]);this.enhancements=w({bassBoost:!1,surroundSound:!1});this.isRecording=w(!1);this.recordingTime=w(0);this.recordedMixUrl=w(null);this.recordedBlob=w(null);this.canShare=X(()=>!!(navigator.share&&this.recordedBlob()));this.vuLevelA=w(0);this.vuLevelB=w(0);this.vuLevelMaster=w(0);this.vuBars=Array(12).fill(0);this.micEnabled=w(!1);this.micVolume=w(50);this.micEqHigh=w(50);this.micEqMid=w(50);this.micEqLow=w(50);this.micFilterFreq=w(2e4);this.vuLevelMic=w(0);this.THEMES=cf;this.currentTheme=w(cf[0]);this.mainBorderClass=X(()=>`border-${this.currentTheme().primary}-400/50`);this.mainTextColorClass=X(()=>`text-${this.currentTheme().primary}-400`);this.mainHoverBgClass=X(()=>`hover:bg-${this.currentTheme().primary}-400 hover:text-black`);this.mainBg90050Class=X(()=>`bg-${this.currentTheme().primary}-900/50`);this.djBorderClass=X(()=>`border-${this.currentTheme().accent}-500/30`);this.djTextColorClass=X(()=>`text-${this.currentTheme().accent}-400`);this.djActiveBgClass=X(()=>`bg-${this.currentTheme().accent}-500`);this.djHoverBgClass=X(()=>`hover:bg-${this.currentTheme().accent}-500 hover:text-black`);this.djBg80050Class=X(()=>`bg-${this.currentTheme().neutral}-800/50`);this.djTextAccent300Class=X(()=>`text-${this.currentTheme().accent}-300`);this.djTextNeutral400Class=X(()=>`text-${this.currentTheme().neutral}-400`);this.djBgStone900=X(()=>`bg-${this.currentTheme().neutral}-900`);this.djBgStone700=X(()=>`bg-${this.currentTheme().neutral}-700`);this.eqNodesMaster=[];this.micSourceNode=null;this.micGainNode=null;this.micEqNodes=[];this.micFilterNode=null;this.micStream=null;this.mediaRecorder=null;this.recordedChunks=[];this.imageEditorInitialPrompt=w("");this.videoEditorInitialPrompt=w("");this.lastImageEditorImageUrl=w(null);this.showApplyAlbumArtModal=w(!1);this.imageToApplyAsAlbumArt=w(null);this.imageToAnalyzeUrl=w(null);this.imageAnalysisResult=w(null);this.showImageAnalysisModal=w(!1);this.mapLocationQuery=w(null);this.mapLocationResult=w(null);this.showMapResultsModal=w(!1);this.networkingLocationQuery=w(null);this.selectedArtistProfile=w(null);this.showArtistDetailModal=w(!1);this.aiService=N(Me);this.activeFileInputDeck=null;this.activeFileInputTrackPlayer=!1;this.initAudioContext(),this.initVUAnalysis(),ue(()=>{this.aiService.isAiAvailable||console.warn("AppComponent: AI services are not available.")}),ue(()=>{this.imageAnalysisResult()&&this.showImageAnalysisModal.set(!0)}),ue(()=>{this.mapLocationResult()&&this.showMapResultsModal.set(!0)}),ue(()=>{this.selectedArtistProfile()&&this.showArtistDetailModal.set(!0)}),this.loadTrackToDeck(Eo.track,"A")}ngOnDestroy(){this.stopAllAudio(),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close().catch(e=>console.error("Error closing audio context:",e)),this.vuIntervalId&&clearInterval(this.vuIntervalId),this.stopMediaStream()}initAudioContext(){this.audioContext||(this.audioContext=new AudioContext,this.gainNodeMaster=this.audioContext.createGain(),this.crossfadeNode=this.audioContext.createGain(),this.analyserMaster=this.audioContext.createAnalyser(),this.analyserA=this.audioContext.createAnalyser(),this.analyserB=this.audioContext.createAnalyser(),this.analyserMic=this.audioContext.createAnalyser(),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.crossfadeNode.connect(this.gainNodeMaster),this.setupMasterEq(this.gainNodeMaster),this.eqNodesMaster[this.eqNodesMaster.length-1].connect(this.analyserMaster),this.analyserMaster.connect(this.destinationNode),this.analyserMaster.connect(this.audioContext.destination),this.onCrossfadeChange({target:{value:this.crossfade()}}),this.onVolumeChange({target:{value:this.volume()}}),this.eqSettings().forEach((e,n)=>{this.onMasterEqChange(this.eqSettings())}))}setupMasterEq(e){this.eqNodesMaster=[];let n=[60,310,1e3,6e3,16e3];for(let i=0;i<n.length;i++){let r=this.audioContext.createBiquadFilter();r.type="peaking",r.frequency.value=n[i],r.Q.value=1,r.gain.value=0,this.eqNodesMaster.push(r)}if(this.eqNodesMaster.length>0){e.connect(this.eqNodesMaster[0]);for(let i=0;i<this.eqNodesMaster.length-1;i++)this.eqNodesMaster[i].connect(this.eqNodesMaster[i+1])}}initVUAnalysis(){this.vuIntervalId=window.setInterval(()=>{if(this.analyserA){let e=new Uint8Array(this.analyserA.fftSize);this.analyserA.getByteFrequencyData(e);let n=e.reduce((i,r)=>i+r,0)/e.length;this.vuLevelA.set(n/255)}if(this.analyserB){let e=new Uint8Array(this.analyserB.fftSize);this.analyserB.getByteFrequencyData(e);let n=e.reduce((i,r)=>i+r,0)/e.length;this.vuLevelB.set(n/255)}if(this.analyserMaster){let e=new Uint8Array(this.analyserMaster.fftSize);this.analyserMaster.getByteFrequencyData(e);let n=e.reduce((i,r)=>i+r,0)/e.length;this.vuLevelMaster.set(n/255)}if(this.analyserMic&&this.micEnabled()){let e=new Uint8Array(this.analyserMic.fftSize);this.analyserMic.getByteFrequencyData(e);let n=e.reduce((i,r)=>i+r,0)/e.length;this.vuLevelMic.set(n/255)}},100)}getMasterAnalyser(){return this.analyserMaster}openFilePickerForDeck(e){this.activeFileInputDeck=e,this.activeFileInputTrackPlayer=e===null,this.fileInputRef().nativeElement.click()}handleFileInput(e){let n=e.target.files?.[0];if(n){let i=URL.createObjectURL(n),r={title:n.name,artist:"Local File",albumArtUrl:"https://picsum.photos/seed/"+Math.random().toString(36).substring(7)+"/500/500",audioSrc:i,videoSrc:n.type.startsWith("video/")?i:void 0};this.activeFileInputDeck==="A"?this.loadTrackToDeck(r,"A"):this.activeFileInputDeck==="B"?this.loadTrackToDeck(r,"B"):this.activeFileInputTrackPlayer&&this.addTrackToPlaylist(r,!0)}this.fileInputRef()&&(this.fileInputRef().nativeElement.value=""),this.activeFileInputDeck=null,this.activeFileInputTrackPlayer=!1}loadTrackToDeck(e,n){let i=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),r=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();if((n==="A"?this.deckA():this.deckB()).isPlaying&&(i?.nativeElement.pause(),r?.nativeElement&&r.nativeElement.pause()),!i){console.error(`Audio player reference for deck ${n} not found.`);return}this.loadingTargetDeck.set(n);let s=A(S({},Eo),{track:e,isPlaying:!1});n==="A"?(this.deckA.set(s),i.nativeElement.src=e.audioSrc,this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.src=e.videoSrc||"")):(this.deckB.set(s),i.nativeElement.src=e.audioSrc,this.videoPlayerBRef()?.nativeElement&&(this.videoPlayerBRef().nativeElement.src=e.videoSrc||""))}togglePlayPause(e="player"){let n=e==="A"?this.audioPlayerARef():e==="B"?this.audioPlayerBRef():this.audioPlayerARef(),i=e==="A"?this.videoPlayerARef():e==="B"?this.videoPlayerBRef():this.videoPlayerARef(),r=e==="A"?this.deckA():e==="B"?this.deckB():this.deckA();if(!n||!n.nativeElement.src){console.warn(`No track loaded for deck ${e}.`);return}this.audioContext.state==="suspended"&&this.audioContext.resume().catch(a=>console.error("Error resuming AudioContext:",a));let o=!r.isPlaying;if(o){let a=n.nativeElement.__sourceNode;a||(a=this.audioContext.createMediaElementSource(n.nativeElement),n.nativeElement.__sourceNode=a,e==="A"?(this.gainNodeA=this.audioContext.createGain(),a.connect(this.gainNodeA),this.gainNodeA.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode)):e==="B"?(this.gainNodeB=this.audioContext.createGain(),a.connect(this.gainNodeB),this.gainNodeB.connect(this.analyserB),this.analyserB.connect(this.crossfadeNode)):(this.gainNodeA=this.audioContext.createGain(),a.connect(this.gainNodeA),a.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode))),n.nativeElement.play().catch(l=>console.error(`Error playing deck ${e}:`,l)),i?.nativeElement&&i.nativeElement.play().catch(l=>console.error(`Error playing video for deck ${e}:`,l))}else n.nativeElement.pause(),i?.nativeElement&&i.nativeElement.pause();let s=a=>A(S({},a),{isPlaying:o});e==="A"||e==="player"?this.deckA.update(s):this.deckB.update(s)}onTimeUpdate(e,n){let i=e.target,r=o=>A(S({},o),{progress:i.currentTime});n==="A"?this.deckA.update(r):this.deckB.update(r)}onLoadedMetadata(e,n){let i=e.target,r=o=>A(S({},o),{duration:i.duration,progress:0});if(n==="A"){this.deckA.update(r),this.gainNodeA&&(this.gainNodeA.gain.value=this.mapSliderToGain(this.deckA().gain));let o=i.__sourceNode;o||(o=this.audioContext.createMediaElementSource(i),i.__sourceNode=o,this.gainNodeA=this.audioContext.createGain(),o.connect(this.gainNodeA),this.gainNodeA.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode)),this.onEqChange({target:{value:this.deckA().eqHigh}},"A","High"),this.onEqChange({target:{value:this.deckA().eqMid}},"A","Mid"),this.onEqChange({target:{value:this.deckA().eqLow}},"A","Low"),this.onFilterChange({target:{value:this.getNormalizedFilterValue(this.deckA().filterFreq)}},"A")}else{this.deckB.update(r),this.gainNodeB&&(this.gainNodeB.gain.value=this.mapSliderToGain(this.deckB().gain));let o=i.__sourceNode;o||(o=this.audioContext.createMediaElementSource(i),i.__sourceNode=o,this.gainNodeB=this.audioContext.createGain(),o.connect(this.gainNodeB),this.gainNodeB.connect(this.analyserB),this.analyserB.connect(this.crossfadeNode)),this.onEqChange({target:{value:this.deckB().eqHigh}},"B","High"),this.onEqChange({target:{value:this.deckB().eqMid}},"B","Mid"),this.onEqChange({target:{value:this.deckB().eqLow}},"B","Low"),this.onFilterChange({target:{value:this.getNormalizedFilterValue(this.deckB().filterFreq)}},"B")}this.loadingTargetDeck.set(null)}onEnded(e){let n=i=>A(S({},i),{isPlaying:!1,progress:0});e==="A"?(this.deckA.update(i=>i.loop?A(S({},i),{progress:0,isPlaying:!0}):n(i)),this.deckA().loop&&(this.audioPlayerARef().nativeElement.currentTime=0,this.audioPlayerARef().nativeElement.play(),this.videoPlayerARef()?.nativeElement.play())):(this.deckB.update(i=>i.loop?A(S({},i),{progress:0,isPlaying:!0}):n(i)),this.deckB().loop&&(this.audioPlayerBRef().nativeElement.currentTime=0,this.audioPlayerBRef().nativeElement.play(),this.videoPlayerBRef()?.nativeElement.play())),this.mainViewMode()==="player"&&e==="A"&&!this.deckA().loop&&this.playNext()}onProgressChange(e,n){let i=parseInt(e.target.value,10),r=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),o=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();r?.nativeElement&&(r.nativeElement.currentTime=i,o?.nativeElement&&(o.nativeElement.currentTime=i));let s=a=>A(S({},a),{progress:i});n==="A"?this.deckA.update(s):this.deckB.update(s)}toggleLoop(e){let n=i=>A(S({},i),{loop:!i.loop});e==="A"?this.deckA.update(n):this.deckB.update(n)}addTrackToPlaylist(e,n=!1){if(this.playlist.update(i=>[...i,e]),this.searchResults.set([]),n){let i=this.playlist().length-1;this.playTrackFromPlaylist(i)}}playTrackFromPlaylist(e){let n=this.playlist();if(e>=0&&e<n.length){this.currentTrackIndex.set(e);let i=n[e];this.loadTrackToDeck(i,"A"),this.deckA().isPlaying||this.togglePlayPause("A")}}playNext(){let e=this.playlist();if(e.length===0)return;let n=(this.currentTrackIndex()+1)%e.length;this.playTrackFromPlaylist(n)}playPrevious(){let e=this.playlist();if(e.length===0)return;let n=this.currentTrackIndex()-1;n<0&&(n=e.length-1),this.playTrackFromPlaylist(n)}onVolumeChange(e){let n=parseFloat(e.target.value);this.volume.set(n),this.gainNodeMaster&&(this.gainNodeMaster.gain.value=n)}toggleEqPanel(){this.showEqPanel.update(e=>!e)}onMasterEqChange(e){this.eqSettings.set(e),e.forEach((n,i)=>{this.eqNodesMaster[i]&&(this.eqNodesMaster[i].gain.value=this.mapSliderToDb(n.value))})}onEnhancementsChange(e){this.enhancements.set(e),console.log("Enhancements updated:",e)}mapSliderToGain(e){return e/100}onGainChange(e,n){let i=parseInt(e.target.value,10),r=this.mapSliderToGain(i),o=s=>A(S({},s),{gain:i});n==="A"?(this.deckA.update(o),this.gainNodeA&&(this.gainNodeA.gain.value=r)):(this.deckB.update(o),this.gainNodeB&&(this.gainNodeB.gain.value=r))}mapSliderToDb(e){return(e-50)*.48}onEqChange(e,n,i){let r=parseInt(e.target.value,10),o=this.mapSliderToDb(r),s=a=>A(S({},a),{[`eq${i}`]:r});n==="A"?this.deckA.update(s):this.deckB.update(s)}getNormalizedFilterValue(e){return Math.log10(e/20)/Math.log10(1e3)}mapFilterSliderToFreq(e){let r=Math.log10(20),o=Math.log10(2e4),s=r+e*(o-r);return Math.pow(10,s)}onFilterChange(e,n){let i=parseFloat(e.target.value),r=this.mapFilterSliderToFreq(i),o=s=>A(S({},s),{filterFreq:r});n==="A"?this.deckA.update(o):this.deckB.update(o)}onPitchChange(e,n){let i=parseFloat(e.target.value),r=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),o=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();r?.nativeElement&&(r.nativeElement.playbackRate=i,o?.nativeElement&&(o.nativeElement.playbackRate=i));let s=a=>A(S({},a),{playbackRate:i});n==="A"?this.deckA.update(s):this.deckB.update(s)}onCrossfadeChange(e){let n=parseFloat(e.target.value);this.crossfade.set(n);let i=Math.cos((n+1)/2*(Math.PI/2)),r=Math.cos((1-n)/2*(Math.PI/2));this.gainNodeA&&(this.gainNodeA.gain.value=i),this.gainNodeB&&(this.gainNodeB.gain.value=r)}getElementAngle(e,n,i){let r=e.getBoundingClientRect(),o=r.left+r.width/2,s=r.top+r.height/2;return Math.atan2(i-s,n-o)}onScratchStart(e,n){let i=e.currentTarget.querySelector(".vinyl-platter");if(!i)return;e.preventDefault();let r,o;e instanceof TouchEvent?(r=e.touches[0].clientX,o=e.touches[0].clientY):(r=e.clientX,o=e.clientY);let s=n==="A"?this.deckA():this.deckB(),a=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),l=n==="A"?this.videoPlayerARef():this.videoPlayerBRef(),u=n==="A"?this.scratchStateA:this.scratchStateB;u.active=!0,u.platterElement=i,u.lastAngle=this.getElementAngle(i,r,o),u.initialTouchX=r,u.initialTouchY=o,a?.nativeElement&&s.isPlaying?(a.nativeElement.pause(),l?.nativeElement&&l.nativeElement.pause(),n==="A"?this.deckA.update(f=>A(S({},f),{isPlaying:!1,wasPlayingBeforeScratch:!0})):this.deckB.update(f=>A(S({},f),{isPlaying:!1,wasPlayingBeforeScratch:!0}))):a?.nativeElement&&(n==="A"?this.deckA.update(f=>A(S({},f),{wasPlayingBeforeScratch:!1})):this.deckB.update(f=>A(S({},f),{wasPlayingBeforeScratch:!1}))),n==="A"?this.isScratchingA.set(!0):this.isScratchingB.set(!0)}onScratch(e){if(!this.scratchStateA.active&&!this.scratchStateB.active)return;e.preventDefault();let n,i;if(e instanceof TouchEvent){if(e.touches.length===0)return;n=e.touches[0].clientX,i=e.touches[0].clientY}else n=e.clientX,i=e.clientY;this.scratchStateA.active&&this.scratchStateA.platterElement&&this.applyScratch(this.scratchStateA,n,i,"A"),this.scratchStateB.active&&this.scratchStateB.platterElement&&this.applyScratch(this.scratchStateB,n,i,"B")}applyScratch(e,n,i,r){if(!e.platterElement)return;let o=r==="A"?this.audioPlayerARef():this.audioPlayerBRef(),s=r==="A"?this.videoPlayerARef():this.videoPlayerBRef(),a=this.getElementAngle(e.platterElement,n,i),l=a-e.lastAngle;l>Math.PI&&(l-=2*Math.PI),l<-Math.PI&&(l+=2*Math.PI);let f=parseInt(e.platterElement.style.transform.replace("rotate(","").replace("deg)","")||"0",10)+l*180/Math.PI;if((r==="A"?this.scratchRotationA:this.scratchRotationB).set(`rotate(${f}deg)`),o?.nativeElement?.src){let b=l*this.SCRATCH_SENSITIVITY;o.nativeElement.currentTime+=b,s?.nativeElement&&(s.nativeElement.currentTime+=b)}e.lastAngle=a}onScratchEnd(){this.isScratchingA()||this.isScratchingB(),this.scratchStateA.active&&(this.scratchStateA.active=!1,this.scratchStateA.platterElement=null,this.isScratchingA.set(!1),this.deckA().wasPlayingBeforeScratch&&this.audioPlayerARef()?.nativeElement&&!this.deckA().isPlaying&&this.togglePlayPause("A")),this.scratchStateB.active&&(this.scratchStateB.active=!1,this.scratchStateB.platterElement=null,this.isScratchingB.set(!1),this.deckB().wasPlayingBeforeScratch&&this.audioPlayerBRef()?.nativeElement&&!this.deckB().isPlaying&&this.togglePlayPause("B"))}toggleRecording(){this.isRecording()?this.stopMasterRecording():this.startMasterRecording()}startMasterRecording(){if(!this.audioContext||!this.destinationNode){console.error("AudioContext or MediaStreamAudioDestinationNode not initialized.");return}if(!this.isRecording()){this.recordedChunks=[],this.recordedMixUrl.set(null),this.recordedBlob.set(null),this.recordingTime.set(0);try{this.mediaRecorder=new MediaRecorder(this.destinationNode.stream,{mimeType:"audio/webm; codecs=opus"}),this.mediaRecorder.ondataavailable=e=>{e.data.size>0&&this.recordedChunks.push(e.data)},this.mediaRecorder.onstop=()=>{let e=new Blob(this.recordedChunks,{type:"audio/webm"});this.recordedBlob.set(e),this.recordedMixUrl.set(URL.createObjectURL(e)),console.log("Master recording stopped. Blob created."),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.onerror=e=>{console.error("Master MediaRecorder error:",e.error),this.isRecording.set(!1),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.start(),this.isRecording.set(!0),this.recordingIntervalId=window.setInterval(()=>this.recordingTime.update(e=>e+1),1e3),console.log("Master recording started.")}catch(e){console.error("Error starting Master MediaRecorder:",e),this.isRecording.set(!1)}}}stopMasterRecording(){this.mediaRecorder&&this.isRecording()&&(this.mediaRecorder.stop(),this.isRecording.set(!1),console.log("Attempting to stop master recording..."))}async shareMix(){let e=this.recordedBlob();if(!e||!this.canShare()){console.warn("No recorded mix available or Web Share API not supported.");return}let n=new File([e],"aura-mix.webm",{type:e.type});try{await navigator.share({files:[n],title:"Aura Mix",text:"Check out my latest mix from Aura Music Player!"}),console.log("Mix shared successfully.")}catch(i){console.error("Error sharing mix:",i)}}async toggleMicrophone(){this.micEnabled()?this.stopMicrophone():await this.startMicrophone()}async startMicrophone(){if(!this.micEnabled())try{this.micStream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.micSourceNode=this.audioContext.createMediaStreamSource(this.micStream),this.micGainNode=this.audioContext.createGain(),this.micFilterNode=this.audioContext.createBiquadFilter(),this.micFilterNode.type="lowpass",this.micFilterNode.frequency.value=this.micFilterFreq();let e=[250,2500,1e4];this.micEqNodes=e.map(n=>{let i=this.audioContext.createBiquadFilter();return i.type="peaking",i.frequency.value=n,i.Q.value=1,i.gain.value=0,i}),this.micSourceNode.connect(this.micGainNode),this.micGainNode.connect(this.micEqNodes[0]),this.micEqNodes[0].connect(this.micEqNodes[1]),this.micEqNodes[1].connect(this.micEqNodes[2]),this.micEqNodes[2].connect(this.micFilterNode),this.micFilterNode.connect(this.analyserMic),this.analyserMic.connect(this.gainNodeMaster),this.onMicVolumeChange({target:{value:this.micVolume()}}),this.onMicEqChange({target:{value:this.micEqHigh()}},"High"),this.onMicEqChange({target:{value:this.micEqMid()}},"Mid"),this.onMicEqChange({target:{value:this.micEqLow()}},"Low"),this.onMicFilterChange({target:{value:this.getNormalizedFilterValue(this.micFilterFreq())}}),this.micEnabled.set(!0),console.log("Microphone enabled.")}catch(e){console.error("Error enabling microphone:",e),this.micEnabled.set(!1),alert("Failed to access microphone. Please ensure permissions are granted.")}}stopMicrophone(){this.micStream&&(this.micStream.getTracks().forEach(e=>e.stop()),this.micStream=null),this.micSourceNode&&this.micSourceNode.disconnect(),this.micGainNode&&this.micGainNode.disconnect(),this.micFilterNode&&this.micFilterNode.disconnect(),this.micEqNodes.forEach(e=>e.disconnect()),this.analyserMic&&this.analyserMic.disconnect(),this.micSourceNode=null,this.micGainNode=null,this.micFilterNode=null,this.micEqNodes=[],this.micEnabled.set(!1),this.vuLevelMic.set(0),console.log("Microphone disabled.")}onMicVolumeChange(e){let n=parseInt(e.target.value,10);this.micVolume.set(n),this.micGainNode&&(this.micGainNode.gain.value=this.mapSliderToGain(n))}onMicEqChange(e,n){let i=parseInt(e.target.value,10),r=this.mapSliderToDb(i);n==="High"&&this.micEqNodes[2]?(this.micEqHigh.set(i),this.micEqNodes[2].gain.value=r):n==="Mid"&&this.micEqNodes[1]?(this.micEqMid.set(i),this.micEqNodes[1].gain.value=r):n==="Low"&&this.micEqNodes[0]&&(this.micEqLow.set(i),this.micEqNodes[0].gain.value=r)}onMicFilterChange(e){let n=parseFloat(e.target.value),i=this.mapFilterSliderToFreq(n);this.micFilterFreq.set(i),this.micFilterNode&&(this.micFilterNode.frequency.value=i)}toggleMainViewMode(){let e=["player","dj","piano-roll","drum-machine","image-editor","video-editor","networking"],n=this.mainViewMode(),r=(e.indexOf(n)+1)%e.length;this.mainViewMode.set(e[r]),this.stopAllAudio(),e[r]!=="image-editor"&&this.imageEditorInitialPrompt.set(""),e[r]!=="video-editor"&&this.videoEditorInitialPrompt.set(""),e[r]!=="networking"&&(this.networkingLocationQuery.set(null),this.selectedArtistProfile.set(null)),this.lastImageEditorImageUrl.set(null),e[r]==="dj"&&(this.audioPlayerARef()?.nativeElement.load(),this.audioPlayerBRef()?.nativeElement.load(),this.deckA().isPlaying&&this.togglePlayPause("A"),this.deckB().isPlaying&&this.togglePlayPause("B"))}toggleChatbot(){this.showChatbot.update(e=>!e),this.showChatbot()||(this.imageToAnalyzeUrl.set(null),this.imageAnalysisResult.set(null),this.mapLocationQuery.set(null),this.mapLocationResult.set(null),this.showImageAnalysisModal.set(!1),this.showMapResultsModal.set(!1),this.networkingLocationQuery.set(null),this.selectedArtistProfile.set(null),this.showArtistDetailModal.set(!1))}handleChatbotCommand(e){console.log("AppComponent: Received chatbot command:",e);let{action:n,parameters:i,aiContext:r}=e;switch(n){case"SET_THEME":let o=i.theme,s=this.THEMES.find(a=>a.name.toLowerCase()===o.toLowerCase());s?(this.currentTheme.set(s),console.log(`Theme set to: ${s.name}`)):console.warn(`Theme "${o}" not found.`);break;case"PLAY_TRACK":if(i.title){let a=this.playlist().find(l=>l.title.toLowerCase().includes(i.title.toLowerCase()))||this.searchResults().find(l=>l.title.toLowerCase().includes(i.title.toLowerCase()));if(a){let l=this.playlist().indexOf(a);l!==-1?this.playTrackFromPlaylist(l):this.addTrackToPlaylist(a,!0)}else console.warn(`Track with title "${i.title}" not found.`)}break;case"PAUSE_TRACK":this.deckA().isPlaying&&this.togglePlayPause("A");break;case"STOP_TRACK":this.audioPlayerARef()?.nativeElement.pause(),this.audioPlayerARef()?.nativeElement&&(this.audioPlayerARef().nativeElement.currentTime=0),this.videoPlayerARef()?.nativeElement.pause(),this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.currentTime=0),this.deckA.update(a=>A(S({},a),{isPlaying:!1,progress:0}));break;case"NEXT_TRACK":this.playNext();break;case"PREVIOUS_TRACK":this.playPrevious();break;case"TOGGLE_LOOP":this.toggleLoop("A");break;case"LOAD_TRACK":console.warn("LOAD_TRACK command not fully implemented for chatbot direct loading.");break;case"GENERATE_IMAGE":i.prompt&&(this.imageEditorInitialPrompt.set(i.prompt),this.mainViewMode.set("image-editor"),this.showChatbot.set(!1));break;case"GENERATE_VIDEO":i.prompt&&(this.videoEditorInitialPrompt.set(i.prompt),this.mainViewMode.set("video-editor"),this.showChatbot.set(!1));break;case"ANALYZE_IMAGE":i.imageUrl&&(this.imageToAnalyzeUrl.set(i.imageUrl),this.showChatbot.set(!0));break;case"FIND_ON_MAP":i.query&&(this.mapLocationQuery.set(i.query),this.showChatbot.set(!0));break;case"FIND_ARTISTS":i.location&&(this.networkingLocationQuery.set(i.location),this.mainViewMode.set("networking"),this.showChatbot.set(!1));break;case"VIEW_ARTIST_PROFILE":if(i.name){let a=it.filter(l=>l.name.toLowerCase()===i.name.toLowerCase()||i.genre&&l.genres.some(u=>u.toLowerCase().includes(i.genre.toLowerCase()))||i.location&&l.location.toLowerCase().includes(i.location.toLowerCase()));a.length>0?(this.selectedArtistProfile.set(a[0]),this.mainViewMode.set("networking"),this.showChatbot.set(!1)):console.warn(`Artist "${i.name}" not found in mock data or no matching criteria.`)}break;case"START_DRUM":this.mainViewMode.set("drum-machine"),setTimeout(()=>this.drumMachineRef()?.start(),0);break;case"STOP_DRUM":this.mainViewMode.set("drum-machine"),setTimeout(()=>this.drumMachineRef()?.stop(),0);break;case"SET_BPM":i.bpm&&(this.mainViewMode.set("drum-machine"),setTimeout(()=>this.drumMachineRef()?.setBpm(parseInt(i.bpm,10)),0));break;case"CLEAR_BEAT":this.mainViewMode.set("drum-machine"),setTimeout(()=>this.drumMachineRef()?.clearPattern(),0);break;case"GENERATE_BEAT":if(i.pattern){this.mainViewMode.set("drum-machine");try{let a=typeof i.pattern=="string"?JSON.parse(i.pattern):i.pattern;setTimeout(()=>this.drumMachineRef()?.setPattern(a),0)}catch(a){console.error("Failed to parse drum pattern:",a)}}break;case"TOGGLE_TRACK_MUTE":if(i.track){this.mainViewMode.set("drum-machine");let a=i.mute==="true"||i.mute===!0;setTimeout(()=>this.drumMachineRef()?.setTrackMute(i.track,a),0)}break;case"TOGGLE_TRACK_SOLO":if(i.track){this.mainViewMode.set("drum-machine");let a=i.solo==="true"||i.solo===!0;setTimeout(()=>this.drumMachineRef()?.setTrackSolo(i.track,a),0)}break;default:console.warn(`Unknown chatbot command: ${n}`);break}}handleImageSelectedForAlbumArt(e){this.imageToApplyAsAlbumArt.set(e),this.showApplyAlbumArtModal.set(!0),this.lastImageEditorImageUrl.set(e),this.showChatbot.set(!1)}applyImageAsAlbumArt(e){let n=this.imageToApplyAsAlbumArt();n&&(e==="player"&&this.currentPlayerTrack()?(this.playlist.update(i=>i.map((r,o)=>o===this.currentTrackIndex()?A(S({},r),{albumArtUrl:n}):r)),this.deckA.update(i=>A(S({},i),{track:A(S({},i.track),{albumArtUrl:n})}))):e==="A"?this.deckA.update(i=>A(S({},i),{track:A(S({},i.track),{albumArtUrl:n})})):e==="B"&&this.deckB.update(i=>A(S({},i),{track:A(S({},i.track),{albumArtUrl:n})})),this.showApplyAlbumArtModal.set(!1),this.imageToApplyAsAlbumArt.set(null))}stopAllAudio(){this.audioPlayerARef()?.nativeElement.pause(),this.audioPlayerARef()?.nativeElement&&(this.audioPlayerARef().nativeElement.currentTime=0),this.videoPlayerARef()?.nativeElement.pause(),this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.currentTime=0),this.deckA.update(e=>A(S({},e),{isPlaying:!1,progress:0})),this.audioPlayerBRef()?.nativeElement.pause(),this.audioPlayerBRef()?.nativeElement&&(this.audioPlayerBRef().nativeElement.currentTime=0),this.videoPlayerBRef()?.nativeElement.pause(),this.videoPlayerBRef()?.nativeElement&&(this.videoPlayerBRef().nativeElement.currentTime=0),this.deckB.update(e=>A(S({},e),{isPlaying:!1,progress:0})),this.stopMicrophone()}stopMediaStream(){this.micStream&&(this.micStream.getTracks().forEach(e=>e.stop()),this.micStream=null)}formatTime(e){if(isNaN(e)||e<0)return"00:00";let n=Math.floor(e/60),i=Math.floor(e%60);return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}randomizeTheme(){let e=this.currentTheme();for(;e===this.currentTheme();)e=this.THEMES[Math.floor(Math.random()*this.THEMES.length)];this.currentTheme.set(e)}};Vn.\u0275fac=function(n){return new(n||Vn)},Vn.\u0275cmp=se({type:Vn,selectors:[["app-root"]],viewQuery:function(n,i){n&1&&(pe(i.audioPlayerARef,oy,5),pe(i.videoPlayerARef,sy,5),pe(i.audioPlayerBRef,ay,5),pe(i.videoPlayerBRef,ly,5),pe(i.fileInputRef,cy,5),pe(i.drumMachineRef,Ln,5)),n&2&&ke(6)},hostBindings:function(n,i){n&1&&I("mousemove",function(o){return i.onScratch(o)},xn)("touchmove",function(o){return i.onScratch(o)},xn)("mouseup",function(){return i.onScratchEnd()},xn)("touchend",function(){return i.onScratchEnd()},xn)},decls:40,vars:20,consts:[["audioPlayerA",""],["audioPlayerB",""],["fileInput",""],["videoPlayerA",""],["videoPlayerB",""],[1,"bg-black","text-green-400","font-mono","min-h-screen","flex","items-center","justify-center","p-2","sm:p-4","relative","overflow-hidden"],[1,"w-full","max-w-7xl","border-2","bg-black/80","backdrop-blur-sm","z-10","flex","flex-col","transition-colors","duration-500"],[1,"flex","justify-between","items-center","p-2","sm:p-4","border-b-2","border-inherit"],[1,"text-xl","sm:text-2xl"],[1,"flex","items-center","gap-2"],[1,"p-2","border","border-inherit","hover:text-black","text-sm","transition-colors",3,"click"],[1,"p-2","sm:p-4"],[1,"flex","flex-col","lg:flex-row","gap-4",3,"class"],[3,"theme"],[1,"flex","flex-col","md:flex-row","gap-4"],[3,"initialPrompt","theme"],[3,"imageForVideoGeneration","initialPrompt","theme"],[3,"initialSearchQuery","theme"],[3,"eqSettings","enhancements","theme"],["preload","auto",3,"timeupdate","loadedmetadata","ended"],["type","file","accept","audio/*,video/*",1,"hidden",3,"change"],[3,"theme","imageToAnalyzeUrl","mapLocationQuery"],[1,"flex","flex-col","lg:flex-row","gap-4"],[1,"flex-1","p-2","space-y-3"],[1,"text-center","text-lg","flex","items-center","justify-center","gap-2"],[1,"flex","gap-4"],[1,"flex-1","space-y-3"],[1,"w-full","aspect-square","mx-auto","flex","items-center","justify-center","bg-black","relative"],["muted","","playsinline","","preload","auto",1,"w-full","h-full","object-cover"],[1,"vinyl-platter",3,"spinning","transform"],[1,"text-center"],[1,"text-base","truncate",3,"title"],[1,"text-xs","truncate",3,"title"],[1,"space-y-1"],["type","range","min","0",1,"w-full","h-1","aura-slider",3,"input","max","value"],[1,"flex","justify-between","text-xs"],[1,"flex","items-center","justify-around"],[1,"w-16","h-10","flex","items-center","justify-center","border-2",3,"click"],[1,"p-2","border","hover:text-black","text-xs",3,"click"],[1,"flex","items-center","gap-4","pl-4"],[1,"flex","flex-col","items-center","justify-between","h-full","space-y-2","text-sm"],[1,"flex","flex-col","items-center"],["type","range","min","0","max","100",1,"w-20","aura-slider",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"w-20","aura-slider",3,"input","value"],[1,"vu-meter"],[1,"vu-bar",3,"green","yellow","red"],[1,"flex","flex-col","items-center","justify-center","space-y-2"],[1,"text-sm"],["type","range","min","0.5","max","2","step","0.01",1,"aura-slider","vertical-slider",3,"input","value"],[1,"w-full","lg:w-[450px]","p-2","space-y-3","flex","flex-col","justify-between"],[1,"text-center","text-lg"],[1,"space-y-2"],[3,"submit"],[1,"flex","space-x-2"],["type","text","placeholder","Search online...",1,"flex-grow","border","text-neutral-200","p-1","text-sm","focus:ring-500",3,"input","value"],["type","submit",1,"p-2","border","hover:text-black","text-sm"],[1,"text-center","text-sm","p-2","border","border-dashed",3,"class"],[1,"border","p-1","space-y-1","max-h-40","overflow-y-auto",3,"class"],[1,"p-2","space-y-2","text-center"],[1,"flex","justify-center","items-center","gap-4"],[1,"px-3","py-1","border","hover:text-black",3,"click"],[1,"w-3","h-3","rounded-full","bg-red-800","rec-indicator"],[1,"text-lg"],[1,"flex","justify-center","gap-2","pt-2"],[1,"text-sm","flex","items-center","justify-center","gap-2"],[1,"flex","items-center","justify-center","gap-4","pt-2"],[1,"flex","items-center","gap-4"],["type","range","min","-1","max","1","step","0.01",1,"flex-grow","aura-slider",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"aura-slider","vertical-slider",3,"input","value"],[1,"flex","justify-between","items-center","text-xs"],[1,"w-full","p-2","border","hover:text-black","text-sm",3,"click"],["muted","","playsinline","","preload","auto",1,"w-full","h-full","object-cover",3,"mousedown","touchstart","timeupdate","loadedmetadata","ended"],[1,"vinyl-platter",3,"mousedown","touchstart"],[1,"label","deck-a"],[1,"spindle"],[1,"vu-bar"],[1,"text-center","text-sm","p-2","border","border-dashed"],[1,"border","p-1","space-y-1","max-h-40","overflow-y-auto"],[1,"text-sm","p-1",3,"class"],[1,"text-sm","p-1"],[1,"truncate"],[1,"flex","justify-between","items-center","mt-1"],[1,"text-xs","truncate","pl-2"],[1,"flex","gap-1"],[1,"px-1","border","hover:text-black",3,"click"],["download","aura-mix.webm",1,"text-sm","p-1","border","hover:text-black",3,"href"],[1,"text-sm","p-1","border","hover:text-black",3,"class"],[1,"text-sm","p-1","border","hover:text-black",3,"click"],[1,"w-3","h-3","rounded-full","bg-green-500","rec-indicator","recording"],[1,"text-xs","text-green-500"],[1,"vu-meter","h-24"],[1,"text-xs"],["type","range","min","0","max","100",1,"w-20","aura-slider","vertical-slider","h-24",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"w-20","aura-slider","vertical-slider","h-24",3,"input","value"],[1,"label","deck-b"],[1,"flex-1","md:w-2/3","space-y-3"],[1,"w-full","aspect-video","mx-auto","border-2","p-1","media-container"],["muted","","playsinline","",1,"w-full","h-full","object-cover","media-element"],["alt","Album Art",1,"w-full","h-full","object-cover","media-element",3,"src"],[1,"w-full","h-24","mt-2",3,"analyserNode","theme"],[1,"text-xl","truncate",3,"title"],[1,"text-base","text-green-400/70","truncate",3,"title"],[1,"flex","justify-between","text-sm","text-green-400/70"],[1,"flex","items-center","justify-center","gap-4"],[1,"w-12","h-12","flex","items-center","justify-center","border-2","text-xl",3,"click"],[1,"w-20","h-20","flex","items-center","justify-center","border-2","text-3xl",3,"click"],["type","range","min","0","max","1","step","0.01",1,"w-1/2","aura-slider",3,"input","value"],[1,"p-2","border","text-sm",3,"click"],[1,"flex-1","md:w-1/3","space-y-3","flex","flex-col"],["type","text","placeholder","Search to add tracks...",1,"flex-grow","bg-black","border","text-sm","focus:ring-500",3,"input","value"],["type","submit",1,"p-2","border","text-sm"],[1,"border","p-1","space-y-1",3,"class"],[1,"flex-grow","border","p-2","space-y-2","overflow-y-auto","max-h-96"],[1,"text-center","text-base"],[1,"p-2","text-sm","cursor-pointer",3,"class"],[1,"text-center","text-sm","text-green-400/60","p-4"],[1,"w-full","p-2","border","text-sm",3,"click"],[1,"border","p-1","space-y-1"],[1,"text-center","text-base","py-1"],[1,"text-xs","text-green-400/70","truncate","pl-2"],[1,"px-1","border","text-black",3,"click"],[1,"p-2","text-sm","cursor-pointer",3,"click"],[3,"imageSelected","imageAnalysisRequest","initialPrompt","theme"],[3,"close","eqChange","enhancementsChange","eqSettings","enhancements","theme"],[3,"appCommand","close","imageAnalysisResult","mapLocationResult","theme","imageToAnalyzeUrl","mapLocationQuery"],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-sm","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"mb-4"],[1,"flex","flex-col","gap-2"],[1,"p-2","border","hover:text-black","text-sm",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-xl","h-2/3","flex","flex-col","z-50","animate-slide-up","font-mono"],[1,"flex-shrink-0","mb-4","overflow-hidden","flex","justify-center"],[1,"flex-grow","overflow-y-auto","pr-2","text-sm","border-t","pt-4"],["alt","Image being analyzed",1,"max-h-40","object-contain","border",3,"src"],[1,"mb-4","text-sm",3,"class"],[1,"mb-4","text-sm"]],template:function(n,i){if(n&1){let r=V();y(0,"main",5),ce(1,"app-matrix-background"),y(2,"div",6)(3,"header",7)(4,"h1",8),d(5,"[ AURA ]"),E(),y(6,"div",9)(7,"button",10),I("click",function(){return C(r),_(i.randomizeTheme())}),y(8,"span"),d(9,"[ RANDOM THEME ]"),E()(),y(10,"button",10),I("click",function(){return C(r),_(i.toggleMainViewMode())}),x(11,dy,2,0,"span")(12,fy,2,0,"span")(13,py,2,0,"span")(14,my,2,0,"span")(15,hy,2,0,"span")(16,gy,2,0,"span")(17,vy,2,0,"span"),E(),y(18,"button",10),I("click",function(){return C(r),_(i.toggleChatbot())}),x(19,yy,2,0,"span")(20,Ey,2,0,"span"),E()()(),y(21,"div",11),x(22,By,158,103,"div",12)(23,jy,1,1,"app-piano-roll",13)(24,Hy,1,1,"app-drum-machine",13)(25,Ky,48,41,"div",14)(26,Jy,1,2,"app-image-editor",15)(27,Xy,1,3,"app-video-editor",16)(28,eE,1,2,"app-networking",17),E(),x(29,tE,1,3,"app-eq-panel",18),y(30,"audio",19,0),I("timeupdate",function(s){return C(r),_(i.onTimeUpdate(s,"A"))})("loadedmetadata",function(s){return C(r),_(i.onLoadedMetadata(s,"A"))})("ended",function(){return C(r),_(i.onEnded("A"))}),E(),y(32,"audio",19,1),I("timeupdate",function(s){return C(r),_(i.onTimeUpdate(s,"B"))})("loadedmetadata",function(s){return C(r),_(i.onLoadedMetadata(s,"B"))})("ended",function(){return C(r),_(i.onEnded("B"))}),E(),y(34,"input",20,2),I("change",function(s){return C(r),_(i.handleFileInput(s))}),E()(),x(36,nE,1,3,"app-chatbot",21),x(37,iE,16,10),x(38,oE,11,8),x(39,aE,11,8),E()}if(n&2){let r;c(2),m(i.mainBorderClass()),Z("dj-vintage-theme",i.mainViewMode()==="dj"),c(2),m(i.mainTextColorClass()),c(3),m(i.mainHoverBgClass()),c(3),m(i.mainHoverBgClass()),c(),T(i.mainViewMode()==="player"?11:i.mainViewMode()==="dj"?12:i.mainViewMode()==="piano-roll"?13:i.mainViewMode()==="drum-machine"?14:i.mainViewMode()==="image-editor"?15:i.mainViewMode()==="video-editor"?16:i.mainViewMode()==="networking"?17:-1),c(7),m(i.mainHoverBgClass()),c(),T(i.showChatbot()?19:20),c(3),T((r=i.mainViewMode())==="dj"?22:r==="piano-roll"?23:r==="drum-machine"?24:r==="player"?25:r==="image-editor"?26:r==="video-editor"?27:r==="networking"?28:-1),c(7),T(i.showEqPanel()?29:-1),c(7),T(i.showChatbot()?36:-1),c(),T(i.showApplyAlbumArtModal()?37:-1),c(),T(i.showImageAnalysisModal()&&i.imageAnalysisResult()?38:-1),c(),T(i.showMapResultsModal()&&i.mapLocationResult()?39:-1)}},dependencies:[de,uo,fo,mo,ho,go,vo,yo,Ln,po],encapsulation:2,changeDetection:0});var Co=Vn;if(typeof window.process>"u"||window.process===null)window.process={env:{}},console.warn("index.tsx: Forcibly initialized window.process.");else if(typeof window.process.env!="object"||window.process.env===null||Object.isFrozen(window.process.env)||!Object.isExtensible(window.process.env)){let t=window.process.env;if(window.process.env={},t&&typeof t=="object")for(let e in t)e!=="API_KEY"&&Object.prototype.hasOwnProperty.call(t,e)&&(window.process.env[e]=t[e]);console.warn("index.tsx: Replaced/initialized window.process.env object to ensure mutability and extensibility.")}var sl=window.process.env.API_KEY,Ni="",_o=(typeof sl=="string"?sl:"").trim();_o.toLowerCase()==="undefined"||_o===""||_o.length<30?(Ni="",console.warn(`index.tsx: Detected problematic API_KEY in window.process.env (original value: "${sl}"). Setting to empty string.`)):(Ni=_o,console.log(`index.tsx: Valid API_KEY detected from window.process.env (length: ${Ni.length}).`));window.process.env.API_KEY=Ni;console.log(`index.tsx: window.process.env.API_KEY is now explicitly set to a sanitized value (length: ${window.process.env.API_KEY.length}).`);window.AURA_GEMINI_API_KEY=Ni;window.AURA_GEMINI_API_KEY===""?console.warn("index.tsx: Final AURA_GEMINI_API_KEY for application use is empty. AI features will be disabled."):console.log(`index.tsx: AURA_GEMINI_API_KEY is available for application use (length: ${window.AURA_GEMINI_API_KEY.length}).`);var rl=new $("GEMINI_API_KEY");il(Co,{providers:[$a(),of(),{provide:rl,useValue:window.AURA_GEMINI_API_KEY}]}).catch(t=>console.error(t));export{rl as API_KEY_TOKEN};
