import{a as A,b as S}from"./chunk-2NFLSA4Y.js";var Eo;function Si(){return Eo}function Qe(e){let t=Eo;return Eo=e,t}var Xa=Symbol("NotFound");function Jt(e){return e===Xa||e?.name==="\u0275NotFound"}var ye=null,Ti=!1,Co=1,tf=null,he=Symbol("SIGNAL");function R(e){let t=ye;return ye=e,t}function Pi(){return ye}var Dt={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xt(e){if(Ti)throw new Error("");if(ye===null)return;ye.consumerOnSignalRead(e);let t=ye.producersTail;if(t!==void 0&&t.producer===e)return;let n,i=ye.recomputing;if(i&&(n=t!==void 0?t.nextProducer:ye.producers,n!==void 0&&n.producer===e)){ye.producersTail=n,n.lastReadVersion=e.version;return}let r=e.consumersTail;if(r!==void 0&&r.consumer===ye&&(!i||rf(r,ye)))return;let o=nn(ye),s={producer:e,consumer:ye,nextProducer:n,prevConsumer:r,lastReadVersion:e.version,nextConsumer:void 0};ye.producersTail=s,t!==void 0?t.nextProducer=s:ye.producers=s,o&&il(e,s)}function el(){Co++}function Fi(e){if(!(nn(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Co)){if(!e.producerMustRecompute(e)&&!tn(e)){ki(e);return}e.producerRecomputeValue(e),ki(e)}}function _o(e){if(e.consumers===void 0)return;let t=Ti;Ti=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let i=n.consumer;i.dirty||nf(i)}}finally{Ti=t}}function Do(){return ye?.consumerAllowSignalWrites!==!1}function nf(e){e.dirty=!0,_o(e),e.consumerMarkedDirty?.(e)}function ki(e){e.dirty=!1,e.lastCleanEpoch=Co}function bt(e){return e&&tl(e),R(e)}function tl(e){e.producersTail=void 0,e.recomputing=!0}function en(e,t){R(t),e&&nl(e)}function nl(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(nn(e))do n=bo(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function tn(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,i=t.lastReadVersion;if(i!==n.version||(Fi(n),i!==n.version))return!0}return!1}function It(e){if(nn(e)){let t=e.producers;for(;t!==void 0;)t=bo(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function il(e,t){let n=e.consumersTail,i=nn(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!i)for(let r=e.producers;r!==void 0;r=r.nextProducer)il(r.producer,r)}function bo(e){let t=e.producer,n=e.nextProducer,i=e.nextConsumer,r=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,i!==void 0?i.prevConsumer=r:t.consumersTail=r,r!==void 0)r.nextConsumer=i;else if(t.consumers=i,!nn(t)){let o=t.producers;for(;o!==void 0;)o=bo(o)}return n}function nn(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Oi(e){tf?.(e)}function rf(e,t){let n=t.producersTail;if(n!==void 0){let i=t.producers;do{if(i===e)return!0;if(i===n)break;i=i.nextProducer}while(i!==void 0)}return!1}function Li(e,t){return Object.is(e,t)}function Bn(e,t){let n=Object.create(of);n.computation=e,t!==void 0&&(n.equal=t);let i=()=>{if(Fi(n),Xt(n),n.value===Vn)throw n.error;return n.value};return i[he]=n,Oi(n),i}var Ni=Symbol("UNSET"),Ri=Symbol("COMPUTING"),Vn=Symbol("ERRORED"),of=S(A({},Dt),{value:Ni,dirty:!0,error:null,equal:Li,kind:"computed",producerMustRecompute(e){return e.value===Ni||e.value===Ri},producerRecomputeValue(e){if(e.value===Ri)throw new Error("");let t=e.value;e.value=Ri;let n=bt(e),i,r=!1;try{i=e.computation(),R(null),r=t!==Ni&&t!==Vn&&i!==Vn&&e.equal(t,i)}catch(o){i=Vn,e.error=o}finally{en(e,n)}if(r){e.value=t;return}e.value=i,e.version++}});function sf(){throw new Error}var rl=sf;function ol(e){rl(e)}function Io(e){rl=e}var af=null;function wo(e,t){let n=Object.create(Vi);n.value=e,t!==void 0&&(n.equal=t);let i=()=>sl(n);return i[he]=n,Oi(n),[i,s=>rn(n,s),s=>xo(n,s)]}function sl(e){return Xt(e),e.value}function rn(e,t){Do()||ol(e),e.equal(e.value,t)||(e.value=t,lf(e))}function xo(e,t){Do()||ol(e),rn(e,t(e.value))}var Vi=S(A({},Dt),{equal:Li,value:void 0,kind:"signal"});function lf(e){e.version++,el(),_o(e),af?.(e)}function Ie(e){return typeof e=="function"}function Bi(e){let n=e(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ji=Bi(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function jn(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Ee=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(Ie(i))try{i()}catch(o){t=o instanceof ji?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{al(o)}catch(s){t=t??[],s instanceof ji?t=[...t,...s.errors]:t.push(s)}}if(t)throw new ji(t)}}add(t){var n;if(t&&t!==this)if(this.closed)al(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&jn(n,t)}remove(t){let{_finalizers:n}=this;n&&jn(n,t),t instanceof e&&t._removeParent(this)}};Ee.EMPTY=(()=>{let e=new Ee;return e.closed=!0,e})();var Mo=Ee.EMPTY;function Hi(e){return e instanceof Ee||e&&"closed"in e&&Ie(e.remove)&&Ie(e.add)&&Ie(e.unsubscribe)}function al(e){Ie(e)?e():e.unsubscribe()}var je={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var on={setTimeout(e,t,...n){let{delegate:i}=on;return i?.setTimeout?i.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=on;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function ll(e){on.setTimeout(()=>{let{onUnhandledError:t}=je;if(t)t(e);else throw e})}function Ao(){}var cl=So("C",void 0,void 0);function ul(e){return So("E",void 0,e)}function dl(e){return So("N",e,void 0)}function So(e,t,n){return{kind:e,value:t,error:n}}var wt=null;function sn(e){if(je.useDeprecatedSynchronousErrorHandling){let t=!wt;if(t&&(wt={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:i}=wt;if(wt=null,n)throw i}}else e()}function fl(e){je.useDeprecatedSynchronousErrorHandling&&wt&&(wt.errorThrown=!0,wt.error=e)}var xt=class extends Ee{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Hi(t)&&t.add(this)):this.destination=df}static create(t,n,i){return new an(t,n,i)}next(t){this.isStopped?No(dl(t),this):this._next(t)}error(t){this.isStopped?No(ul(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?No(cl,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cf=Function.prototype.bind;function To(e,t){return cf.call(e,t)}var Ro=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(i){Ui(i)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(i){Ui(i)}else Ui(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ui(n)}}},an=class extends xt{constructor(t,n,i){super();let r;if(Ie(t)||!t)r={next:t??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&je.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&To(t.next,o),error:t.error&&To(t.error,o),complete:t.complete&&To(t.complete,o)}):r=t}this.destination=new Ro(r)}};function Ui(e){je.useDeprecatedSynchronousErrorHandling?fl(e):ll(e)}function uf(e){throw e}function No(e,t){let{onStoppedNotification:n}=je;n&&on.setTimeout(()=>n(e,t))}var df={closed:!0,next:Ao,error:uf,complete:Ao};var pl=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ml(e){return e}function hl(e){return e.length===0?ml:e.length===1?e[0]:function(n){return e.reduce((i,r)=>r(i),n)}}var ln=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new e;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=pf(n)?n:new an(n,i,r);return sn(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=gl(i),new i((r,o)=>{let s=new an({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[pl](){return this}pipe(...n){return hl(n)(this)}toPromise(n){return n=gl(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return e.create=t=>new e(t),e})();function gl(e){var t;return(t=e??je.Promise)!==null&&t!==void 0?t:Promise}function ff(e){return e&&Ie(e.next)&&Ie(e.error)&&Ie(e.complete)}function pf(e){return e&&e instanceof xt||ff(e)&&Hi(e)}function mf(e){return Ie(e?.lift)}function vl(e){return t=>{if(mf(t))return t.lift(function(n){try{return e(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function yl(e,t,n,i,r){return new ko(e,t,n,i,r)}var ko=class extends xt{constructor(t,n,i,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var El=Bi(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ft=(()=>{class e extends ln{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new $i(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new El}next(n){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){sn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Mo:(this.currentObservers=null,o.push(n),new Ee(()=>{this.currentObservers=null,jn(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ln;return n.source=this,n}}return e.create=(t,n)=>new $i(t,n),e})(),$i=class extends ft{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,t)}error(t){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&i!==void 0?i:Mo}};var Hn=class extends ft{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:i}=this;if(t)throw n;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}};function Po(e,t){return vl((n,i)=>{let r=0;n.subscribe(yl(i,o=>{i.next(e.call(t,o,r++))}))})}var Cl=S(A({},Dt),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"});function _l(e){if(e.dirty=!1,e.version>0&&!tn(e))return;e.version++;let t=bt(e);try{e.cleanup(),e.fn()}finally{en(e,t)}}var Qi="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",B=class extends Error{code;constructor(t,n){super(qn(t,n)),this.code=t}};function hf(e){return`NG0${Math.abs(e)}`}function qn(e,t){return`${hf(e)}${t?": "+t:""}`}function z(e){for(let t in e)if(e[t]===z)return t;throw Error("")}function pt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(pt).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let i=n.indexOf(`
`);return i>=0?n.slice(0,i):n}function Yi(e,t){return e?t?`${e} ${t}`:e:t||""}var gf=z({__forward_ref__:z});function Zi(e){return e.__forward_ref__=Zi,e.toString=function(){return pt(this())},e}function Ae(e){return Il(e)?e():e}function Il(e){return typeof e=="function"&&e.hasOwnProperty(gf)&&e.__forward_ref__===Zi}function J(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function zn(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ki(e){return vf(e,Ji)}function vf(e,t){return e.hasOwnProperty(t)&&e[t]||null}function yf(e){let t=e?.[Ji]??null;return t||null}function Oo(e){return e&&e.hasOwnProperty(qi)?e[qi]:null}var Ji=z({\u0275prov:z}),qi=z({\u0275inj:z}),$=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=J({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function zo(e){return e&&!!e.\u0275providers}var Wo=z({\u0275cmp:z}),Qo=z({\u0275dir:z}),Yo=z({\u0275pipe:z});var Lo=z({\u0275fac:z}),Tt=z({__NG_ELEMENT_ID__:z}),Dl=z({__NG_ENV_ID__:z});function ht(e){return typeof e=="string"?e:e==null?"":String(e)}function wl(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():ht(e)}var xl=z({ngErrorCode:z}),Ef=z({ngErrorMessage:z}),Cf=z({ngTokenPath:z});function Zo(e,t){return Ml("",-200,t)}function Xi(e,t){throw new B(-201,!1)}function Ml(e,t,n){let i=new B(t,e);return i[xl]=t,i[Ef]=e,n&&(i[Cf]=n),i}function _f(e){return e[xl]}var Vo;function Al(){return Vo}function Me(e){let t=Vo;return Vo=e,t}function Ko(e,t,n){let i=Ki(e);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&8)return null;if(t!==void 0)return t;Xi(e,"Injector")}var Df={},Mt=Df,bf="__NG_DI_FLAG__",Bo=class{injector;constructor(t){this.injector=t}retrieve(t,n){let i=At(n)||0;try{return this.injector.get(t,i&8?null:Mt,i)}catch(r){if(Jt(r))return r;throw r}}};function If(e,t=0){let n=Si();if(n===void 0)throw new B(-203,!1);if(n===null)return Ko(e,void 0,t);{let i=wf(t),r=n.retrieve(e,i);if(Jt(r)){if(i.optional)return null;throw r}return r}}function q(e,t=0){return(Al()||If)(Ae(e),t)}function T(e,t){return q(e,At(t))}function At(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function wf(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function jo(e){let t=[];for(let n=0;n<e.length;n++){let i=Ae(e[n]);if(Array.isArray(i)){if(i.length===0)throw new B(900,!1);let r,o=0;for(let s=0;s<i.length;s++){let a=i[s],l=xf(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}t.push(q(r,o))}else t.push(q(i))}return t}function xf(e){return e[bf]}function un(e,t){let n=e.hasOwnProperty(Lo);return n?e[Lo]:null}function Sl(e,t,n){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],o=t[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function Tl(e){return e.flat(Number.POSITIVE_INFINITY)}function er(e,t){e.forEach(n=>Array.isArray(n)?er(n,t):t(n))}function Jo(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Wn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Nl(e,t,n,i){let r=e.length;if(r==t)e.push(n,i);else if(r===1)e.push(i,e[0]),e[0]=n;else{for(r--,e.push(e[r-1],e[r]);r>t;){let o=r-2;e[r]=e[o],r--}e[t]=n,e[t+1]=i}}function tr(e,t,n){let i=dn(e,t);return i>=0?e[i|1]=n:(i=~i,Nl(e,i,t,n)),i}function nr(e,t){let n=dn(e,t);if(n>=0)return e[n|1]}function dn(e,t){return Mf(e,t,1)}function Mf(e,t,n){let i=0,r=e.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=e[o<<n];if(t===s)return o<<n;s>t?r=o:i=o+1}return~(r<<n)}var Nt={},Ce=[],Rt=new $(""),Xo=new $("",-1),es=new $(""),$n=class{get(t,n=Mt){if(n===Mt){let r=Ml("",-201);throw r.name="\u0275NotFound",r}return n}};function kt(e){return e[Wo]||null}function ts(e){return e[Qo]||null}function Rl(e){return e[Yo]||null}function Qn(e){return{\u0275providers:e}}function kl(...e){return{\u0275providers:ns(!0,e),\u0275fromNgModule:!0}}function ns(e,...t){let n=[],i=new Set,r,o=s=>{n.push(s)};return er(t,s=>{let a=s;zi(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&Pl(r,o),n}function Pl(e,t){for(let n=0;n<e.length;n++){let{ngModule:i,providers:r}=e[n];is(r,o=>{t(o,i)})}}function zi(e,t,n,i){if(e=Ae(e),!e)return!1;let r=null,o=Oo(e),s=!o&&kt(e);if(!o&&!s){let l=e.ngModule;if(o=Oo(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=e}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of l)zi(u,t,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let u;try{er(o.imports,f=>{zi(f,t,n,i)&&(u||=[],u.push(f))})}finally{}u!==void 0&&Pl(u,t)}if(!a){let u=un(r)||(()=>new r);t({provide:r,useFactory:u,deps:Ce},r),t({provide:es,useValue:r,multi:!0},r),t({provide:Rt,useValue:()=>q(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let u=e;is(l,f=>{t(f,u)})}}else return!1;return r!==e&&e.providers!==void 0}function is(e,t){for(let n of e)zo(n)&&(n=n.\u0275providers),Array.isArray(n)?is(n,t):t(n)}var Af=z({provide:String,useValue:z});function Fl(e){return e!==null&&typeof e=="object"&&Af in e}function Sf(e){return!!(e&&e.useExisting)}function Tf(e){return!!(e&&e.useFactory)}function Wi(e){return typeof e=="function"}var Yn=new $(""),Gi={},bl={},Fo;function Zn(){return Fo===void 0&&(Fo=new $n),Fo}var Pe=class{},St=class extends Pe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,Uo(t,s=>this.processProvider(s)),this.records.set(Xo,cn(void 0,this)),r.has("environment")&&this.records.set(Pe,cn(void 0,this));let o=this.records.get(Yn);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(es,Ce,{self:!0}))}retrieve(t,n){let i=At(n)||0;try{return this.get(t,Mt,i)}catch(r){if(Jt(r))return r;throw r}}destroy(){Un(this),this._destroyed=!0;let t=R(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),R(t)}}onDestroy(t){return Un(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Un(this);let n=Qe(this),i=Me(void 0),r;try{return t()}finally{Qe(n),Me(i)}}get(t,n=Mt,i){if(Un(this),t.hasOwnProperty(Dl))return t[Dl](this);let r=At(i),o,s=Qe(this),a=Me(void 0);try{if(!(r&4)){let u=this.records.get(t);if(u===void 0){let f=Ff(t)&&Ki(t);f&&this.injectableDefInScope(f)?u=cn(Ho(t),Gi):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,r)}let l=r&2?Zn():this.parent;return n=r&8&&n===Mt?null:n,l.get(t,n)}catch(l){let u=_f(l);throw u===-200||u===-201?new B(u,null):l}finally{Me(a),Qe(s)}}resolveInjectorInitializers(){let t=R(null),n=Qe(this),i=Me(void 0),r;try{let o=this.get(Rt,Ce,{self:!0});for(let s of o)s()}finally{Qe(n),Me(i),R(t)}}toString(){let t=[],n=this.records;for(let i of n.keys())t.push(pt(i));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ae(t);let n=Wi(t)?t:Ae(t&&t.provide),i=Rf(t);if(!Wi(t)&&t.multi===!0){let r=this.records.get(n);r||(r=cn(void 0,Gi,!0),r.factory=()=>jo(r.multi),this.records.set(n,r)),n=t,r.multi.push(t)}this.records.set(n,i)}hydrate(t,n,i){let r=R(null);try{if(n.value===bl)throw Zo(pt(t));return n.value===Gi&&(n.value=bl,n.value=n.factory(void 0,i)),typeof n.value=="object"&&n.value&&Pf(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{R(r)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ae(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ho(e){let t=Ki(e),n=t!==null?t.factory:un(e);if(n!==null)return n;if(e instanceof $)throw new B(204,!1);if(e instanceof Function)return Nf(e);throw new B(204,!1)}function Nf(e){if(e.length>0)throw new B(204,!1);let n=yf(e);return n!==null?()=>n.factory(e):()=>new e}function Rf(e){if(Fl(e))return cn(void 0,e.useValue);{let t=Ol(e);return cn(t,Gi)}}function Ol(e,t,n){let i;if(Wi(e)){let r=Ae(e);return un(r)||Ho(r)}else if(Fl(e))i=()=>Ae(e.useValue);else if(Tf(e))i=()=>e.useFactory(...jo(e.deps||[]));else if(Sf(e))i=(r,o)=>q(Ae(e.useExisting),o!==void 0&&o&8?8:void 0);else{let r=Ae(e&&(e.useClass||e.provide));if(kf(e))i=()=>new r(...jo(e.deps));else return un(r)||Ho(r)}return i}function Un(e){if(e.destroyed)throw new B(205,!1)}function cn(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function kf(e){return!!e.deps}function Pf(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function Ff(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Uo(e,t){for(let n of e)Array.isArray(n)?Uo(n,t):n&&zo(n)?Uo(n.\u0275providers,t):t(n)}function ir(e,t){let n;e instanceof St?(Un(e),n=e):n=new Bo(e);let i,r=Qe(n),o=Me(void 0);try{return t()}finally{Qe(r),Me(o)}}function Ll(){return Al()!==void 0||Si()!=null}var He=0,N=1,P=2,ce=3,Oe=4,Le=5,fn=6,pn=7,oe=8,ot=9,Ze=10,ee=11,mn=12,rs=13,Pt=14,Ve=15,gt=16,Ft=17,Ke=18,Kn=19,os=20,it=21,rr=22,st=23,Se=24,or=25,Ot=26,ge=27,Vl=1,ss=6,vt=7,Jn=8,Lt=9,ne=10;function at(e){return Array.isArray(e)&&typeof e[Vl]=="object"}function Ue(e){return Array.isArray(e)&&e[Vl]===!0}function as(e){return(e.flags&4)!==0}function Vt(e){return e.componentOffset>-1}function sr(e){return(e.flags&1)===1}function Bt(e){return!!e.template}function hn(e){return(e[P]&512)!==0}function jt(e){return(e[P]&256)===256}var ls="svg",Bl="math";function Be(e){for(;Array.isArray(e);)e=e[He];return e}function cs(e,t){return Be(t[e])}function $e(e,t){return Be(t[e.index])}function Xn(e,t){return e.data[t]}function Je(e,t){let n=t[e];return at(n)?n:n[He]}function ar(e){return(e[P]&128)===128}function jl(e){return Ue(e[ce])}function Xe(e,t){return t==null?null:e[t]}function us(e){e[Ft]=0}function ds(e){e[P]&1024||(e[P]|=1024,ar(e)&&Ht(e))}function Hl(e,t){for(;e>0;)t=t[Pt],e--;return t}function ei(e){return!!(e[P]&9216||e[Se]?.dirty)}function lr(e){e[Ze].changeDetectionScheduler?.notify(8),e[P]&64&&(e[P]|=1024),ei(e)&&Ht(e)}function Ht(e){e[Ze].changeDetectionScheduler?.notify(0);let t=mt(e);for(;t!==null&&!(t[P]&8192||(t[P]|=8192,!ar(t)));)t=mt(t)}function fs(e,t){if(jt(e))throw new B(911,!1);e[it]===null&&(e[it]=[]),e[it].push(t)}function Ul(e,t){if(e[it]===null)return;let n=e[it].indexOf(t);n!==-1&&e[it].splice(n,1)}function mt(e){let t=e[ce];return Ue(t)?t[ce]:t}function ps(e){return e[pn]??=[]}function ms(e){return e.cleanup??=[]}function $l(e,t,n,i){let r=ps(t);r.push(n),e.firstCreatePass&&ms(e).push(i,r.length-1)}var V={lFrame:oc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var $o=!1;function Gl(){return V.lFrame.elementDepthCount}function ql(){V.lFrame.elementDepthCount++}function hs(){V.lFrame.elementDepthCount--}function zl(){return V.bindingsEnabled}function Wl(){return V.skipHydrationRootTNode!==null}function gs(e){return V.skipHydrationRootTNode===e}function vs(){V.skipHydrationRootTNode=null}function U(){return V.lFrame.lView}function _e(){return V.lFrame.tView}function C(e){return V.lFrame.contextLView=e,e[oe]}function _(e){return V.lFrame.contextLView=null,e}function Te(){let e=ys();for(;e!==null&&e.type===64;)e=e.parent;return e}function ys(){return V.lFrame.currentTNode}function Ql(){let e=V.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function gn(e,t){let n=V.lFrame;n.currentTNode=e,n.isParent=t}function Es(){return V.lFrame.isParent}function Yl(){V.lFrame.isParent=!1}function Cs(){return $o}function vn(e){let t=$o;return $o=e,t}function Zl(){let e=V.lFrame,t=e.bindingRootIndex;return t===-1&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Kl(){return V.lFrame.bindingIndex}function Jl(e){return V.lFrame.bindingIndex=e}function yt(){return V.lFrame.bindingIndex++}function cr(e){let t=V.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Xl(){return V.lFrame.inI18n}function ec(e,t){let n=V.lFrame;n.bindingIndex=n.bindingRootIndex=e,ur(t)}function tc(){return V.lFrame.currentDirectiveIndex}function ur(e){V.lFrame.currentDirectiveIndex=e}function nc(e){let t=V.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function ic(){return V.lFrame.currentQueryIndex}function dr(e){V.lFrame.currentQueryIndex=e}function Of(e){let t=e[N];return t.type===2?t.declTNode:t.type===1?e[Le]:null}function _s(e,t,n){if(n&4){let r=t,o=e;for(;r=r.parent,r===null&&!(n&1);)if(r=Of(o),r===null||(o=o[Pt],r.type&10))break;if(r===null)return!1;t=r,e=o}let i=V.lFrame=rc();return i.currentTNode=t,i.lView=e,!0}function fr(e){let t=rc(),n=e[N];V.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function rc(){let e=V.lFrame,t=e===null?null:e.child;return t===null?oc(e):t}function oc(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function sc(){let e=V.lFrame;return V.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ds=sc;function pr(){let e=sc();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ac(e){return(V.lFrame.contextLView=Hl(e,V.lFrame.contextLView))[oe]}function et(){return V.lFrame.selectedIndex}function Et(e){V.lFrame.selectedIndex=e}function mr(){let e=V.lFrame;return Xn(e.tView,e.selectedIndex)}function Ut(){V.lFrame.currentNamespace=ls}function lc(){return V.lFrame.currentNamespace}var cc=!0;function hr(){return cc}function gr(e){cc=e}function Go(e,t=null,n=null,i){let r=uc(e,t,n,i);return r.resolveInjectorInitializers(),r}function uc(e,t=null,n=null,i,r=new Set){let o=[n||Ce,kl(e)];return i=i||(typeof e=="object"?void 0:pt(e)),new St(o,t||Zn(),i||null,r)}var rt=class e{static THROW_IF_NOT_FOUND=Mt;static NULL=new $n;static create(t,n){if(Array.isArray(t))return Go({name:""},n,t,"");{let i=t.name??"";return Go({name:i},t.parent,t.providers,i)}}static \u0275prov=J({token:e,providedIn:"any",factory:()=>q(Xo)});static __NG_ELEMENT_ID__=-1},Ge=new $(""),$t=(()=>{class e{static __NG_ELEMENT_ID__=Lf;static __NG_ENV_ID__=n=>n}return e})(),Gn=class extends $t{_lView;constructor(t){super(),this._lView=t}get destroyed(){return jt(this._lView)}onDestroy(t){let n=this._lView;return fs(n,t),()=>Ul(n,t)}};function Lf(){return new Gn(U())}var Fe=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Ct=new $("",{providedIn:"root",factory:()=>{let e=T(Pe),t;return n=>{e.destroyed&&!t?setTimeout(()=>{throw n}):(t??=e.get(Fe),t.handleError(n))}}}),dc={provide:Rt,useValue:()=>void T(Fe),multi:!0};function I(e,t){let[n,i,r]=wo(e,t?.equal),o=n,s=o[he];return o.set=i,o.update=r,o.asReadonly=bs.bind(o),o}function bs(){let e=this[he];if(e.readonlyFn===void 0){let t=()=>this();t[he]=e,e.readonlyFn=t}return e.readonlyFn}var ti=(()=>{class e{view;node;constructor(n,i){this.view=n,this.node=i}static __NG_ELEMENT_ID__=Vf}return e})();function Vf(){return new ti(U(),Te())}var Ye=class{},ni=new $("",{providedIn:"root",factory:()=>!1});var Is=new $(""),vr=new $(""),Gt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Hn(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new ln(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=J({token:e,providedIn:"root",factory:()=>new e})}return e})();function qt(...e){}var ii=(()=>{class e{static \u0275prov=J({token:e,providedIn:"root",factory:()=>new qo})}return e})(),qo=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,i=this.queues.get(n);i.has(t)&&(i.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(t)||i.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,i]of this.queues)n===null?t||=this.flushQueue(i):t||=n.run(()=>this.flushQueue(i));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let i of t)i.dirty&&(this.dirtyEffectCount--,n=!0,i.run());return n}};function aa(e){return{toString:e}.toString()}function Yf(e){return typeof e=="function"}var Ir=class{previousValue;currentValue;firstChange;constructor(t,n,i){this.previousValue=t,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Uc(e,t,n,i){t!==null?t.applyValueToInputSignal(t,i):e[n]=i}function Zf(e){return e.type.prototype.ngOnChanges&&(e.setInput=Jf),Kf}function Kf(){let e=Gc(this),t=e?.current;if(t){let n=e.previous;if(n===Nt)e.previous=t;else for(let i in t)n[i]=t[i];e.current=null,this.ngOnChanges(t)}}function Jf(e,t,n,i,r){let o=this.declaredInputs[i],s=Gc(e)||Xf(e,{previous:Nt,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[o];a[o]=new Ir(u&&u.currentValue,n,l===Nt),Uc(e,t,r,n)}var $c="__ngSimpleChanges__";function Gc(e){return e[$c]||null}function Xf(e,t){return e[$c]=t}var fc=[];var Q=function(e,t=null,n){for(let i=0;i<fc.length;i++){let r=fc[i];r(e,t,n)}};function ep(e,t,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(i){let s=Zf(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}r&&(n.preOrderHooks??=[]).push(0-e,r),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function tp(e,t){for(let n=t.directiveStart,i=t.directiveEnd;n<i;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),f!=null&&(e.destroyHooks??=[]).push(n,f)}}function Er(e,t,n){qc(e,t,3,n)}function Cr(e,t,n,i){(e[P]&3)===n&&qc(e,t,n,i)}function ws(e,t){let n=e[P];(n&3)===t&&(n&=16383,n+=1,e[P]=n)}function qc(e,t,n,i){let r=i!==void 0?e[Ft]&65535:0,o=i??-1,s=t.length-1,a=0;for(let l=r;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],i!=null&&a>=i)break}else t[l]<0&&(e[Ft]+=65536),(a<o||o==-1)&&(np(e,n,t,l),e[Ft]=(e[Ft]&4294901760)+l+2),l++}function pc(e,t){Q(4,e,t);let n=R(null);try{t.call(e)}finally{R(n),Q(5,e,t)}}function np(e,t,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=e[s];r?e[P]>>14<e[Ft]>>16&&(e[P]&3)===t&&(e[P]+=16384,pc(a,o)):pc(a,o)}var En=-1,si=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,i,r){this.factory=t,this.name=r,this.canSeeViewProviders=n,this.injectImpl=i}};function ip(e){return(e.flags&8)!==0}function rp(e){return(e.flags&16)!==0}function op(e,t,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];e.setAttribute(t,s,a,o)}else{let o=r,s=n[++i];ap(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),i++}}return i}function sp(e){return e===3||e===4||e===6}function ap(e){return e.charCodeAt(0)===64}function Br(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let i=0;i<t.length;i++){let r=t[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?mc(e,n,r,null,t[++i]):mc(e,n,r,null,null))}}return e}function mc(e,t,n,i,r){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){r!==null&&(e[o+1]=r);return}o++,r!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),r!==null&&e.splice(o++,0,r)}function zc(e){return e!==En}function wr(e){return e&32767}function lp(e){return e>>16}function xr(e,t){let n=lp(e),i=t;for(;n>0;)i=i[Pt],n--;return i}var Rs=!0;function hc(e){let t=Rs;return Rs=e,t}var cp=256,Wc=cp-1,Qc=5,up=0,tt={};function dp(e,t,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Tt)&&(i=n[Tt]),i==null&&(i=n[Tt]=up++);let r=i&Wc,o=1<<r;t.data[e+(r>>Qc)]|=o}function Yc(e,t){let n=Zc(e,t);if(n!==-1)return n;let i=t[N];i.firstCreatePass&&(e.injectorIndex=t.length,xs(i.data,e),xs(t,null),xs(i.blueprint,null));let r=la(e,t),o=e.injectorIndex;if(zc(r)){let s=wr(r),a=xr(r,t),l=a[N].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|l[s+u]}return t[o+8]=r,o}function xs(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Zc(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function la(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,i=null,r=t;for(;r!==null;){if(i=tu(r),i===null)return En;if(n++,r=r[Pt],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return En}function fp(e,t,n){dp(e,t,n)}function Kc(e,t,n){if(n&8||e!==void 0)return e;Xi(t,"NodeInjector")}function Jc(e,t,n,i){if(n&8&&i===void 0&&(i=null),(n&3)===0){let r=e[ot],o=Me(void 0);try{return r?r.get(t,i,n&8):Ko(t,i,n&8)}finally{Me(o)}}return Kc(i,t,n)}function Xc(e,t,n,i=0,r){if(e!==null){if(t[P]&2048&&!(i&2)){let s=gp(e,t,n,i,tt);if(s!==tt)return s}let o=eu(e,t,n,i,tt);if(o!==tt)return o}return Jc(t,n,i,r)}function eu(e,t,n,i,r){let o=mp(n);if(typeof o=="function"){if(!_s(t,e,i))return i&1?Kc(r,n,i):Jc(t,n,i,r);try{let s;if(s=o(i),s==null&&!(i&8))Xi(n);else return s}finally{Ds()}}else if(typeof o=="number"){let s=null,a=Zc(e,t),l=En,u=i&1?t[Ve][Le]:null;for((a===-1||i&4)&&(l=a===-1?la(e,t):t[a+8],l===En||!vc(i,!1)?a=-1:(s=t[N],a=wr(l),t=xr(l,t)));a!==-1;){let f=t[N];if(gc(o,a,f.data)){let E=pp(a,t,n,s,i,u);if(E!==tt)return E}l=t[a+8],l!==En&&vc(i,t[N].data[a+8]===u)&&gc(o,a,t)?(s=f,a=wr(l),t=xr(l,t)):a=-1}}return r}function pp(e,t,n,i,r,o){let s=t[N],a=s.data[e+8],l=i==null?Vt(a)&&Rs:i!=s&&(a.type&3)!==0,u=r&1&&o===a,f=_r(a,s,n,l,u);return f!==null?Mr(t,s,f,a,r):tt}function _r(e,t,n,i,r){let o=e.providerIndexes,s=t.data,a=o&1048575,l=e.directiveStart,u=e.directiveEnd,f=o>>20,E=i?a:a+f,b=r?a+f:u;for(let D=E;D<b;D++){let k=s[D];if(D<l&&n===k||D>=l&&k.type===n)return D}if(r){let D=s[l];if(D&&Bt(D)&&D.type===n)return l}return null}function Mr(e,t,n,i,r){let o=e[n],s=t.data;if(o instanceof si){let a=o;if(a.resolving){let D=wl(s[n]);throw Zo(D)}let l=hc(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],f,E=a.injectImpl?Me(a.injectImpl):null,b=_s(e,i,0);try{o=e[n]=a.factory(void 0,r,s,e,i),t.firstCreatePass&&n>=i.directiveStart&&ep(n,s[n],t)}finally{E!==null&&Me(E),hc(l),a.resolving=!1,Ds()}}return o}function mp(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Tt)?e[Tt]:void 0;return typeof t=="number"?t>=0?t&Wc:hp:t}function gc(e,t,n){let i=1<<e;return!!(n[t+(e>>Qc)]&i)}function vc(e,t){return!(e&2)&&!(e&1&&t)}var zt=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,i){return Xc(this._tNode,this._lView,t,At(i),n)}};function hp(){return new zt(Te(),U())}function gp(e,t,n,i,r){let o=e,s=t;for(;o!==null&&s!==null&&s[P]&2048&&!hn(s);){let a=eu(o,s,n,i|2,tt);if(a!==tt)return a;let l=o.parent;if(!l){let u=s[os];if(u){let f=u.get(n,tt,i);if(f!==tt)return f}l=tu(s),s=s[Pt]}o=l}return r}function tu(e){let t=e[N],n=t.type;return n===2?t.declTNode:n===1?e[Le]:null}function vp(){return In(Te(),U())}function In(e,t){return new wn($e(e,t))}var wn=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=vp}return e})();function yp(e){return e instanceof wn?e.nativeElement:e}function Ep(){return this._results[Symbol.iterator]()}var Ar=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new ft}constructor(t=!1){this._emitDistinctChangesOnly=t}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){this.dirty=!1;let i=Tl(t);(this._changesDetected=!Sl(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Ep};function nu(e){return(e.flags&128)===128}var ca=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(ca||{}),iu=new Map,Cp=0;function _p(){return Cp++}function Dp(e){iu.set(e[Kn],e)}function ks(e){iu.delete(e[Kn])}var yc="__ngContext__";function Cn(e,t){at(t)?(e[yc]=t[Kn],Dp(t)):e[yc]=t}function ru(e){return su(e[mn])}function ou(e){return su(e[Oe])}function su(e){for(;e!==null&&!Ue(e);)e=e[Oe];return e}var Ps;function ua(e){Ps=e}function au(){if(Ps!==void 0)return Ps;if(typeof document<"u")return document;throw new B(210,!1)}var jr=new $("",{providedIn:"root",factory:()=>bp}),bp="ng",Hr=new $(""),mi=new $("",{providedIn:"platform",factory:()=>"unknown"});var Ur=new $("",{providedIn:"root",factory:()=>au().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ip="h",wp="b";var lu="r";var cu="di";var uu=!1,du=new $("",{providedIn:"root",factory:()=>uu});var xp=(e,t,n,i)=>{};function Mp(e,t,n,i){xp(e,t,n,i)}function da(e){return(e.flags&32)===32}var Ap=()=>null;function fu(e,t,n=!1){return Ap(e,t,n)}function pu(e,t){let n=e.contentQueries;if(n!==null){let i=R(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=e.data[s];dr(o),a.contentQueries(2,t[s],s)}}}finally{R(i)}}}function Fs(e,t,n){dr(0);let i=R(null);try{t(e,n)}finally{R(i)}}function mu(e,t,n){if(as(t)){let i=R(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{R(i)}}}var ct=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e})(ct||{});var Sr=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Qi})`}};function $r(e){return e instanceof Sr?e.changingThisBreaksApplicationSecurity:e}function hu(e,t){let n=gu(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${Qi})`)}return n===t}function gu(e){return e instanceof Sr&&e.getTypeName()||null}var Sp=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function vu(e){return e=String(e),e.match(Sp)?e:"unsafe:"+e}var fa=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(fa||{});function ie(e){let t=Tp();return t?t.sanitize(fa.URL,e)||"":hu(e,"URL")?$r(e):vu(ht(e))}function Tp(){let e=U();return e&&e[Ze].sanitizer}function xn(e){return e.ownerDocument.defaultView}function Np(e,t,n){let i=e.length;for(;;){let r=e.indexOf(t,n);if(r===-1)return r;if(r===0||e.charCodeAt(r-1)<=32){let o=t.length;if(r+o===i||e.charCodeAt(r+o)<=32)return r}n=r+1}}var yu="ng-template";function Rp(e,t,n,i){let r=0;if(i){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&Np(t[r+1].toLowerCase(),n,0)!==-1)return!0}else if(pa(e))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function pa(e){return e.type===4&&e.value!==yu}function kp(e,t,n){let i=e.type===4&&!n?yu:e.value;return t===i}function Pp(e,t,n){let i=4,r=e.attrs,o=r!==null?Lp(r):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!qe(i)&&!qe(l))return!1;if(s&&qe(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!kp(e,l,n)||l===""&&t.length===1){if(qe(i))return!1;s=!0}}else if(i&8){if(r===null||!Rp(e,r,l,n)){if(qe(i))return!1;s=!0}}else{let u=t[++a],f=Fp(l,r,pa(e),n);if(f===-1){if(qe(i))return!1;s=!0;continue}if(u!==""){let E;if(f>o?E="":E=r[f+1].toLowerCase(),i&2&&u!==E){if(qe(i))return!1;s=!0}}}}return qe(i)||s}function qe(e){return(e&1)===0}function Fp(e,t,n,i){if(t===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<t.length;){let s=t[r];if(s===e)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return Vp(t,e)}function Op(e,t,n=!1){for(let i=0;i<t.length;i++)if(Pp(e,t[i],n))return!0;return!1}function Lp(e){for(let t=0;t<e.length;t++){let n=e[t];if(sp(n))return t}return e.length}function Vp(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let i=e[n];if(typeof i=="number")return-1;if(i===t)return n;n++}return-1}function Ec(e,t){return e?":not("+t.trim()+")":t}function Bp(e){let t=e[0],n=1,i=2,r="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(i&2){let a=e[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!qe(s)&&(t+=Ec(o,r),r=""),i=s,o=o||!qe(i);n++}return r!==""&&(t+=Ec(o,r)),t}function jp(e){return e.map(Bp).join(",")}function Hp(e){let t=[],n=[],i=1,r=2;for(;i<e.length;){let o=e[i];if(typeof o=="string")r===2?o!==""&&t.push(o,e[++i]):r===8&&n.push(o);else{if(!qe(r))break;r=o}i++}return n.length&&t.push(1,...n),t}var De={};function Up(e,t){return e.createText(t)}function $p(e,t,n){e.setValue(t,n)}function Eu(e,t,n){return e.createElement(t,n)}function Tr(e,t,n,i,r){e.insertBefore(t,n,i,r)}function Cu(e,t,n){e.appendChild(t,n)}function Cc(e,t,n,i,r){i!==null?Tr(e,t,n,i,r):Cu(e,t,n)}function _u(e,t,n,i){e.removeChild(null,t,n,i)}function Gp(e,t,n){e.setAttribute(t,"style",n)}function qp(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Du(e,t,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&op(e,t,i),r!==null&&qp(e,t,r),o!==null&&Gp(e,t,o)}function ma(e,t,n,i,r,o,s,a,l,u,f){let E=ge+i,b=E+r,D=zp(E,b),k=typeof u=="function"?u():u;return D[N]={type:e,blueprint:D,template:n,queries:null,viewQuery:a,declTNode:t,data:D.slice().fill(null,E),bindingStartIndex:E,expandoStartIndex:b,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:k,incompleteFirstPass:!1,ssrId:f}}function zp(e,t){let n=[];for(let i=0;i<t;i++)n.push(i<e?null:De);return n}function Wp(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=ma(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function ha(e,t,n,i,r,o,s,a,l,u,f){let E=t.blueprint.slice();return E[He]=r,E[P]=i|4|128|8|64|1024,(u!==null||e&&e[P]&2048)&&(E[P]|=2048),us(E),E[ce]=E[Pt]=e,E[oe]=n,E[Ze]=s||e&&e[Ze],E[ee]=a||e&&e[ee],E[ot]=l||e&&e[ot]||null,E[Le]=o,E[Kn]=_p(),E[fn]=f,E[os]=u,E[Ve]=t.type==2?e[Ve]:E,E}function Qp(e,t,n){let i=$e(t,e),r=Wp(n),o=e[Ze].rendererFactory,s=ga(e,ha(e,r,null,bu(n),i,t,null,o.createRenderer(i,n),null,null,null));return e[t.index]=s}function bu(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Iu(e,t,n,i){if(n===0)return-1;let r=t.length;for(let o=0;o<n;o++)t.push(i),e.blueprint.push(i),e.data.push(null);return r}function ga(e,t){return e[mn]?e[rs][Oe]=t:e[mn]=t,e[rs]=t,t}function c(e=1){wu(_e(),U(),et()+e,!1)}function wu(e,t,n,i){if(!i)if((t[P]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Er(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Cr(t,o,0,n)}Et(n)}var Gr=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(Gr||{});function Os(e,t,n,i){let r=R(null);try{let[o,s,a]=e.inputs[n],l=null;(s&Gr.SignalBased)!==0&&(l=t[o][he]),l!==null&&l.transformFn!==void 0?i=l.transformFn(i):a!==null&&(i=a.call(t,i)),e.setInput!==null?e.setInput(t,l,i,n,o):Uc(t,l,o,i)}finally{R(r)}}var ut=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(ut||{}),Yp;function va(e,t){return Yp(e,t)}var Wt=new Set,ya=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(ya||{}),hi=new $(""),_c=new Set;function Zt(e){_c.has(e)||(_c.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var xu=!1,Ls=class extends ft{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Ll()&&(this.destroyRef=T($t,{optional:!0})??void 0,this.pendingTasks=T(Gt,{optional:!0})??void 0)}emit(t){let n=R(null);try{super.next(t)}finally{R(n)}}subscribe(t,n,i){let r=t,o=n||(()=>null),s=i;if(t&&typeof t=="object"){let l=t;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Ee&&t.add(a),a}wrapInTimeout(t){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{i!==void 0&&this.pendingTasks?.remove(i)}})}}},lt=Ls;function Mu(e){let t,n;function i(){e=qt;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),i()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),i()})),()=>i()}function Dc(e){return queueMicrotask(()=>e()),()=>{e=qt}}var Ea="isAngularZone",Nr=Ea+"_ID",Zp=0,fe=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new lt(!1);onMicrotaskEmpty=new lt(!1);onStable=new lt(!1);onError=new lt(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:i=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:o=xu}=t;if(typeof Zone>"u")throw new B(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&i,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=o,Xp(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ea)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new B(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new B(909,!1)}run(t,n,i){return this._inner.run(t,n,i)}runTask(t,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,Kp,qt,qt);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(t,n,i){return this._inner.runGuarded(t,n,i)}runOutsideAngular(t){return this._outer.run(t)}},Kp={};function Ca(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Jp(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Mu(()=>{e.callbackScheduled=!1,Vs(e),e.isCheckStableRunning=!0,Ca(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Vs(e)}function Xp(e){let t=()=>{Jp(e)},n=Zp++;e._inner=e._inner.fork({name:"angular",properties:{[Ea]:!0,[Nr]:n,[Nr+n]:!0},onInvokeTask:(i,r,o,s,a,l)=>{if(em(l))return i.invokeTask(o,s,a,l);try{return bc(e),i.invokeTask(o,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),Ic(e)}},onInvoke:(i,r,o,s,a,l,u)=>{try{return bc(e),i.invoke(o,s,a,l,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!tm(l)&&t(),Ic(e)}},onHasTask:(i,r,o,s)=>{i.hasTask(o,s),r===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Vs(e),Ca(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(i,r,o,s)=>(i.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Vs(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function bc(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Ic(e){e._nesting--,Ca(e)}var ai=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new lt;onMicrotaskEmpty=new lt;onStable=new lt;onError=new lt;run(t,n,i){return t.apply(n,i)}runGuarded(t,n,i){return t.apply(n,i)}runOutsideAngular(t){return t()}runTask(t,n,i,r){return t.apply(n,i)}};function em(e){return Au(e,"__ignore_ng_zone__")}function tm(e){return Au(e,"__scheduler_tick__")}function Au(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Su=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=J({token:e,providedIn:"root",factory:()=>new e})}return e})();var Tu=new $("",{providedIn:"root",factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function Nu(e,t,n){let i=e.get(Tu);if(Array.isArray(t))for(let r of t)i.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else i.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);i.scheduler&&i.scheduler(e)}function nm(e,t){let n=e.get(Tu);if(t.detachedLeaveAnimationFns){for(let i of t.detachedLeaveAnimationFns)n.queue.delete(i);t.detachedLeaveAnimationFns=void 0}}function im(e,t){for(let[n,i]of t)Nu(e,i.animateFns)}function wc(e,t,n,i){let r=e?.[Ot]?.enter;t!==null&&r&&r.has(n.index)&&im(i,r)}function yn(e,t,n,i,r,o,s,a){if(r!=null){let l,u=!1;Ue(r)?l=r:at(r)&&(u=!0,r=r[He]);let f=Be(r);e===0&&i!==null?(wc(a,i,o,n),s==null?Cu(t,i,f):Tr(t,i,f,s||null,!0)):e===1&&i!==null?(wc(a,i,o,n),Tr(t,i,f,s||null,!0)):e===2?xc(a,o,n,E=>{_u(t,f,u,E)}):e===3&&xc(a,o,n,()=>{t.destroyNode(f)}),l!=null&&gm(t,e,n,l,o,i,s)}}function rm(e,t){Ru(e,t),t[He]=null,t[Le]=null}function om(e,t,n,i,r,o){i[He]=r,i[Le]=t,zr(e,i,n,1,r,o)}function Ru(e,t){t[Ze].changeDetectionScheduler?.notify(9),zr(e,t,t[ee],2,null,null)}function sm(e){let t=e[mn];if(!t)return Ms(e[N],e);for(;t;){let n=null;if(at(t))n=t[mn];else{let i=t[ne];i&&(n=i)}if(!n){for(;t&&!t[Oe]&&t!==e;)at(t)&&Ms(t[N],t),t=t[ce];t===null&&(t=e),at(t)&&Ms(t[N],t),n=t&&t[Oe]}t=n}}function _a(e,t){let n=e[Lt],i=n.indexOf(t);n.splice(i,1)}function qr(e,t){if(jt(t))return;let n=t[ee];n.destroyNode&&zr(e,t,n,3,null,null),sm(t)}function Ms(e,t){if(jt(t))return;let n=R(null);try{t[P]&=-129,t[P]|=256,t[Se]&&It(t[Se]),cm(e,t),lm(e,t),t[N].type===1&&t[ee].destroy();let i=t[gt];if(i!==null&&Ue(t[ce])){i!==t[ce]&&_a(i,t);let r=t[Ke];r!==null&&r.detachView(e)}ks(t)}finally{R(n)}}function xc(e,t,n,i){let r=e?.[Ot];if(r==null||r.leave==null||!r.leave.has(t.index))return i(!1);e&&Wt.add(e),Nu(n,()=>{if(r.leave&&r.leave.has(t.index)){let s=r.leave.get(t.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let u=s.animateFns[l],{promise:f}=u();a.push(f)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(a),am(e,i)}else e&&Wt.delete(e),i(!1)},r)}function am(e,t){let n=e[Ot]?.running;if(n){n.then(()=>{e[Ot].running=void 0,Wt.delete(e),t(!0)});return}t(!1)}function lm(e,t){let n=e.cleanup,i=t[pn];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?i[a]():i[-a].unsubscribe(),s+=2}else{let a=i[n[s+1]];n[s].call(a)}i!==null&&(t[pn]=null);let r=t[it];if(r!==null){t[it]=null;for(let s=0;s<r.length;s++){let a=r[s];a()}}let o=t[st];if(o!==null){t[st]=null;for(let s of o)s.destroy()}}function cm(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=t[n[i]];if(!(r instanceof si)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Q(4,a,l);try{l.call(a)}finally{Q(5,a,l)}}else{Q(4,r,o);try{o.call(r)}finally{Q(5,r,o)}}}}}function um(e,t,n){return dm(e,t.parent,n)}function dm(e,t,n){let i=t;for(;i!==null&&i.type&168;)t=i,i=t.parent;if(i===null)return n[He];if(Vt(i)){let{encapsulation:r}=e.data[i.directiveStart+i.componentOffset];if(r===ct.None||r===ct.Emulated)return null}return $e(i,n)}function fm(e,t,n){return mm(e,t,n)}function pm(e,t,n){return e.type&40?$e(e,n):null}var mm=pm,Mc;function Da(e,t,n,i){let r=um(e,i,t),o=t[ee],s=i.parent||t[Le],a=fm(s,i,t);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Cc(o,r,n[l],a,!1);else Cc(o,r,n,a,!1);Mc!==void 0&&Mc(o,i,t,n,r)}function ri(e,t){if(t!==null){let n=t.type;if(n&3)return $e(t,e);if(n&4)return Bs(-1,e[t.index]);if(n&8){let i=t.child;if(i!==null)return ri(e,i);{let r=e[t.index];return Ue(r)?Bs(-1,r):Be(r)}}else{if(n&128)return ri(e,t.next);if(n&32)return va(t,e)()||Be(e[t.index]);{let i=ku(e,t);if(i!==null){if(Array.isArray(i))return i[0];let r=mt(e[Ve]);return ri(r,i)}else return ri(e,t.next)}}}return null}function ku(e,t){if(t!==null){let i=e[Ve][Le],r=t.projection;return i.projection[r]}return null}function Bs(e,t){let n=ne+e+1;if(n<t.length){let i=t[n],r=i[N].firstChild;if(r!==null)return ri(i,r)}return t[vt]}function ba(e,t,n,i,r,o,s){for(;n!=null;){let a=i[ot];if(n.type===128){n=n.next;continue}let l=i[n.index],u=n.type;if(s&&t===0&&(l&&Cn(Be(l),i),n.flags|=2),!da(n))if(u&8)ba(e,t,n.child,i,r,o,!1),yn(t,e,a,r,l,n,o,i);else if(u&32){let f=va(n,i),E;for(;E=f();)yn(t,e,a,r,E,n,o,i);yn(t,e,a,r,l,n,o,i)}else u&16?hm(e,t,i,n,r,o):yn(t,e,a,r,l,n,o,i);n=s?n.projectionNext:n.next}}function zr(e,t,n,i,r,o){ba(n,i,e.firstChild,t,r,o,!1)}function hm(e,t,n,i,r,o){let s=n[Ve],l=s[Le].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];yn(t,e,n[ot],r,f,i,o,n)}else{let u=l,f=s[ce];nu(i)&&(u.flags|=128),ba(e,t,u,f,r,o,!0)}}function gm(e,t,n,i,r,o,s){let a=i[vt],l=Be(i);a!==l&&yn(t,e,n,o,a,r,s);for(let u=ne;u<i.length;u++){let f=i[u];zr(f[N],f,e,t,o,a)}}function vm(e,t,n,i,r){if(t)r?e.addClass(n,i):e.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:ut.DashCase;r==null?e.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=ut.Important),e.setStyle(n,i,r,o))}}function Pu(e,t,n,i,r){let o=et(),s=i&2;try{Et(-1),s&&t.length>ge&&wu(e,t,ge,!1),Q(s?2:0,r,n),n(i,r)}finally{Et(o),Q(s?3:1,r,n)}}function Fu(e,t,n){Im(e,t,n),(n.flags&64)===64&&wm(e,t,n)}function Ia(e,t,n=$e){let i=t.localNames;if(i!==null){let r=t.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(t,e):e[s];e[r++]=a}}}function ym(e,t,n,i){let o=i.get(du,uu)||n===ct.ShadowDom,s=e.selectRootElement(t,o);return Em(s),s}function Em(e){Cm(e)}var Cm=()=>null;function _m(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Dm(e,t,n,i,r,o){let s=t[N];if(wa(e,s,t,n,i)){Vt(e)&&bm(t,e.index);return}e.type&3&&(n=_m(n)),Ou(e,t,n,i,r,o)}function Ou(e,t,n,i,r,o){if(e.type&3){let s=$e(e,t);i=o!=null?o(i,e.value||"",n):i,r.setProperty(s,n,i)}else e.type&12}function bm(e,t){let n=Je(t,e);n[P]&16||(n[P]|=64)}function Im(e,t,n){let i=n.directiveStart,r=n.directiveEnd;Vt(n)&&Qp(t,n,e.data[i+n.componentOffset]),e.firstCreatePass||Yc(n,t);let o=n.initialInputs;for(let s=i;s<r;s++){let a=e.data[s],l=Mr(t,e,s,n);if(Cn(l,t),o!==null&&Tm(t,s-i,l,a,n,o),Bt(a)){let u=Je(n.index,t);u[oe]=Mr(t,e,s,n)}}}function wm(e,t,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=tc();try{Et(o);for(let a=i;a<r;a++){let l=e.data[a],u=t[a];ur(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&xm(l,u)}}finally{Et(-1),ur(s)}}function xm(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Mm(e,t){let n=e.directiveRegistry,i=null;if(n)for(let r=0;r<n.length;r++){let o=n[r];Op(t,o.selectors,!1)&&(i??=[],Bt(o)?i.unshift(o):i.push(o))}return i}function Am(e,t,n,i,r,o){let s=$e(e,t);Sm(t[ee],s,o,e.value,n,i,r)}function Sm(e,t,n,i,r,o,s){if(o==null)e.removeAttribute(t,r,n);else{let a=s==null?ht(o):s(o,i||"",r);e.setAttribute(t,r,a,n)}}function Tm(e,t,n,i,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],u=s[a+1];Os(i,n,l,u)}}function Lu(e,t,n,i,r){let o=ge+n,s=t[N],a=r(s,t,e,i,n);t[o]=a,gn(e,!0);let l=e.type===2;return l?(Du(t[ee],a,e),(Gl()===0||sr(e))&&Cn(a,t),ql()):Cn(a,t),hr()&&(!l||!da(e))&&Da(s,t,a,e),e}function Vu(e){let t=e;return Es()?Yl():(t=t.parent,gn(t,!1)),t}function Nm(e,t){let n=e[ot];if(!n)return;let i;try{i=n.get(Ct,null)}catch{i=null}i?.(t)}function wa(e,t,n,i,r){let o=e.inputs?.[i],s=e.hostDirectiveInputs?.[i],a=!1;if(s)for(let l=0;l<s.length;l+=2){let u=s[l],f=s[l+1],E=t.data[u];Os(E,n[u],f,r),a=!0}if(o)for(let l of o){let u=n[l],f=t.data[l];Os(f,u,i,r),a=!0}return a}function Rm(e,t){let n=Je(t,e),i=n[N];km(i,n);let r=n[He];r!==null&&n[fn]===null&&(n[fn]=fu(r,n[ot])),Q(18),xa(i,n,n[oe]),Q(19,n[oe])}function km(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function xa(e,t,n){fr(t);try{let i=e.viewQuery;i!==null&&Fs(1,i,n);let r=e.template;r!==null&&Pu(e,t,r,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ke]?.finishViewCreation(e),e.staticContentQueries&&pu(e,t),e.staticViewQueries&&Fs(2,e.viewQuery,n);let o=e.components;o!==null&&Pm(t,o)}catch(i){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),i}finally{t[P]&=-5,pr()}}function Pm(e,t){for(let n=0;n<t.length;n++)Rm(e,t[n])}function Wr(e,t,n,i){let r=R(null);try{let o=t.tView,a=e[P]&4096?4096:16,l=ha(e,o,n,a,null,t,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),u=e[t.index];l[gt]=u;let f=e[Ke];return f!==null&&(l[Ke]=f.createEmbeddedView(o)),xa(o,l,n),l}finally{R(r)}}function li(e,t){return!t||t.firstChild===null||nu(e)}function ci(e,t,n,i,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&i.push(Be(o)),Ue(o)&&Bu(o,i);let s=n.type;if(s&8)ci(e,t,n.child,i);else if(s&32){let a=va(n,t),l;for(;l=a();)i.push(l)}else if(s&16){let a=ku(t,n);if(Array.isArray(a))i.push(...a);else{let l=mt(t[Ve]);ci(l[N],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function Bu(e,t){for(let n=ne;n<e.length;n++){let i=e[n],r=i[N].firstChild;r!==null&&ci(i[N],i,r,t)}e[vt]!==e[He]&&t.push(e[vt])}function ju(e){if(e[or]!==null){for(let t of e[or])t.impl.addSequence(t);e[or].length=0}}var Hu=[];function Fm(e){return e[Se]??Om(e)}function Om(e){let t=Hu.pop()??Object.create(Vm);return t.lView=e,t}function Lm(e){e.lView[Se]!==e&&(e.lView=null,Hu.push(e))}var Vm=S(A({},Dt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Ht(e.lView)},consumerOnSignalRead(){this.lView[Se]=this}});function Bm(e){let t=e[Se]??Object.create(jm);return t.lView=e,t}var jm=S(A({},Dt),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=mt(e.lView);for(;t&&!Uu(t[N]);)t=mt(t);t&&ds(t)},consumerOnSignalRead(){this.lView[Se]=this}});function Uu(e){return e.type!==2}function $u(e){if(e[st]===null)return;let t=!0;for(;t;){let n=!1;for(let i of e[st])i.dirty&&(n=!0,i.zone===null||Zone.current===i.zone?i.run():i.zone.run(()=>i.run()));t=n&&!!(e[P]&8192)}}var Hm=100;function Gu(e,t=0){let i=e[Ze].rendererFactory,r=!1;r||i.begin?.();try{Um(e,t)}finally{r||i.end?.()}}function Um(e,t){let n=Cs();try{vn(!0),js(e,t);let i=0;for(;ei(e);){if(i===Hm)throw new B(103,!1);i++,js(e,1)}}finally{vn(n)}}function $m(e,t,n,i){if(jt(t))return;let r=t[P],o=!1,s=!1;fr(t);let a=!0,l=null,u=null;o||(Uu(e)?(u=Fm(t),l=bt(u)):Pi()===null?(a=!1,u=Bm(t),l=bt(u)):t[Se]&&(It(t[Se]),t[Se]=null));try{us(t),Jl(e.bindingStartIndex),n!==null&&Pu(e,t,n,2,i);let f=(r&3)===3;if(!o)if(f){let D=e.preOrderCheckHooks;D!==null&&Er(t,D,null)}else{let D=e.preOrderHooks;D!==null&&Cr(t,D,0,null),ws(t,0)}if(s||Gm(t),$u(t),qu(t,0),e.contentQueries!==null&&pu(e,t),!o)if(f){let D=e.contentCheckHooks;D!==null&&Er(t,D)}else{let D=e.contentHooks;D!==null&&Cr(t,D,1),ws(t,1)}zm(e,t);let E=e.components;E!==null&&Wu(t,E,0);let b=e.viewQuery;if(b!==null&&Fs(2,b,i),!o)if(f){let D=e.viewCheckHooks;D!==null&&Er(t,D)}else{let D=e.viewHooks;D!==null&&Cr(t,D,2),ws(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[rr]){for(let D of t[rr])D();t[rr]=null}o||(ju(t),t[P]&=-73)}catch(f){throw o||Ht(t),f}finally{u!==null&&(en(u,l),a&&Lm(u)),pr()}}function qu(e,t){for(let n=ru(e);n!==null;n=ou(n))for(let i=ne;i<n.length;i++){let r=n[i];zu(r,t)}}function Gm(e){for(let t=ru(e);t!==null;t=ou(t)){if(!(t[P]&2))continue;let n=t[Lt];for(let i=0;i<n.length;i++){let r=n[i];ds(r)}}}function qm(e,t,n){Q(18);let i=Je(t,e);zu(i,n),Q(19,i[oe])}function zu(e,t){ar(e)&&js(e,t)}function js(e,t){let i=e[N],r=e[P],o=e[Se],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&tn(o)),s||=!1,o&&(o.dirty=!1),e[P]&=-9217,s)$m(i,e,i.template,e[oe]);else if(r&8192){let a=R(null);try{$u(e),qu(e,1);let l=i.components;l!==null&&Wu(e,l,1),ju(e)}finally{R(a)}}}function Wu(e,t,n){for(let i=0;i<t.length;i++)qm(e,t[i],n)}function zm(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Et(~r);else{let o=r,s=n[++i],a=n[++i];ec(s,o);let l=t[o];Q(24,l),a(2,l),Q(25,l)}}}finally{Et(-1)}}function Ma(e,t){let n=Cs()?64:1088;for(e[Ze].changeDetectionScheduler?.notify(t);e;){e[P]|=n;let i=mt(e);if(hn(e)&&!i)return e;e=i}return null}function Qu(e,t,n,i){return[e,!0,0,t,null,i,null,n,null,null]}function Yu(e,t){let n=ne+t;if(n<e.length)return e[n]}function Qr(e,t,n,i=!0){let r=t[N];if(Wm(r,t,e,n),i){let s=Bs(n,e),a=t[ee],l=a.parentNode(e[vt]);l!==null&&om(r,e[Le],a,t,l,s)}let o=t[fn];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Zu(e,t){let n=ui(e,t);return n!==void 0&&qr(n[N],n),n}function ui(e,t){if(e.length<=ne)return;let n=ne+t,i=e[n];if(i){let r=i[gt];r!==null&&r!==e&&_a(r,i),t>0&&(e[n-1][Oe]=i[Oe]);let o=Wn(e,ne+t);rm(i[N],i);let s=o[Ke];s!==null&&s.detachView(o[N]),i[ce]=null,i[Oe]=null,i[P]&=-129}return i}function Wm(e,t,n,i){let r=ne+i,o=n.length;i>0&&(n[r-1][Oe]=t),i<o-ne?(t[Oe]=n[r],Jo(n,ne+i,t)):(n.push(t),t[Oe]=null),t[ce]=n;let s=t[gt];s!==null&&n!==s&&Ku(s,t);let a=t[Ke];a!==null&&a.insertView(e),lr(t),t[P]|=128}function Ku(e,t){let n=e[Lt],i=t[ce];if(at(i))e[P]|=2;else{let r=i[ce][Ve];t[Ve]!==r&&(e[P]|=2)}n===null?e[Lt]=[t]:n.push(t)}var _n=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[N];return ci(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[oe]}set context(t){this._lView[oe]=t}get destroyed(){return jt(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[ce];if(Ue(t)){let n=t[Jn],i=n?n.indexOf(this):-1;i>-1&&(ui(t,i),Wn(n,i))}this._attachedToViewContainer=!1}qr(this._lView[N],this._lView)}onDestroy(t){fs(this._lView,t)}markForCheck(){Ma(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[P]&=-129}reattach(){lr(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,Gu(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new B(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=hn(this._lView),n=this._lView[gt];n!==null&&!t&&_a(n,this._lView),Ru(this._lView[N],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new B(902,!1);this._appRef=t;let n=hn(this._lView),i=this._lView[gt];i!==null&&!n&&Ku(i,this._lView),lr(this._lView)}};var Dn=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=Qm;constructor(n,i,r){this._declarationLView=n,this._declarationTContainer=i,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,i){return this.createEmbeddedViewImpl(n,i)}createEmbeddedViewImpl(n,i,r){let o=Wr(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:i,dehydratedView:r});return new _n(o)}}return e})();function Qm(){return Aa(Te(),U())}function Aa(e,t){return e.type&4?new Dn(t,e,In(e,t)):null}function Yr(e,t,n,i,r){let o=e.data[t];if(o===null)o=Ym(e,t,n,i,r),Xl()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=Ql();o.injectorIndex=s===null?-1:s.injectorIndex}return gn(o,!0),o}function Ym(e,t,n,i,r){let o=ys(),s=Es(),a=s?o:o&&o.parent,l=e.data[t]=Km(e,a,n,t,i,r);return Zm(e,l,o,s),l}function Zm(e,t,n,i){e.firstChild===null&&(e.firstChild=t),n!==null&&(i?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function Km(e,t,n,i,r,o){let s=t?t.injectorIndex:-1,a=0;return Wl()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var z_=new RegExp(`^(\\d+)*(${wp}|${Ip})*(.*)`);function Jm(e){let t=e[ss]??[],i=e[ce][ee],r=[];for(let o of t)o.data[cu]!==void 0?r.push(o):Xm(o,i);e[ss]=r}function Xm(e,t){let n=0,i=e.firstChild;if(i){let r=e.data[lu];for(;n<r;){let o=i.nextSibling;_u(t,i,!1),i=o,n++}}}var eh=()=>null,th=()=>null;function Hs(e,t){return eh(e,t)}function Ju(e,t,n){return th(e,t,n)}var Xu=class{},Zr=class{},Us=class{resolveComponentFactory(t){throw new B(917,!1)}},Kr=class{static NULL=new Us},Qt=class{};var ed=(()=>{class e{static \u0275prov=J({token:e,providedIn:"root",factory:()=>null})}return e})();var Dr={},$s=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,i){let r=this.injector.get(t,Dr,i);return r!==Dr||n===Dr?r:this.parentInjector.get(t,n,i)}};function Rr(e,t,n){let i=n?e.styles:null,r=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=Yi(r,a);else if(o==2){let l=a,u=t[++s];i=Yi(i,l+": "+u+";")}}n?e.styles=i:e.stylesWithoutHost=i,n?e.classes=r:e.classesWithoutHost=r}function Sa(e,t=0){let n=U();if(n===null)return q(e,t);let i=Te();return Xc(i,n,Ae(e),t)}function nh(e,t,n,i,r){let o=i===null?null:{"":-1},s=r(e,n);if(s!==null){let a=s,l=null,u=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,u]=f.resolveHostDirectives(s);break}oh(e,t,n,a,o,l,u)}o!==null&&i!==null&&ih(n,i,o)}function ih(e,t,n){let i=e.localNames=[];for(let r=0;r<t.length;r+=2){let o=n[t[r+1]];if(o==null)throw new B(-301,!1);i.push(t[r],o)}}function rh(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function oh(e,t,n,i,r,o,s){let a=i.length,l=!1;for(let b=0;b<a;b++){let D=i[b];!l&&Bt(D)&&(l=!0,rh(e,n,b)),fp(Yc(n,t),e,D.type)}dh(n,e.data.length,a);for(let b=0;b<a;b++){let D=i[b];D.providersResolver&&D.providersResolver(D)}let u=!1,f=!1,E=Iu(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let b=0;b<a;b++){let D=i[b];if(n.mergedAttrs=Br(n.mergedAttrs,D.hostAttrs),ah(e,n,t,E,D),uh(E,D,r),s!==null&&s.has(D)){let[G,se]=s.get(D);n.directiveToIndex.set(D.type,[E,G+n.directiveStart,se+n.directiveStart])}else(o===null||!o.has(D))&&n.directiveToIndex.set(D.type,E);D.contentQueries!==null&&(n.flags|=4),(D.hostBindings!==null||D.hostAttrs!==null||D.hostVars!==0)&&(n.flags|=64);let k=D.type.prototype;!u&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),u=!0),!f&&(k.ngOnChanges||k.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),f=!0),E++}sh(e,n,o)}function sh(e,t,n){for(let i=t.directiveStart;i<t.directiveEnd;i++){let r=e.data[i];if(n===null||!n.has(r))Ac(0,t,r,i),Ac(1,t,r,i),Tc(t,i,!1);else{let o=n.get(r);Sc(0,t,o,i),Sc(1,t,o,i),Tc(t,i,!0)}}}function Ac(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(i),td(t,o)}}function Sc(e,t,n,i){let r=e===0?n.inputs:n.outputs;for(let o in r)if(r.hasOwnProperty(o)){let s=r[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(i,o),td(t,s)}}function td(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Tc(e,t,n){let{attrs:i,inputs:r,hostDirectiveInputs:o}=e;if(i===null||!n&&r===null||n&&o===null||pa(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<i.length;){let l=i[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&r.hasOwnProperty(l)){let u=r[l];for(let f of u)if(f===t){s??=[],s.push(l,i[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let u=o[l];for(let f=0;f<u.length;f+=2)if(u[f]===t){s??=[],s.push(u[f+1],i[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function ah(e,t,n,i,r){e.data[i]=r;let o=r.factory||(r.factory=un(r.type,!0)),s=new si(o,Bt(r),Sa,null);e.blueprint[i]=s,n[i]=s,lh(e,t,i,Iu(e,n,r.hostVars,De),r)}function lh(e,t,n,i,r){let o=r.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;ch(s)!=a&&s.push(a),s.push(n,i,o)}}function ch(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function uh(e,t,n){if(n){if(t.exportAs)for(let i=0;i<t.exportAs.length;i++)n[t.exportAs[i]]=e;Bt(t)&&(n[""]=e)}}function dh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function nd(e,t,n,i,r,o,s,a){let l=t[N],u=l.consts,f=Xe(u,s),E=Yr(l,e,n,i,f);return o&&nh(l,t,E,Xe(u,a),r),E.mergedAttrs=Br(E.mergedAttrs,E.attrs),E.attrs!==null&&Rr(E,E.attrs,!1),E.mergedAttrs!==null&&Rr(E,E.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,E),E}function id(e,t){tp(e,t),as(t)&&e.queries.elementEnd(t)}function fh(e,t,n,i,r,o){let s=t.consts,a=Xe(s,r),l=Yr(t,e,n,i,a);if(l.mergedAttrs=Br(l.mergedAttrs,l.attrs),o!=null){let u=Xe(s,o);l.localNames=[];for(let f=0;f<u.length;f+=2)l.localNames.push(u[f],-1)}return l.attrs!==null&&Rr(l,l.attrs,!1),l.mergedAttrs!==null&&Rr(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function ph(e,t,n){return e[t]=n}function mh(e,t){return e[t]}function We(e,t,n){if(n===De)return!1;let i=e[t];return Object.is(i,n)?!1:(e[t]=n,!0)}function hh(e,t,n,i){let r=We(e,t,n);return We(e,t+1,i)||r}function br(e,t,n){return function i(r){let o=Vt(e)?Je(e.index,t):t;Ma(o,5);let s=t[oe],a=Nc(t,s,n,r),l=i.__ngNextListenerFn__;for(;l;)a=Nc(t,s,l,r)&&a,l=l.__ngNextListenerFn__;return a}}function Nc(e,t,n,i){let r=R(null);try{return Q(6,t,n),n(i)!==!1}catch(o){return Nm(e,o),!1}finally{Q(7,t,n),R(r)}}function rd(e,t,n,i,r,o,s,a){let l=sr(e),u=!1,f=null;if(!i&&l&&(f=vh(t,n,o,e.index)),f!==null){let E=f.__ngLastListenerFn__||f;E.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,u=!0}else{let E=$e(e,n),b=i?i(E):E;Mp(n,b,o,a);let D=r.listen(b,o,a);if(!gh(o)){let k=i?G=>i(Be(G[e.index])):e.index;od(k,t,n,o,a,D,!1)}}return u}function gh(e){return e.startsWith("animation")||e.startsWith("transition")}function vh(e,t,n,i){let r=e.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=t[pn],l=r[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function od(e,t,n,i,r,o,s){let a=t.firstCreatePass?ms(t):null,l=ps(n),u=l.length;l.push(r,o),a&&a.push(i,e,u,(u+1)*(s?-1:1))}function Rc(e,t,n,i,r,o){let s=t[n],a=t[N],u=a.data[n].outputs[i],E=s[u].subscribe(o);od(e.index,a,t,r,o,E,!0)}var Gs=Symbol("BINDING");var qs=class extends Kr{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=kt(t);return new di(n,this.ngModule)}};function yh(e){return Object.keys(e).map(t=>{let[n,i,r]=e[t],o={propName:n,templateName:t,isSignal:(i&Gr.SignalBased)!==0};return r&&(o.transform=r),o})}function Eh(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function Ch(e,t,n){let i=t instanceof Pe?t:t?.injector;return i&&e.getStandaloneInjector!==null&&(i=e.getStandaloneInjector(i)||i),i?new $s(n,i):n}function _h(e){let t=e.get(Qt,null);if(t===null)throw new B(407,!1);let n=e.get(ed,null),i=e.get(Ye,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:i,ngReflect:!1}}function Dh(e,t){let n=sd(e);return Eu(t,n,n==="svg"?ls:n==="math"?Bl:null)}function sd(e){return(e.selectors[0][0]||"div").toLowerCase()}var di=class extends Zr{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=yh(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Eh(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=jp(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,i,r,o,s){Q(22);let a=R(null);try{let l=this.componentDef,u=bh(i,l,s,o),f=Ch(l,r||this.ngModule,t),E=_h(f),b=E.rendererFactory.createRenderer(null,l),D=i?ym(b,i,l.encapsulation,f):Dh(l,b),k=s?.some(kc)||o?.some(ae=>typeof ae!="function"&&ae.bindings.some(kc)),G=ha(null,u,null,512|bu(l),null,null,E,b,f,null,fu(D,f,!0));G[ge]=D,fr(G);let se=null;try{let ae=nd(ge,G,2,"#host",()=>u.directiveRegistry,!0,0);Du(b,D,ae),Cn(D,G),Fu(u,G,ae),mu(u,ae,G),id(u,ae),n!==void 0&&wh(ae,this.ngContentSelectors,n),se=Je(ae.index,G),G[oe]=se[oe],xa(u,G,null)}catch(ae){throw se!==null&&ks(se),ks(G),ae}finally{Q(23),pr()}return new kr(this.componentType,G,!!k)}finally{R(a)}}};function bh(e,t,n,i){let r=e?["ng-version","20.3.12"]:Hp(t.selectors[0]),o=null,s=null,a=0;if(n)for(let f of n)a+=f[Gs].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(i)for(let f=0;f<i.length;f++){let E=i[f];if(typeof E!="function")for(let b of E.bindings){a+=b[Gs].requiredVars;let D=f+1;b.create&&(b.targetIdx=D,(o??=[]).push(b)),b.update&&(b.targetIdx=D,(s??=[]).push(b))}}let l=[t];if(i)for(let f of i){let E=typeof f=="function"?f:f.type,b=ts(E);l.push(b)}return ma(0,null,Ih(o,s),1,a,l,null,null,null,[r],null)}function Ih(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let i of e)i.create();if(n&2&&t)for(let i of t)i.update()}}function kc(e){let t=e[Gs].kind;return t==="input"||t==="twoWay"}var kr=class extends Xu{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,i){super(),this._rootLView=n,this._hasInputBindings=i,this._tNode=Xn(n[N],ge),this.location=In(this._tNode,n),this.instance=Je(this._tNode.index,n)[oe],this.hostView=this.changeDetectorRef=new _n(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let i=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let r=this._rootLView,o=wa(i,r[N],r,t,n);this.previousInputValues.set(t,n);let s=Je(i.index,r);Ma(s,1)}get injector(){return new zt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function wh(e,t,n){let i=e.projection=[];for(let r=0;r<t.length;r++){let o=n[r];i.push(o!=null&&o.length?Array.from(o):null)}}var gi=(()=>{class e{static __NG_ELEMENT_ID__=xh}return e})();function xh(){let e=Te();return ld(e,U())}var Mh=gi,ad=class extends Mh{_lContainer;_hostTNode;_hostLView;constructor(t,n,i){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=i}get element(){return In(this._hostTNode,this._hostLView)}get injector(){return new zt(this._hostTNode,this._hostLView)}get parentInjector(){let t=la(this._hostTNode,this._hostLView);if(zc(t)){let n=xr(t,this._hostLView),i=wr(t),r=n[N].data[i+8];return new zt(r,n)}else return new zt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Pc(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ne}createEmbeddedView(t,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=Hs(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,li(this._hostTNode,s)),a}createComponent(t,n,i,r,o,s,a){let l=t&&!Yf(t),u;if(l)u=n;else{let se=n||{};u=se.index,i=se.injector,r=se.projectableNodes,o=se.environmentInjector||se.ngModuleRef,s=se.directives,a=se.bindings}let f=l?t:new di(kt(t)),E=i||this.parentInjector;if(!o&&f.ngModule==null){let ae=(l?E:this.parentInjector).get(Pe,null);ae&&(o=ae)}let b=kt(f.componentType??{}),D=Hs(this._lContainer,b?.id??null),k=D?.firstChild??null,G=f.create(E,r,k,o,s,a);return this.insertImpl(G.hostView,u,li(this._hostTNode,D)),G}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,i){let r=t._lView;if(jl(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=r[ce],u=new ad(l,l[Le],l[ce]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return Qr(s,r,o,i),t.attachToViewContainerRef(),Jo(As(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Pc(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),i=ui(this._lContainer,n);i&&(Wn(As(this._lContainer),n),qr(i[N],i))}detach(t){let n=this._adjustIndex(t,-1),i=ui(this._lContainer,n);return i&&Wn(As(this._lContainer),n)!=null?new _n(i):null}_adjustIndex(t,n=0){return t??this.length+n}};function Pc(e){return e[Jn]}function As(e){return e[Jn]||(e[Jn]=[])}function ld(e,t){let n,i=t[e.index];return Ue(i)?n=i:(n=Qu(i,t,null,e),t[e.index]=n,ga(t,n)),Sh(n,t,e,i),new ad(n,e,t)}function Ah(e,t){let n=e[ee],i=n.createComment(""),r=$e(t,e),o=n.parentNode(r);return Tr(n,o,i,n.nextSibling(r),!1),i}var Sh=Rh,Th=()=>!1;function Nh(e,t,n){return Th(e,t,n)}function Rh(e,t,n,i){if(e[vt])return;let r;n.type&8?r=Be(i):r=Ah(t,n),e[vt]=r}var zs=class e{queryList;matches=null;constructor(t){this.queryList=t}clone(){return new e(this.queryList)}setDirty(){this.queryList.setDirty()}},Ws=class e{queries;constructor(t=[]){this.queries=t}createEmbeddedView(t){let n=t.queries;if(n!==null){let i=t.contentQueries!==null?t.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new e(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)dd(t,n).matches!==null&&this.queries[n].setDirty()}},Qs=class{flags;read;predicate;constructor(t,n,i=null){this.flags=n,this.read=i,typeof t=="string"?this.predicate=Bh(t):this.predicate=t}},Ys=class e{queries;constructor(t=[]){this.queries=t}elementStart(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(t,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new e(n):null}template(t,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},Zs=class e{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(t,n=-1){this.metadata=t,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=t.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(t,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(t,n,kh(n,o)),this.matchTNodeWithReadOption(t,n,_r(n,t,o,!1,!1))}else i===Dn?n.type&4&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,_r(n,t,i,!1,!1))}matchTNodeWithReadOption(t,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===wn||r===gi||r===Dn&&n.type&4)this.addMatch(n.index,-2);else{let o=_r(n,t,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(t,n){this.matches===null?this.matches=[t,n]:this.matches.push(t,n)}};function kh(e,t){let n=e.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===t)return n[i+1]}return null}function Ph(e,t){return e.type&11?In(e,t):e.type&4?Aa(e,t):null}function Fh(e,t,n,i){return n===-1?Ph(t,e):n===-2?Oh(e,t,i):Mr(e,e[N],n,t)}function Oh(e,t,n){if(n===wn)return In(t,e);if(n===Dn)return Aa(t,e);if(n===gi)return ld(t,e)}function cd(e,t,n,i){let r=t[Ke].queries[i];if(r.matches===null){let o=e.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let u=s[l];if(u<0)a.push(null);else{let f=o[u];a.push(Fh(t,f,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function Ks(e,t,n,i){let r=e.queries.getByIndex(n),o=r.matches;if(o!==null){let s=cd(e,t,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let u=o[a+1],f=t[-l];for(let E=ne;E<f.length;E++){let b=f[E];b[gt]===b[ce]&&Ks(b[N],b,u,i)}if(f[Lt]!==null){let E=f[Lt];for(let b=0;b<E.length;b++){let D=E[b];Ks(D[N],D,u,i)}}}}}return i}function ud(e,t){return e[Ke].queries[t].queryList}function Lh(e,t,n){let i=new Ar((n&4)===4);return $l(e,t,i,i.destroy),(t[Ke]??=new Ws).queries.push(new zs(i))-1}function Vh(e,t,n){let i=_e();return i.firstCreatePass&&(jh(i,new Qs(e,t,n),-1),(t&2)===2&&(i.staticViewQueries=!0)),Lh(i,U(),t)}function Bh(e){return e.split(",").map(t=>t.trim())}function jh(e,t,n){e.queries===null&&(e.queries=new Ys),e.queries.track(new Zs(t,n))}function dd(e,t){return e.queries.getByIndex(t)}function Hh(e,t){let n=e[N],i=dd(n,t);return i.crossesNgTemplate?Ks(n,e,t,[]):cd(n,e,i,t)}function fd(e,t,n){let i,r=Bn(()=>{i._dirtyCounter();let o=$h(i,e);if(t&&o===void 0)throw new B(-951,!1);return o});return i=r[he],i._dirtyCounter=I(0),i._flatValue=void 0,r}function pd(e){return fd(!0,!1,e)}function md(e){return fd(!0,!0,e)}function Uh(e,t){let n=e[he];n._lView=U(),n._queryIndex=t,n._queryList=ud(n._lView,t),n._queryList.onDirty(()=>n._dirtyCounter.update(i=>i+1))}function $h(e,t){let n=e._lView,i=e._queryIndex;if(n===void 0||i===void 0||n[P]&4)return t?void 0:Ce;let r=ud(n,i),o=Hh(n,i);return r.reset(o,yp),t?r.first:r._changesDetected||e._flatValue===void 0?e._flatValue=r.toArray():e._flatValue}var Pr=class{};var fi=class extends Pr{injector;componentFactoryResolver=new qs(this);instance=null;constructor(t){super();let n=new St([...t.providers,{provide:Pr,useValue:this},{provide:Kr,useValue:this.componentFactoryResolver}],t.parent||Zn(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function hd(e,t,n=null){return new fi({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var Gh=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=ns(!1,n.type),r=i.length>0?hd([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=J({token:e,providedIn:"environment",factory:()=>new e(q(Pe))})}return e})();function ue(e){return aa(()=>{let t=Qh(e),n=S(A({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===ca.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?r=>r.get(Gh).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||ct.Emulated,styles:e.styles||Ce,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Zt("NgStandalone"),Yh(n);let i=e.dependencies;return n.directiveDefs=Fc(i,qh),n.pipeDefs=Fc(i,Rl),n.id=Zh(n),n})}function qh(e){return kt(e)||ts(e)}function Jr(e){return aa(()=>({type:e.type,bootstrap:e.bootstrap||Ce,declarations:e.declarations||Ce,imports:e.imports||Ce,exports:e.exports||Ce,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function zh(e,t){if(e==null)return Nt;let n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i],o,s,a,l;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o,l=r[3]||null):(o=r,s=r,a=Gr.None,l=null),n[o]=[i,a,l],t[o]=s}return n}function Wh(e){if(e==null)return Nt;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function Qh(e){let t={};return{type:e.type,providersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Nt,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ce,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zh(e.inputs,t),outputs:Wh(e.outputs),debugInfo:null}}function Yh(e){e.features?.forEach(t=>t(e))}function Fc(e,t){return e?()=>{let n=typeof e=="function"?e():e,i=[];for(let r of n){let o=t(r);o!==null&&i.push(o)}return i}:null}function Zh(e){let t=0,n=typeof e.consts=="function"?"":e.consts,i=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of i.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function Kh(e,t,n,i,r,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Br(e.mergedAttrs,e.attrs);let f=e.tView=ma(2,e,r,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),f.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),gn(e,!1);let l=Jh(n,t,e,i);hr()&&Da(n,t,l,e),Cn(l,t);let u=Qu(l,t,l,e);t[i+ge]=u,ga(t,u),Nh(u,e,t)}function Fr(e,t,n,i,r,o,s,a,l,u,f){let E=n+ge,b;if(t.firstCreatePass){if(b=Yr(t,E,4,s||null,a||null),u!=null){let D=Xe(t.consts,u);b.localNames=[];for(let k=0;k<D.length;k+=2)b.localNames.push(D[k],-1)}}else b=t.data[E];return Kh(b,e,t,n,i,r,o,l),u!=null&&Ia(e,b,f),b}var Jh=Xh;function Xh(e,t,n,i){return gr(!0),t[ee].createComment("")}var Ta=new $("");function Na(e){return!!e&&typeof e.then=="function"}function gd(e){return!!e&&typeof e.subscribe=="function"}var vd=new $("");var Ra=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i});appInits=T(vd,{optional:!0})??[];injector=T(rt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let o=ir(this.injector,r);if(Na(o))n.push(o);else if(gd(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),n.length===0&&i(),this.initialized=!0}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yd=new $("");function Ed(){Io(()=>{let e="";throw new B(600,e)})}function Cd(e){return e.isBoundToModule}var eg=10;var vi=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=T(Ct);afterRenderManager=T(Su);zonelessEnabled=T(ni);rootEffectScheduler=T(ii);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ft;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=T(Gt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Po(n=>!n))}constructor(){T(hi,{optional:!0})}whenStable(){let n;return new Promise(i=>{n=this.isStable.subscribe({next:r=>{r&&i()}})}).finally(()=>{n.unsubscribe()})}_injector=T(Pe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,i){return this.bootstrapImpl(n,i)}bootstrapImpl(n,i,r=rt.NULL){return this._injector.get(fe).run(()=>{Q(10);let s=n instanceof Zr;if(!this._injector.get(Ra).done){let k="";throw new B(405,k)}let l;s?l=n:l=this._injector.get(Kr).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let u=Cd(l)?void 0:this._injector.get(Pr),f=i||l.selector,E=l.create(r,[],f,u),b=E.location.nativeElement,D=E.injector.get(Ta,null);return D?.registerApplication(b),E.onDestroy(()=>{this.detachView(E.hostView),oi(this.components,E),D?.unregisterApplication(b)}),this._loadComponent(E),Q(11,E),E})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Q(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(ya.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new B(101,!1);let n=R(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,R(n),this.afterTick.next(),Q(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Qt,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<eg;)Q(14),this.synchronizeOnce(),Q(15)}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let i=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!i&&!ei(r))continue;let o=i&&!this.zonelessEnabled?0:1;Gu(r,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>ei(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;oi(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(yd,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>oi(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new B(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oi(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Xr(e,t,n,i){let r=U(),o=yt();if(We(r,o,t)){let s=_e(),a=mr();Am(a,r,e,t,n,i)}return Xr}var J_=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Js=class{destroy(t){}updateValue(t,n){}swap(t,n){let i=Math.min(t,n),r=Math.max(t,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(t,n){this.attach(n,this.detach(t))}};function Ss(e,t,n,i,r){return e===n&&Object.is(t,i)?1:Object.is(r(e,t),r(n,i))?-1:0}function tg(e,t,n){let i,r,o=0,s=e.length-1,a=void 0;if(Array.isArray(t)){let l=t.length-1;for(;o<=s&&o<=l;){let u=e.at(o),f=t[o],E=Ss(o,u,o,f,n);if(E!==0){E<0&&e.updateValue(o,f),o++;continue}let b=e.at(s),D=t[l],k=Ss(s,b,l,D,n);if(k!==0){k<0&&e.updateValue(s,D),s--,l--;continue}let G=n(o,u),se=n(s,b),ae=n(o,f);if(Object.is(ae,se)){let Ln=n(l,D);Object.is(Ln,G)?(e.swap(o,s),e.updateValue(s,D),l--,s--):e.move(s,o),e.updateValue(o,f),o++;continue}if(i??=new Or,r??=Lc(e,o,s,n),Xs(e,i,o,ae))e.updateValue(o,f),o++,s++;else if(r.has(ae))i.set(G,e.detach(o)),s--;else{let Ln=e.create(o,t[o]);e.attach(o,Ln),o++,s++}}for(;o<=l;)Oc(e,i,n,o,t[o]),o++}else if(t!=null){let l=t[Symbol.iterator](),u=l.next();for(;!u.done&&o<=s;){let f=e.at(o),E=u.value,b=Ss(o,f,o,E,n);if(b!==0)b<0&&e.updateValue(o,E),o++,u=l.next();else{i??=new Or,r??=Lc(e,o,s,n);let D=n(o,E);if(Xs(e,i,o,D))e.updateValue(o,E),o++,s++,u=l.next();else if(!r.has(D))e.attach(o,e.create(o,E)),o++,s++,u=l.next();else{let k=n(o,f);i.set(k,e.detach(o)),s--}}}for(;!u.done;)Oc(e,i,n,e.length,u.value),u=l.next()}for(;o<=s;)e.destroy(e.detach(s--));i?.forEach(l=>{e.destroy(l)})}function Xs(e,t,n,i){return t!==void 0&&t.has(i)?(e.attach(n,t.get(i)),t.delete(i),!0):!1}function Oc(e,t,n,i,r){if(Xs(e,t,i,n(i,r)))e.updateValue(i,r);else{let o=e.create(i,r);e.attach(i,o)}}function Lc(e,t,n,i){let r=new Set;for(let o=t;o<=n;o++)r.add(i(o,e.at(o)));return r}var Or=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let i=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,i]of this.kvMap)if(t(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),t(i,n)}}};function x(e,t,n,i,r,o,s,a){Zt("NgControlFlow");let l=U(),u=_e(),f=Xe(u.consts,o);return Fr(l,u,e,t,n,i,r,f,256,s,a),ka}function ka(e,t,n,i,r,o,s,a){Zt("NgControlFlow");let l=U(),u=_e(),f=Xe(u.consts,o);return Fr(l,u,e,t,n,i,r,f,512,s,a),ka}function M(e,t){Zt("NgControlFlow");let n=U(),i=yt(),r=n[i]!==De?n[i]:-1,o=r!==-1?Lr(n,ge+r):void 0,s=0;if(We(n,i,e)){let a=R(null);try{if(o!==void 0&&Zu(o,s),e!==-1){let l=ge+e,u=Lr(n,l),f=ia(n[N],l),E=Ju(u,f,n),b=Wr(n,f,t,{dehydratedView:E});Qr(u,b,s,li(f,E))}}finally{R(a)}}else if(o!==void 0){let a=Yu(o,s);a!==void 0&&(a[oe]=t)}}var ea=class{lContainer;$implicit;$index;constructor(t,n,i){this.lContainer=t,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-ne}};function be(e){return e}function yi(e,t){return t}var ta=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,i){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=i}};function Z(e,t,n,i,r,o,s,a,l,u,f,E,b){Zt("NgControlFlow");let D=U(),k=_e(),G=l!==void 0,se=U(),ae=a?s.bind(se[Ve][oe]):s,Ln=new ta(G,ae);se[ge+e]=Ln,Fr(D,k,e+1,t,n,i,r,Xe(k.consts,o),256),G&&Fr(D,k,e+2,l,u,f,E,Xe(k.consts,b),512)}var na=class extends Js{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,i){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=i}get length(){return this.lContainer.length-ne}at(t){return this.getLView(t)[oe].$implicit}attach(t,n){let i=n[fn];this.needsIndexUpdate||=t!==this.length,Qr(this.lContainer,n,t,li(this.templateTNode,i)),ng(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,ig(this.lContainer,t),rg(this.lContainer,t)}create(t,n){let i=Hs(this.lContainer,this.templateTNode.tView.ssrId),r=Wr(this.hostLView,this.templateTNode,new ea(this.lContainer,n,t),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(t){qr(t[N],t),this.operationsCounter?.recordDestroy()}updateValue(t,n){this.getLView(t)[oe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[oe].$index=t}getLView(t){return og(this.lContainer,t)}};function K(e){let t=R(null),n=et();try{let i=U(),r=i[N],o=i[n],s=n+1,a=Lr(i,s);if(o.liveCollection===void 0){let u=ia(r,s);o.liveCollection=new na(a,i,u)}else o.liveCollection.reset();let l=o.liveCollection;if(tg(l,e,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let u=yt(),f=l.length===0;if(We(i,u,f)){let E=n+2,b=Lr(i,E);if(f){let D=ia(r,E),k=Ju(b,D,i),G=Wr(i,D,void 0,{dehydratedView:k});Qr(b,G,0,li(D,k))}else r.firstUpdatePass&&Jm(b),Zu(b,0)}}}finally{R(t)}}function Lr(e,t){return e[t]}function ng(e,t){if(e.length<=ne)return;let n=ne+t,i=e[n],r=i?i[Ot]:void 0;if(i&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let o=i[ot];nm(o,r),Wt.delete(i),r.detachedLeaveAnimationFns=void 0}}function ig(e,t){if(e.length<=ne)return;let n=ne+t,i=e[n],r=i?i[Ot]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function rg(e,t){return ui(e,t)}function og(e,t){return Yu(e,t)}function ia(e,t){return Xn(e,t)}function L(e,t,n){let i=U(),r=yt();if(We(i,r,t)){let o=_e(),s=mr();Dm(s,i,e,t,i[ee],n)}return L}function ra(e,t,n,i,r){wa(t,e,n,r?"class":"style",i)}function v(e,t,n,i){let r=U(),o=r[N],s=e+ge,a=o.firstCreatePass?nd(s,r,2,t,Mm,zl(),n,i):o.data[s];if(Lu(a,r,e,t,_d),sr(a)){let l=r[N];Fu(l,r,a),mu(l,a,r)}return i!=null&&Ia(r,a),v}function y(){let e=_e(),t=Te(),n=Vu(t);return e.firstCreatePass&&id(e,n),gs(n)&&vs(),hs(),n.classesWithoutHost!=null&&ip(n)&&ra(e,n,U(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&rp(n)&&ra(e,n,U(),n.stylesWithoutHost,!1),y}function de(e,t,n,i){return v(e,t,n,i),y(),de}function h(e,t,n,i){let r=U(),o=r[N],s=e+ge,a=o.firstCreatePass?fh(s,o,2,t,n,i):o.data[s];return Lu(a,r,e,t,_d),i!=null&&Ia(r,a),h}function m(){let e=Te(),t=Vu(e);return gs(t)&&vs(),hs(),m}function X(e,t,n,i){return h(e,t,n,i),m(),X}var _d=(e,t,n,i,r)=>(gr(!0),Eu(t[ee],i,lc()));function j(){return U()}function O(e,t,n){let i=U(),r=yt();if(We(i,r,t)){let o=_e(),s=mr();Ou(s,i,e,t,i[ee],n)}return O}var Ei="en-US";var sg=Ei;function Dd(e){typeof e=="string"&&(sg=e.toLowerCase().replace(/_/g,"-"))}function w(e,t,n){let i=U(),r=_e(),o=Te();return ag(r,i,i[ee],o,e,t,n),w}function F(e,t,n){let i=U(),r=_e(),o=Te();return(o.type&3||n)&&rd(o,r,i,n,i[ee],e,t,br(o,i,t)),F}function ag(e,t,n,i,r,o,s){let a=!0,l=null;if((i.type&3||s)&&(l??=br(i,t,o),rd(i,e,t,s,n,r,o,l)&&(a=!1)),a){let u=i.outputs?.[r],f=i.hostDirectiveOutputs?.[r];if(f&&f.length)for(let E=0;E<f.length;E+=2){let b=f[E],D=f[E+1];l??=br(i,t,o),Rc(i,t,b,D,r,l)}if(u&&u.length)for(let E of u)l??=br(i,t,o),Rc(i,t,E,r,r,l)}}function g(e=1){return ac(e)}function pe(e,t,n,i){Uh(e,Vh(t,n,i))}function Ne(e=1){dr(ic()+e)}function yr(e,t){return e<<17|t<<2}function Yt(e){return e>>17&32767}function lg(e){return(e&2)==2}function cg(e,t){return e&131071|t<<17}function oa(e){return e|2}function bn(e){return(e&131068)>>2}function Ts(e,t){return e&-131069|t<<2}function ug(e){return(e&1)===1}function sa(e){return e|1}function dg(e,t,n,i,r,o){let s=o?t.classBindings:t.styleBindings,a=Yt(s),l=bn(s);e[i]=n;let u=!1,f;if(Array.isArray(n)){let E=n;f=E[1],(f===null||dn(E,f)>0)&&(u=!0)}else f=n;if(r)if(l!==0){let b=Yt(e[a+1]);e[i+1]=yr(b,a),b!==0&&(e[b+1]=Ts(e[b+1],i)),e[a+1]=cg(e[a+1],i)}else e[i+1]=yr(a,0),a!==0&&(e[a+1]=Ts(e[a+1],i)),a=i;else e[i+1]=yr(l,0),a===0?a=i:e[l+1]=Ts(e[l+1],i),l=i;u&&(e[i+1]=oa(e[i+1])),Vc(e,f,i,!0),Vc(e,f,i,!1),fg(t,f,e,i,o),s=yr(a,l),o?t.classBindings=s:t.styleBindings=s}function fg(e,t,n,i,r){let o=r?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&dn(o,t)>=0&&(n[i+1]=sa(n[i+1]))}function Vc(e,t,n,i){let r=e[n+1],o=t===null,s=i?Yt(r):bn(r),a=!1;for(;s!==0&&(a===!1||o);){let l=e[s],u=e[s+1];pg(l,t)&&(a=!0,e[s+1]=i?sa(u):oa(u)),s=i?Yt(u):bn(u)}a&&(e[n+1]=i?oa(r):sa(r))}function pg(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?dn(e,t)>=0:!1}var ze={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function mg(e){return e.substring(ze.key,ze.keyEnd)}function hg(e){return gg(e),bd(e,Id(e,0,ze.textEnd))}function bd(e,t){let n=ze.textEnd;return n===t?-1:(t=ze.keyEnd=vg(e,ze.key=t,n),Id(e,t,n))}function gg(e){ze.key=0,ze.keyEnd=0,ze.value=0,ze.valueEnd=0,ze.textEnd=e.length}function Id(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function vg(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}function Re(e,t,n){return wd(e,t,n,!1),Re}function re(e,t){return wd(e,t,null,!0),re}function p(e){Eg(wg,yg,e,!0)}function yg(e,t){for(let n=hg(t);n>=0;n=bd(t,n))tr(e,mg(t),!0)}function wd(e,t,n,i){let r=U(),o=_e(),s=cr(2);if(o.firstUpdatePass&&Md(o,e,s,i),t!==De&&We(r,s,t)){let a=o.data[et()];Ad(o,a,r,r[ee],e,r[s+1]=Mg(t,n),i,s)}}function Eg(e,t,n,i){let r=_e(),o=cr(2);r.firstUpdatePass&&Md(r,null,o,i);let s=U();if(n!==De&&We(s,o,n)){let a=r.data[et()];if(Sd(a,i)&&!xd(r,o)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Yi(l,n||"")),ra(r,a,s,n,i)}else xg(r,a,s,s[ee],s[o+1],s[o+1]=Ig(e,t,n),i,o)}}function xd(e,t){return t>=e.expandoStartIndex}function Md(e,t,n,i){let r=e.data;if(r[n+1]===null){let o=r[et()],s=xd(e,n);Sd(o,i)&&t===null&&!s&&(t=!1),t=Cg(r,o,t,i),dg(r,o,t,n,s,i)}}function Cg(e,t,n,i){let r=nc(e),o=i?t.residualClasses:t.residualStyles;if(r===null)(i?t.classBindings:t.styleBindings)===0&&(n=Ns(null,e,t,n,i),n=pi(n,t.attrs,i),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==r)if(n=Ns(r,e,t,n,i),o===null){let l=_g(e,t,i);l!==void 0&&Array.isArray(l)&&(l=Ns(null,e,t,l[1],i),l=pi(l,t.attrs,i),Dg(e,t,i,l))}else o=bg(e,t,i)}return o!==void 0&&(i?t.residualClasses=o:t.residualStyles=o),n}function _g(e,t,n){let i=n?t.classBindings:t.styleBindings;if(bn(i)!==0)return e[Yt(i)]}function Dg(e,t,n,i){let r=n?t.classBindings:t.styleBindings;e[Yt(r)]=i}function bg(e,t,n){let i,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=e[o].hostAttrs;i=pi(i,s,n)}return pi(i,t.attrs,n)}function Ns(e,t,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],i=pi(i,o.hostAttrs,r),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),i}function pi(e,t,n){let i=n?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===i&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),tr(e,s,n?!0:t[++o]))}return e===void 0?null:e}function Ig(e,t,n){if(n==null||n==="")return Ce;let i=[],r=$r(n);if(Array.isArray(r))for(let o=0;o<r.length;o++)e(i,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&e(i,o,r[o]);else typeof r=="string"&&t(i,r);return i}function wg(e,t,n){let i=String(t);i!==""&&!i.includes(" ")&&tr(e,i,n)}function xg(e,t,n,i,r,o,s,a){r===De&&(r=Ce);let l=0,u=0,f=0<r.length?r[0]:null,E=0<o.length?o[0]:null;for(;f!==null||E!==null;){let b=l<r.length?r[l+1]:void 0,D=u<o.length?o[u+1]:void 0,k=null,G;f===E?(l+=2,u+=2,b!==D&&(k=E,G=D)):E===null||f!==null&&f<E?(l+=2,k=f):(u+=2,k=E,G=D),k!==null&&Ad(e,t,n,i,k,G,s,a),f=l<r.length?r[l]:null,E=u<o.length?o[u]:null}}function Ad(e,t,n,i,r,o,s,a){if(!(t.type&3))return;let l=e.data,u=l[a+1],f=ug(u)?Bc(l,t,n,r,bn(u),s):void 0;if(!Vr(f)){Vr(o)||lg(u)&&(o=Bc(l,null,n,r,a,s));let E=cs(et(),n);vm(i,s,E,r,o)}}function Bc(e,t,n,i,r,o){let s=t===null,a;for(;r>0;){let l=e[r],u=Array.isArray(l),f=u?l[1]:l,E=f===null,b=n[r+1];b===De&&(b=E?Ce:void 0);let D=E?nr(b,i):f===i?b:void 0;if(u&&!Vr(D)&&(D=nr(l,i)),Vr(D)&&(a=D,s))return a;let k=e[r+1];r=s?Yt(k):bn(k)}if(t!==null){let l=o?t.residualClasses:t.residualStyles;l!=null&&(a=nr(l,i))}return a}function Vr(e){return e!==void 0}function Mg(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=pt($r(e)))),e}function Sd(e,t){return(e.flags&(t?8:16))!==0}function d(e,t=""){let n=U(),i=_e(),r=e+ge,o=i.firstCreatePass?Yr(i,r,1,t,null):i.data[r],s=Ag(i,n,o,t,e);n[r]=s,hr()&&Da(i,n,s,o),gn(o,!1)}var Ag=(e,t,n,i,r)=>(gr(!0),Up(t[ee],i));function Sg(e,t,n,i=""){return We(e,yt(),n)?t+ht(n)+i:De}function Tg(e,t,n,i,r,o=""){let s=Kl(),a=hh(e,s,n,r);return cr(2),a?t+ht(n)+i+ht(r)+o:De}function W(e){return H("",e),W}function H(e,t,n){let i=U(),r=Sg(i,e,t,n);return r!==De&&Td(i,et(),r),H}function Mn(e,t,n,i,r){let o=U(),s=Tg(o,e,t,n,i,r);return s!==De&&Td(o,et(),s),Mn}function Td(e,t,n){let i=cs(t,e);$p(e[ee],i,n)}function eo(e){return We(U(),yt(),e)?ht(e):De}function _t(e,t,n){let i=Zl()+e,r=U();return r[i]===De?ph(r,i,n?t.call(n):t()):mh(r,i)}var Ng=(()=>{class e{zone=T(fe);changeDetectionScheduler=T(Ye);applicationRef=T(vi);applicationErrorHandler=T(Ct);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{try{this.applicationRef.dirtyFlags|=1,this.applicationRef._tick()}catch(n){this.applicationErrorHandler(n)}})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Nd({ngZoneFactory:e,ignoreChangesOutsideZone:t,scheduleInRootZone:n}){return e??=()=>new fe(S(A({},Rd()),{scheduleInRootZone:n})),[{provide:fe,useFactory:e},{provide:Rt,multi:!0,useFactory:()=>{let i=T(Ng,{optional:!0});return()=>i.initialize()}},{provide:Rt,multi:!0,useFactory:()=>{let i=T(Rg);return()=>{i.initialize()}}},t===!0?{provide:Is,useValue:!0}:[],{provide:vr,useValue:n??xu},{provide:Ct,useFactory:()=>{let i=T(fe),r=T(Pe),o;return s=>{i.runOutsideAngular(()=>{r.destroyed&&!o?setTimeout(()=>{throw s}):(o??=r.get(Fe),o.handleError(s))})}}}]}function Rd(e){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:e?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:e?.runCoalescing??!1}}var Rg=(()=>{class e{subscription=new Ee;initialized=!1;zone=T(fe);pendingTasks=T(Gt);initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{fe.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{fe.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Pa=(()=>{class e{applicationErrorHandler=T(Ct);appRef=T(vi);taskService=T(Gt);ngZone=T(fe);zonelessEnabled=T(ni);tracing=T(hi,{optional:!0});disableScheduling=T(Is,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Ee;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Nr):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(T(vr,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ai||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;let i=!1;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,i=!0;break}case 12:{this.appRef.dirtyFlags|=16,i=!0;break}case 13:{this.appRef.dirtyFlags|=2,i=!0;break}case 11:{i=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(i))return;let r=this.useMicrotaskScheduler?Dc:Mu;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(n){return!(this.disableScheduling&&!n||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Nr+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(i){this.taskService.remove(n),this.applicationErrorHandler(i)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Dc(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Fa(){return Zt("NgZoneless"),Qn([{provide:Ye,useExisting:Pa},{provide:fe,useClass:ai},{provide:ni,useValue:!0},{provide:vr,useValue:!1},[]])}function kg(){return typeof $localize<"u"&&$localize.locale||Ei}var Oa=new $("",{providedIn:"root",factory:()=>T(Oa,{optional:!0,skipSelf:!0})||kg()});var to=class{destroyed=!1;listeners=null;errorHandler=T(Fe,{optional:!0});destroyRef=T($t);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new B(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(qn(953,!1));return}if(this.listeners===null)return;let n=R(null);try{for(let i of this.listeners)try{i(t)}catch(r){this.errorHandler?.handleError(r)}}finally{R(n)}}};function Y(e,t){return Bn(e,t?.equal)}var La=class{[he];constructor(t){this[he]=t}destroy(){this[he].destroy()}};function le(e,t){let n=t?.injector??T(rt),i=t?.manualCleanup!==!0?n.get($t):null,r,o=n.get(ti,null,{optional:!0}),s=n.get(Ye);return o!==null?(r=Og(o.view,s,e),i instanceof Gn&&i._lView===o.view&&(i=null)):r=Lg(e,n.get(ii),s),r.injector=n,i!==null&&(r.onDestroyFn=i.onDestroy(()=>r.destroy())),new La(r)}var kd=S(A({},Cl),{cleanupFns:void 0,zone:null,onDestroyFn:qt,run(){let e=vn(!1);try{_l(this)}finally{vn(e)}},cleanup(){if(!this.cleanupFns?.length)return;let e=R(null);try{for(;this.cleanupFns.length;)this.cleanupFns.pop()()}finally{this.cleanupFns=[],R(e)}}}),Pg=S(A({},kd),{consumerMarkedDirty(){this.scheduler.schedule(this),this.notifier.notify(12)},destroy(){It(this),this.onDestroyFn(),this.cleanup(),this.scheduler.remove(this)}}),Fg=S(A({},kd),{consumerMarkedDirty(){this.view[P]|=8192,Ht(this.view),this.notifier.notify(13)},destroy(){It(this),this.onDestroyFn(),this.cleanup(),this.view[st]?.delete(this)}});function Og(e,t,n){let i=Object.create(Fg);return i.view=e,i.zone=typeof Zone<"u"?Zone.current:null,i.notifier=t,i.fn=Pd(i,n),e[st]??=new Set,e[st].add(i),i.consumerMarkedDirty(i),i}function Lg(e,t,n){let i=Object.create(Pg);return i.fn=Pd(i,e),i.scheduler=t,i.notifier=n,i.zone=typeof Zone<"u"?Zone.current:null,i.scheduler.add(i),i.notifier.notify(12),i}function Pd(e,t){return()=>{t(n=>(e.cleanupFns??=[]).push(n))}}var Ld=Symbol("InputSignalNode#UNSET"),Qg=S(A({},Vi),{transformFn:void 0,applyValueToInputSignal(e,t){rn(e,t)}});function Vd(e,t){let n=Object.create(Qg);n.value=e,n.transformFn=t?.transform;function i(){if(Xt(n),n.value===Ld){let r=null;throw new B(-950,r)}return n.value}return i[he]=n,i}var Yg=new $("");Yg.__NG_ELEMENT_ID__=e=>{let t=Te();if(t===null)throw new B(204,!1);if(t.type&2)return t.value;if(e&8)return null;throw new B(204,!1)};function we(e){return new to}function Fd(e,t){return Vd(e,t)}function Zg(e){return Vd(Ld,e)}var te=(Fd.required=Zg,Fd);function Od(e,t){return pd(t)}function Kg(e,t){return md(t)}var ve=(Od.required=Kg,Od);var Va=new $(""),Jg=new $("");function Ci(e){return!e.moduleRef}function Xg(e){let t=Ci(e)?e.r3Injector:e.moduleRef.injector,n=t.get(fe);return n.run(()=>{Ci(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let i=t.get(Ct),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:i})}),Ci(e)){let o=()=>t.destroy(),s=e.platformInjector.get(Va);s.add(o),t.onDestroy(()=>{r.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Va);s.add(o),e.moduleRef.onDestroy(()=>{oi(e.allPlatformModules,e.moduleRef),r.unsubscribe(),s.delete(o)})}return tv(i,n,()=>{let o=t.get(Gt),s=o.add(),a=t.get(Ra);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(Oa,Ei);if(Dd(l||Ei),!t.get(Jg,!0))return Ci(e)?t.get(vi):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(Ci(e)){let f=t.get(vi);return e.rootComponent!==void 0&&f.bootstrap(e.rootComponent),f}else return ev?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var ev;function tv(e,t,n){try{let i=n();return Na(i)?i.catch(r=>{throw t.runOutsideAngular(()=>e(r)),r}):i}catch(i){throw t.runOutsideAngular(()=>e(i)),i}}var no=null;function nv(e=[],t){return rt.create({name:t,providers:[{provide:Yn,useValue:"platform"},{provide:Va,useValue:new Set([()=>no=null])},...e]})}function iv(e=[]){if(no)return no;let t=nv(e);return no=t,Ed(),rv(t),t}function rv(e){let t=e.get(Hr,null);ir(e,()=>{t?.forEach(n=>n())})}function Bd(e){let{rootComponent:t,appProviders:n,platformProviders:i,platformRef:r}=e;Q(8);try{let o=r?.injector??iv(i),s=[Nd({}),{provide:Ye,useExisting:Pa},dc,...n||[]],a=new fi({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return Xg({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{Q(9)}}var jd=null;function Di(){return jd}function Ba(e){jd??=e}var _i=class{};var me=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=Jr({type:e});static \u0275inj=zn({})}return e})();function ja(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var bi=class{};var Hd="browser";var Ii=class{_doc;constructor(t){this._doc=t}manager},io=(()=>{class e extends Ii{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r,o){return n.addEventListener(i,r,o),()=>this.removeEventListener(n,i,r,o)}removeEventListener(n,i,r,o){return n.removeEventListener(i,r,o)}static \u0275fac=function(i){return new(i||e)(q(Ge))};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})(),oo=new $(""),qa=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,i){this._zone=i,n.forEach(s=>{s.manager=this});let r=n.filter(s=>!(s instanceof io));this._plugins=r.slice().reverse();let o=n.find(s=>s instanceof io);o&&this._plugins.push(o)}addEventListener(n,i,r,o){return this._findPluginFor(i).addEventListener(n,i,r,o)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(o=>o.supports(n)),!i)throw new B(5101,!1);return this._eventNameToPlugin.set(n,i),i}static \u0275fac=function(i){return new(i||e)(q(oo),q(fe))};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})(),Ha="ng-app-id";function Ud(e){for(let t of e)t.remove()}function $d(e,t){let n=t.createElement("style");return n.textContent=e,n}function sv(e,t,n,i){let r=e.head?.querySelectorAll(`style[${Ha}="${t}"],link[${Ha}="${t}"]`);if(r)for(let o of r)o.removeAttribute(Ha),o instanceof HTMLLinkElement?i.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function $a(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var za=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,i,r,o={}){this.doc=n,this.appId=i,this.nonce=r,sv(n,i,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,i){for(let r of n)this.addUsage(r,this.inline,$d);i?.forEach(r=>this.addUsage(r,this.external,$a))}removeStyles(n,i){for(let r of n)this.removeUsage(r,this.inline);i?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,i,r){let o=i.get(n);o?o.usage++:i.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,i){let r=i.get(n);r&&(r.usage--,r.usage<=0&&(Ud(r.elements),i.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Ud(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[i,{elements:r}]of this.inline)r.push(this.addElement(n,$d(i,this.doc)));for(let[i,{elements:r}]of this.external)r.push(this.addElement(n,$a(i,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,i){return this.nonce&&i.setAttribute("nonce",this.nonce),n.appendChild(i)}static \u0275fac=function(i){return new(i||e)(q(Ge),q(jr),q(Ur,8),q(mi))};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})(),Ua={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Wa=/%COMP%/g;var qd="%COMP%",av=`_nghost-${qd}`,lv=`_ngcontent-${qd}`,cv=!0,uv=new $("",{providedIn:"root",factory:()=>cv});function dv(e){return lv.replace(Wa,e)}function fv(e){return av.replace(Wa,e)}function zd(e,t){return t.map(n=>n.replace(Wa,e))}var Qa=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,i,r,o,s,a,l=null,u=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=u,this.platformIsServer=!1,this.defaultRenderer=new wi(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,i);return r instanceof ro?r.applyToHost(n):r instanceof xi&&r.applyStyles(),r}getOrCreateRenderer(n,i){let r=this.rendererByCompId,o=r.get(i.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,E=this.platformIsServer,b=this.tracingService;switch(i.encapsulation){case ct.Emulated:o=new ro(l,u,i,this.appId,f,s,a,E,b);break;case ct.ShadowDom:return new Ga(l,u,n,i,s,a,this.nonce,E,b);default:o=new xi(l,u,i,f,s,a,E,b);break}r.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(i){return new(i||e)(q(qa),q(za),q(jr),q(uv),q(Ge),q(fe),q(Ur),q(hi,8))};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})(),wi=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,i,r,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(Ua[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Gd(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(Gd(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){n.remove()}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new B(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,r){if(r){n=r+":"+n;let o=Ua[r];o?t.setAttributeNS(o,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let r=Ua[i];r?t.removeAttributeNS(r,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,r){r&(ut.DashCase|ut.Important)?t.style.setProperty(n,i,r&ut.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&ut.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i,r){if(typeof t=="string"&&(t=Di().getGlobalEventTarget(this.doc,t),!t))throw new B(5102,!1);let o=this.decoratePreventDefault(i);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,r)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function Gd(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Ga=class extends wi{sharedStylesHost;hostEl;shadowRoot;constructor(t,n,i,r,o,s,a,l,u){super(t,o,s,l,u),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=zd(r.id,f);for(let b of f){let D=document.createElement("style");a&&D.setAttribute("nonce",a),D.textContent=b,this.shadowRoot.appendChild(D)}let E=r.getExternalStyles?.();if(E)for(let b of E){let D=$a(b,o);a&&D.setAttribute("nonce",a),this.shadowRoot.appendChild(D)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},xi=class extends wi{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,i,r,o,s,a,l,u){super(t,o,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let f=i.styles;this.styles=u?zd(u,f):f,this.styleUrls=i.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Wt.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ro=class extends xi{contentAttr;hostAttr;constructor(t,n,i,r,o,s,a,l,u){let f=r+"-"+i.id;super(t,n,i,o,s,a,l,u,f),this.contentAttr=dv(f),this.hostAttr=fv(f)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}};var so=class e extends _i{supportsDOMEvents=!0;static makeCurrent(){Ba(new e)}onAndCancel(t,n,i,r){return t.addEventListener(n,i,r),()=>{t.removeEventListener(n,i,r)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=pv();return n==null?null:mv(n)}resetBaseElement(){Mi=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ja(document.cookie,t)}},Mi=null;function pv(){return Mi=Mi||document.head.querySelector("base"),Mi?Mi.getAttribute("href"):null}function mv(e){return new URL(e,document.baseURI).pathname}var hv=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(i){return new(i||e)};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})(),Wd=["alt","control","meta","shift"],gv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vv={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Qd=(()=>{class e extends Ii{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,r,o){let s=e.parseEventName(i),a=e.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Di().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let i=n.toLowerCase().split("."),r=i.shift();if(i.length===0||!(r==="keydown"||r==="keyup"))return null;let o=e._normalizeKey(i.pop()),s="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),s="code."),Wd.forEach(u=>{let f=i.indexOf(u);f>-1&&(i.splice(f,1),s+=u+".")}),s+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=r,l.fullKey=s,l}static matchEventFullKeyCode(n,i){let r=gv[n.key]||n.key,o="";return i.indexOf("code.")>-1&&(r=n.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Wd.forEach(s=>{if(s!==r){let a=vv[s];a(n)&&(o+=s+".")}}),o+=r,o===i)}static eventCallback(n,i,r){return o=>{e.matchEventFullKeyCode(o,n)&&r.runGuarded(()=>i(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(i){return new(i||e)(q(Ge))};static \u0275prov=J({token:e,factory:e.\u0275fac})}return e})();function Ya(e,t,n){let i=A({rootComponent:e,platformRef:n?.platformRef},yv(t));return Bd(i)}function yv(e){return{appProviders:[...bv,...e?.providers??[]],platformProviders:Dv}}function Ev(){so.makeCurrent()}function Cv(){return new Fe}function _v(){return ua(document),document}var Dv=[{provide:mi,useValue:Hd},{provide:Hr,useValue:Ev,multi:!0},{provide:Ge,useFactory:_v}];var bv=[{provide:Yn,useValue:"root"},{provide:Fe,useFactory:Cv},{provide:oo,useClass:io,multi:!0,deps:[Ge]},{provide:oo,useClass:Qd,multi:!0,deps:[Ge]},Qa,za,qa,{provide:Qt,useExisting:Qa},{provide:bi,useClass:hv},[]];function Iv(e,t){if(e&1){let n=j();h(0,"div",8)(1,"input",16),F("input",function(r){let o=C(n).$index,s=g();return _(s.onEqBandChange(o,r))}),m(),h(2,"span",17),d(3),m()()}if(e&2){let n=t.$implicit,i=g();c(),Re("--thumb-bg","var(--color-"+i.theme().primary+"-400)")("--track-bg","var(--color-"+i.theme().primary+"-950)")("--thumb-border","var(--color-"+i.theme().primary+"-900)"),O("value",n.value),c(2),W(n.label)}}var An=class An{constructor(){this.eqSettings=te.required();this.enhancements=te.required();this.theme=te.required();this.close=we();this.eqChange=we();this.enhancementsChange=we()}onEqBandChange(t,n){let i=parseInt(n.target.value,10),r=this.eqSettings().map((o,s)=>s===t?S(A({},o),{value:i}):o);this.eqChange.emit(r)}onEnhancementToggle(t,n){let i=n.target.checked,r=S(A({},this.enhancements()),{[t]:i});this.enhancementsChange.emit(r)}onClose(){this.close.emit()}};An.\u0275fac=function(n){return new(n||An)},An.\u0275cmp=ue({type:An,selectors:[["app-eq-panel"]],inputs:{eqSettings:[1,"eqSettings"],enhancements:[1,"enhancements"],theme:[1,"theme"]},outputs:{close:"close",eqChange:"eqChange",enhancementsChange:"enhancementsChange"},decls:37,vars:16,consts:[[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-4","w-auto","max-w-md","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"mb-4"],[1,"text-sm","mb-2"],[1,"flex","justify-around","items-end","h-48","bg-black/50","p-4"],[1,"flex","flex-col","items-center"],[1,"space-y-2"],[1,"flex","items-center","justify-between","p-2","bg-black/50","cursor-pointer"],[1,"relative","inline-flex","items-center","cursor-pointer"],["type","checkbox",1,"sr-only","peer",3,"change","checked"],[1,"w-9","h-5","border","flex","items-center","justify-center","text-xs","peer-checked:text-black"],[1,"peer-checked:hidden"],[1,"hidden","peer-checked:inline"],["type","range","min","0","max","100",1,"slider","vertical-slider",3,"input","value"],[1,"text-xs","text-green-400/60","mt-2"]],template:function(n,i){n&1&&(h(0,"div",0),F("click",function(){return i.onClose()}),m(),h(1,"div",1)(2,"div",2)(3,"h2",3),d(4,"[[ Equalizer & Enhancements ]]"),m(),h(5,"button",4),F("click",function(){return i.onClose()}),d(6," [X] "),m()(),h(7,"div",5)(8,"h3",6),d(9,"// Graphic EQ"),m(),h(10,"div",7),Z(11,Iv,4,8,"div",8,be),m()(),h(13,"div")(14,"h3",6),d(15,"// Enhancements"),m(),h(16,"div",9)(17,"label",10)(18,"span"),d(19,"Bass Boost"),m(),h(20,"div",11)(21,"input",12),F("change",function(o){return i.onEnhancementToggle("bassBoost",o)}),m(),h(22,"div",13)(23,"span",14),d(24,"[\xA0\xA0]"),m(),h(25,"span",15),d(26,"[X]"),m()()()(),h(27,"label",10)(28,"span"),d(29,"Surround Sound (UI Only)"),m(),h(30,"div",11)(31,"input",12),F("change",function(o){return i.onEnhancementToggle("surroundSound",o)}),m(),h(32,"div",13)(33,"span",14),d(34,"[\xA0\xA0]"),m(),h(35,"span",15),d(36,"[X]"),m()()()()()()()),n&2&&(c(),p("text-"+i.theme().primary+"-400"),c(4),p("hover:bg-"+i.theme().primary+"-400"),c(5),p("border border-"+i.theme().primary+"-400/30"),c(),K(i.eqSettings()),c(6),p("border border-"+i.theme().primary+"-400/30"),c(4),O("checked",i.enhancements().bassBoost),c(),p("peer-checked:bg-"+i.theme().primary+"-400"),c(5),p("border border-"+i.theme().primary+"-400/30"),c(4),O("checked",i.enhancements().surroundSound),c(),p("peer-checked:bg-"+i.theme().primary+"-400"))},dependencies:[me],styles:["input[type=range].vertical-slider[_ngcontent-%COMP%]{writing-mode:bt-lr;-webkit-appearance:slider-vertical;width:8px;height:120px;padding:0 5px;background-color:transparent}input[type=range].vertical-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:var(--track-bg);width:4px;border-radius:0}input[type=range].vertical-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:8px;background:var(--thumb-bg);cursor:pointer;border:1px solid var(--thumb-border)}input[type=range].vertical-slider[_ngcontent-%COMP%]::-moz-range-track{background:var(--track-bg);width:4px;border-radius:0}input[type=range].vertical-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:16px;height:8px;background:var(--thumb-bg);cursor:pointer;border:1px solid var(--thumb-border);border-radius:0}"]});var ao=An;var wv=["matrixCanvas"],Sn=class Sn{constructor(){this.canvasRef=ve.required("matrixCanvas");this.FRAME_RATE_INTERVAL=250}ngAfterViewInit(){let t=this.canvasRef().nativeElement,n=t.getContext("2d");if(!n){console.error("Could not get 2D context");return}this.ctx=n,t.width=window.innerWidth,t.height=window.innerHeight;let i="SmuveJeffPresents",r=16,o=t.width/r,s=[];for(let u=0;u<o;u++)s[u]=1;let a=0,l=u=>{if(u-a>this.FRAME_RATE_INTERVAL){this.ctx.fillStyle="rgba(0, 0, 0, 0.05)",this.ctx.fillRect(0,0,t.width,t.height),this.ctx.fillStyle="#0F0",this.ctx.font=r+"px monospace";for(let f=0;f<s.length;f++){let E=i.charAt(Math.floor(Math.random()*i.length));this.ctx.fillText(E,f*r,s[f]*r),s[f]*r>t.height&&Math.random()>.975&&(s[f]=0),s[f]++}a=u}this.animationFrameId=requestAnimationFrame(l)};this.animationFrameId=requestAnimationFrame(l)}ngOnDestroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}};Sn.\u0275fac=function(n){return new(n||Sn)},Sn.\u0275cmp=ue({type:Sn,selectors:[["app-matrix-background"]],viewQuery:function(n,i){n&1&&pe(i.canvasRef,wv,5),n&2&&Ne()},decls:2,vars:0,consts:[["matrixCanvas",""],[1,"absolute","top-0","left-0","w-full","h-full"]],template:function(n,i){n&1&&X(0,"canvas",1,0)},styles:["[_nghost-%COMP%]{display:block;position:absolute;top:0;left:0;width:100%;height:100%;z-index:0}"]});var lo=Sn;var Kt=class Kt{constructor(){this._apiKey=T(Za);this._genAI=I(void 0);this._chatInstance=I(void 0);this._isAiAvailable=Y(()=>!!this._genAI());this.initializeGenAI()}get genAI(){return this._genAI()}get chatInstance(){return this._chatInstance()}get isAiAvailable(){return this._isAiAvailable()}getApiKey(){return this._apiKey}async initializeGenAI(){if(!this._apiKey||this._apiKey.length<30){console.error("AiService: AI features disabled. Invalid or missing API key injected via token."),this._genAI.set(void 0),this._chatInstance.set(void 0);return}try{let t=await import("./chunk-GUGQRGJ7.js"),n=new t.GoogleGenAI({apiKey:this._apiKey});this._genAI.set(n);let i=n.chats.create({model:"gemini-3-pro-preview",config:{systemInstruction:`You are S.M.U.V.E, an expert AI music manager toolkit. You specialize in genres such as Southern Rap, Hip-Hop, R&B, and Trap music, and possess advanced management and marketing skills. Provide concise, helpful, and culturally relevant responses tailored for independent music artists.

You can manage music, generate images/videos, analyze content, and search the web for up-to-date information.

Use COMMAND:::ACTION:::PARAMETER_KEY='value' format for app commands (e.g., COMMAND:::SET_THEME:::theme='blue'). Available commands:
- SET_THEME: Apply a visual theme (e.g., theme='blue').
- PLAY_TRACK: Play a track (e.g., title='My Song').
- PAUSE_TRACK: Pause current track.
- STOP_TRACK: Stop current track.
- LOAD_TRACK: (Requires more parameters like URL or search query, use cautiously).
- NEXT_TRACK: Play next track in playlist.
- PREVIOUS_TRACK: Play previous track in playlist.
- TOGGLE_LOOP: Toggle loop for current track.
- GENERATE_IMAGE: Create an image (e.g., prompt='album cover concept').
- GENERATE_VIDEO: Create a video (e.g., prompt='music video visualizer').
- ANALYZE_IMAGE: Describe an image (e.g., imageUrl='base64data').
- FIND_ON_MAP: Search for a location (e.g., query='recording studios in Atlanta').
- FIND_ARTISTS: Search for collaborators (e.g., location='Nashville', filter='producer').
- VIEW_ARTIST_PROFILE: Display an artist's detailed profile (e.g., name='BeatMaster Flex', genre='Hip-Hop', location='Atlanta').

When VIEW_ARTIST_PROFILE is used, expect a command containing an artist's name (and optional genre/location for disambiguation). Query your knowledge base (and implicitly, the MOCK_ARTISTS data provided in the app context) to provide an adaptive, detailed insight into their profile. This should include:
- Strengths (musicality, production, stage presence, lyrical ability etc.)
- Specific collaboration potential (e.g., "collaborate with a Memphis trap producer for a new single," "feature on an T_R&B singer's track").
- Career advice (e.g., "focus on building a strong presence on TikTok," "consider licensing your beats for video games").
- Marketing insights (e.g., "target college radio stations in the Southeast," "run Instagram ad campaigns geotargeted to your city").

If you need to search for up-to-date info, use the googleSearch tool. Adapt insights based on their genre, location, influences, and collaboration interests. Your responses should be direct and highly actionable, reflecting deep expertise in these specific music genres and industry practices.`}});this._chatInstance.set(i),console.log("AiService: GoogleGenAI client initialized and chat instance created.")}catch(t){console.error("AiService: Error initializing GoogleGenAI client:",t),this._genAI.set(void 0),this._chatInstance.set(void 0)}}};Kt.\u0275fac=function(n){return new(n||Kt)},Kt.\u0275prov=J({token:Kt,factory:Kt.\u0275fac});var xe=Kt,Yd=()=>Qn([{provide:xe,useClass:xe}]);var xv=(e,t)=>t.id,Mv=(e,t)=>t.url;function Av(e,t){if(e&1&&(h(0,"div",2),d(1),m()),e&2){let n=g();c(),H(" ",n.errorMessage()," ")}}function Sv(e,t){e&1&&(h(0,"div",3),d(1," AI services are disabled. Networking search features might be limited. "),m())}function Tv(e,t){e&1&&(h(0,"span"),d(1,"[ SEARCHING... ]"),m())}function Nv(e,t){e&1&&(h(0,"span"),d(1,"[ FIND ARTISTS ]"),m())}function Rv(e,t){if(e&1){let n=j();h(0,"div",31),F("click",function(){let r=C(n).$implicit,o=g();return _(o.viewArtistDetail(r))}),X(1,"img",32),h(2,"div",33)(3,"h4",34),d(4),m(),h(5,"p",35),d(6),m(),h(7,"p",36),d(8),m(),h(9,"p",36),d(10),m()(),Ut(),h(11,"svg",37),X(12,"path",38),m()()}if(e&2){let n=t.$implicit,i=g();p("hover:bg-"+i.theme().blue+"-800/70"),c(),p("border-"+i.theme().neutral+"-600"),O("alt",eo(n.name))("src",n.imageUrl,ie),c(2),p("text-"+i.theme().blue+"-300"),c(),W(n.name),c(),p("text-"+i.theme().neutral+"-400"),c(),Mn("",n.genre," - ",n.location),c(2),H("",n.bio.substring(0,70),"..."),c(),p("text-"+i.theme().blue+"-500"),c(),H("Interest: ",n.collaborationInterest.join(", ")),c(),p("text-"+i.theme().blue+"-400")}}function kv(e,t){if(e&1&&(h(0,"p",39),d(1,"No artists found. Adjust your search or clear filters."),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-500")}}function Pv(e,t){if(e&1&&(h(0,"p",35)(1,"strong"),d(2,"Specialties:"),m(),d(3),m()),e&2){let n=g(2);p("text-"+n.theme().neutral+"-400"),c(3),H(" ",n.selectedArtistProfile().specialties.join(", "))}}function Fv(e,t){if(e&1&&(h(0,"p",35)(1,"strong"),d(2,"Target Audience:"),m(),d(3),m()),e&2){let n=g(2);p("text-"+n.theme().neutral+"-400"),c(3),H(" ",n.selectedArtistProfile().targetAudience)}}function Ov(e,t){if(e&1&&(h(0,"p",35)(1,"strong"),d(2,"Career Goals:"),m(),d(3),m()),e&2){let n=g(2);p("text-"+n.theme().neutral+"-400"),c(3),H(" ",n.selectedArtistProfile().careerGoals)}}function Lv(e,t){if(e&1&&(h(0,"a",55),d(1),m()),e&2){let n=t.$implicit,i=g(2);p("hover:text-"+i.theme().blue+"-300"),O("href",n.url,ie),c(),Mn(" ",n.type.toUpperCase(),": ",n.url," ")}}function Vv(e,t){if(e&1&&(h(0,"p",54),d(1,"No links available."),m()),e&2){let n=g(2);p("text-"+n.theme().neutral+"-500")}}function Bv(e,t){if(e&1){let n=j();h(0,"div",40),F("click",function(){C(n);let r=g();return _(r.closeArtistDetailModal())}),m(),h(1,"div",41)(2,"div",42)(3,"h2",34),d(4),m(),h(5,"button",43),F("click",function(){C(n);let r=g();return _(r.closeArtistDetailModal())}),d(6," [X] "),m()(),h(7,"div",44),X(8,"img",45),h(9,"div",46)(10,"p",35)(11,"strong"),d(12,"Genre:"),m(),d(13),m(),h(14,"p",35)(15,"strong"),d(16,"Location:"),m(),d(17),m(),h(18,"p",35)(19,"strong"),d(20,"Collaboration Interest:"),m(),d(21),m(),h(22,"p",35)(23,"strong"),d(24,"Influences:"),m(),d(25),m(),x(26,Pv,4,3,"p",47),x(27,Fv,4,3,"p",47),x(28,Ov,4,3,"p",47),m()(),h(29,"div",48)(30,"p",49),d(31),m(),h(32,"h3",35),d(33,"// LINKS:"),m(),h(34,"div",50),Z(35,Lv,2,5,"a",51,Mv,!1,Vv,2,2,"p",52),m(),h(38,"h3",53),d(39,"// CONTACT:"),m(),h(40,"p",54),d(41),m()()()}if(e&2){let n=g();c(),p("text-"+n.theme().blue+"-400"),c(3),H("[[ ARTIST PROFILE: ",n.selectedArtistProfile().name," ]]"),c(),p("hover:bg-"+n.theme().blue+"-400"),c(3),p("border-"+n.theme().neutral+"-600"),O("alt",eo(n.selectedArtistProfile().name))("src",n.selectedArtistProfile().imageUrl,ie),c(2),p("text-"+n.theme().neutral+"-400"),c(3),Mn(" ",n.selectedArtistProfile().genre," (",n.selectedArtistProfile().genres.join(", "),")"),c(),p("text-"+n.theme().neutral+"-400"),c(3),H(" ",n.selectedArtistProfile().location),c(),p("text-"+n.theme().blue+"-500"),c(3),H(" ",n.selectedArtistProfile().collaborationInterest.join(", ")),c(),p("text-"+n.theme().neutral+"-500"),c(3),H(" ",n.selectedArtistProfile().influences.join(", ")),c(),M(n.selectedArtistProfile().specialties?26:-1),c(),M(n.selectedArtistProfile().targetAudience?27:-1),c(),M(n.selectedArtistProfile().careerGoals?28:-1),c(),p("border-"+n.theme().blue+"-500/30"),c(2),W(n.selectedArtistProfile().bio),c(),p("text-"+n.theme().blue+"-300"),c(3),K(n.selectedArtistProfile().links),c(3),p("text-"+n.theme().blue+"-300"),c(2),p("text-"+n.theme().neutral+"-400"),c(),W(n.selectedArtistProfile().contact)}}var nt=[{id:"flex101",name:"BeatMaster Flex",genre:"Hip-Hop Producer",location:"Brooklyn, NY",locationLatLon:{lat:40.6782,lon:-73.9442},bio:"Award-winning producer with a knack for soulful beats and hard-hitting drums. Always looking for fresh vocalists and lyricists to elevate tracks. Specializing in old-school boom-bap and modern trap sounds.",contact:"flexbeats@email.com",imageUrl:"https://picsum.photos/seed/flex/150/150",collaborationInterest:["Vocalist","Lyricist","Rapper","Mixing Engineer"],genres:["Hip-Hop","Boom-Bap","Trap","Southern Rap"],influences:["J Dilla","DJ Premier","Madlib","Metro Boomin"],links:[{type:"soundcloud",url:"https://soundcloud.com/beatmasterflex"}],specialties:["Sampling","Drum Programming","Arrangement"],targetAudience:"Underground Hip-Hop, Trap, and R&B fans",careerGoals:"Produce a platinum album, mentor new artists"},{id:"mae202",name:"Melody Mae",genre:"Indie Pop Vocalist",location:"Los Angeles, CA",locationLatLon:{lat:34.0522,lon:-118.2437},bio:"Ethereal vocals with a dreamy vibe. Seeking producers for new tracks and live musicians for touring. Inspired by nature and introspection.",contact:"melodymae@email.com",imageUrl:"https://picsum.photos/seed/mae/150/150",collaborationInterest:["Producer","Guitarist","Songwriter","Keyboardist"],genres:["Indie Pop","Dream Pop","Alternative","R&B"],influences:["Fiona Apple","Lana Del Rey","Mazzy Star","SZA"],links:[{type:"spotify",url:"https://open.spotify.com/artist/melodymae"},{type:"instagram",url:"https://instagram.com/melodymae"}],specialties:["Vocal Harmony","Lyric Writing","Live Performance"],targetAudience:"Indie Pop, Dream Pop, and soulful R&B listeners",careerGoals:"Release a critically acclaimed album, headline festivals"},{id:"sammy303",name:"Synthwave Sammy",genre:"Electronic / Synthwave",location:"Miami, FL",locationLatLon:{lat:25.7617,lon:-80.1918},bio:"Master of retro synths and driving basslines, creating nostalgic soundscapes. Open to scoring short films, collaborating with vocalists, or DJing events.",contact:"sammywave@email.com",imageUrl:"https://picsum.photos/seed/sammy/150/150",collaborationInterest:["Vocalist","Filmmaker","DJ","Sound Designer"],genres:["Synthwave","Electronic","Vaporwave"],influences:["Com Truise","Kavinsky","Daft Punk"],links:[{type:"soundcloud",url:"https://soundcloud.com/synthwavesammy"},{type:"website",url:"https://synthwavesammy.com"}]},{id:"jake404",name:"Jazz Fusion Jake",genre:"Jazz / Fusion Guitarist",location:"New Orleans, LA",locationLatLon:{lat:29.9511,lon:-90.0715},bio:"Complex harmonies and intricate solos define my style. Looking for drummers, bassists, and horn players for a new progressive jazz project.",contact:"jakejazz@email.com",imageUrl:"https://picsum.photos/seed/jake/150/150",collaborationInterest:["Drummer","Bassist","Saxophonist","Keyboardist"],genres:["Jazz Fusion","Progressive Jazz","Funk"],influences:["Pat Metheny","John Scofield","Frank Gambale"],links:[{type:"spotify",url:"https://open.spotify.com/artist/jazzfusionjake"}]},{id:"rina505",name:"Rhythm Queen Rina",genre:"Afrobeat Drummer",location:"London, UK",locationLatLon:{lat:51.5074,lon:.1278},bio:"High-energy percussionist bringing vibrant global rhythms to any track. Collaborations in world music, hip-hop, or pop welcome. Specializing in intricate polyrhythms.",contact:"rina.drums@email.com",imageUrl:"https://picsum.photos/seed/rina/150/150",collaborationInterest:["Producer","Bassist","Vocalist","Guitarist"],genres:["Afrobeat","World Music","Funk","Hip-Hop"],influences:["Tony Allen","Fela Kuti","Ginger Baker"],links:[{type:"instagram",url:"https://instagram.com/rhythmqueenrina"}]},{id:"keys606",name:"Electro Keys Eva",genre:"Electronic Keyboardist",location:"Berlin, DE",locationLatLon:{lat:52.52,lon:13.405},bio:"Versatile keyboardist exploring ambient, techno, and house. Seeking DJs, producers, and experimental vocalists for live and studio projects.",contact:"eva.keys@email.com",imageUrl:"https://picsum.photos/seed/eva/150/150",collaborationInterest:["Producer","DJ","Vocalist","Sound Designer"],genres:["Techno","House","Ambient","Electronic"],influences:["Kraftwerk","Aphex Twin","Four Tet"],links:[{type:"soundcloud",url:"https://soundcloud.com/electrokeys"}]},{id:"rhyme707",name:"Poetic Rhyme Rex",genre:"Spoken Word / Hip-Hop",location:"Chicago, IL",locationLatLon:{lat:41.8781,lon:-87.6298},bio:"Lyricist and spoken word artist with a powerful message. Collaborations with producers across genres, from jazz to trap.",contact:"rexrhymes@email.com",imageUrl:"https://picsum.photos/seed/rex/150/150",collaborationInterest:["Producer","Vocalist","Jazz Musician"],genres:["Spoken Word","Hip-Hop","Poetry","Trap"],influences:["Gil Scott-Heron","Kendrick Lamar","Saul Williams","J. Cole"],links:[{type:"instagram",url:"https://instagram.com/poeticrex"}],specialties:["Freestyle","Storytelling","Performance Art"],targetAudience:"Conscious Hip-Hop and Spoken Word enthusiasts",careerGoals:"Release a conceptual album, perform at major poetry slams"},{id:"south808",name:"Southern Siren Sia",genre:"R&B / Trap Soul Vocalist",location:"Atlanta, GA",locationLatLon:{lat:33.7488,lon:-84.3877},bio:"Sultry vocals blending R&B smoothness with trap grit. Collaborating with producers for new EPs and visual artists for music videos. Deeply inspired by Atlanta's vibrant music scene.",contact:"siasounds@email.com",imageUrl:"https://picsum.photos/seed/sia/150/150",collaborationInterest:["Producer","Beatmaker","Video Director","Songwriter"],genres:["R&B","Trap Soul","Neo-Soul","Southern Rap"],influences:["Summer Walker","SZA","Future","Jhen\xE9 Aiko"],links:[{type:"instagram",url:"https://instagram.com/southernsirensia"},{type:"spotify",url:"https://open.spotify.com/artist/southernsirensia"}],specialties:["Vocal production","Ad-libs","Melody creation"],targetAudience:"R&B and Trap music listeners, especially in the South",careerGoals:"Build a strong brand, perform at A3C, release a full-length album"},{id:"beatrix909",name:"Beatrix B",genre:"Trap Producer",location:"Houston, TX",locationLatLon:{lat:29.7604,lon:-95.3698},bio:"Hard-hitting trap beats with cinematic undertones. Always on the lookout for new vocalists, especially those in Southern Rap and R&B, for joint projects. Ready to drop bangers.",contact:"beatrixb@email.com",imageUrl:"https://picsum.photos/seed/beatrix/150/150",collaborationInterest:["Vocalist","Rapper","Mixing Engineer","Songwriter"],genres:["Trap","Southern Rap","Hip-Hop"],influences:["Zaytoven","Cardo","Tay Keith"],links:[{type:"soundcloud",url:"https://soundcloud.com/beatrixb"}],specialties:["Beatmaking","Sound Design","Mixing"],targetAudience:"Trap and Southern Hip-Hop fans",careerGoals:"Secure major placements, build a production team"},{id:"soulful1010",name:"Soulful Sam",genre:"Neo-Soul / R&B Producer",location:"New Orleans, LA",locationLatLon:{lat:29.9511,lon:-90.0715},bio:"Crafting lush, soulful soundscapes with a modern twist. Seeking R&B and Neo-Soul vocalists, instrumentalists (especially horns and strings), for studio and live collaborations.",contact:"soulfulsam@email.com",imageUrl:"https://picsum.photos/seed/sam/150/150",collaborationInterest:["Vocalist","Instrumentalist","Songwriter","Mixing Engineer"],genres:["Neo-Soul","R&B","Jazz","Funk"],influences:["D'Angelo","Erykah Badu","Robert Glasper"],links:[{type:"spotify",url:"https://open.spotify.com/artist/soulfulsam"}],specialties:["Arrangement","Keys","Live instrumentation recording"],targetAudience:"Neo-Soul, R&B, and Jazz fusion listeners",careerGoals:"Release collaborative EPs, perform at jazz/soul festivals"}],Tn=class Tn{constructor(){this.theme=te.required();this.initialSearchQuery=te(null);this.searchLocation=I("");this.collaborationFilter=I("");this.displayedArtists=I([]);this.isLoading=I(!1);this.errorMessage=I(null);this.selectedArtistProfile=I(null);this.showArtistDetailModal=I(!1);this.aiService=T(xe);this.isAiAvailable=Y(()=>this.aiService.isAiAvailable);this.artistProfileSelected=we();le(()=>{let t=this.initialSearchQuery();t&&t!==this.searchLocation()&&(this.searchLocation.set(t),this.searchArtists())}),this.displayedArtists.set(nt),le(()=>{this.selectedArtistProfile()?this.showArtistDetailModal.set(!0):this.showArtistDetailModal.set(!1)})}onSearchLocationInput(t){this.searchLocation.set(t.target.value)}onCollaborationFilterInput(t){this.collaborationFilter.set(t.target.value)}async searchArtists(){let t=this.searchLocation().trim(),n=this.collaborationFilter().trim();if(this.isLoading.set(!0),this.errorMessage.set(null),this.displayedArtists.set([]),!this.aiService.isAiAvailable){console.warn("AI services unavailable for networking search enhancement. Falling back to basic filter.");let i=nt.filter(r=>{let o=!t||r.location.toLowerCase().includes(t.toLowerCase()),s=!n||r.collaborationInterest.some(a=>a.toLowerCase().includes(n.toLowerCase()));return o&&s});this.displayedArtists.set(i),i.length===0&&this.errorMessage.set("No artists found matching your criteria with basic filter."),this.isLoading.set(!1);return}try{let i=`You are an expert music industry scout specializing in Southern Rap, Hip-Hop, R&B, and Trap music genres, with advanced management and marketing skills. Given the following artists' profiles (as JSON array):

${JSON.stringify(nt)}

Find artists who match the location "${t}" (if provided, prioritize this) and are interested in collaborations that include "${n}" (if provided, prioritize this). Consider their primary genre, influences, and bio for a holistic match. Provide the IDs of the top matching artists in a JSON array: {"matchingArtistIds": ["id1", "id2"]}. If no artists match, return an empty array.`,r=await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:"OBJECT",properties:{matchingArtistIds:{type:"ARRAY",items:{type:"STRING"}}},propertyOrdering:["matchingArtistIds"]}}}),s=JSON.parse(r.text).matchingArtistIds||[],a=nt.filter(l=>s.includes(l.id));this.displayedArtists.set(a),a.length===0&&this.errorMessage.set("AI found no artists matching your criteria. Try different terms.")}catch(i){console.error("AI failed to enhance networking search:",i),this.errorMessage.set("AI search enhancement failed. Falling back to basic filter.");let r=nt.filter(o=>{let s=!t||o.location.toLowerCase().includes(t.toLowerCase()),a=!n||o.collaborationInterest.some(l=>l.toLowerCase().includes(n.toLowerCase()));return s&&a});this.displayedArtists.set(r),r.length===0&&this.errorMessage.set("No artists found matching your criteria with basic filter.")}finally{this.isLoading.set(!1)}}clearSearch(){this.searchLocation.set(""),this.collaborationFilter.set(""),this.displayedArtists.set(nt),this.errorMessage.set(null)}viewArtistDetail(t){this.selectedArtistProfile.set(t),this.artistProfileSelected.emit(t)}closeArtistDetailModal(){this.selectedArtistProfile.set(null)}};Tn.\u0275fac=function(n){return new(n||Tn)},Tn.\u0275cmp=ue({type:Tn,selectors:[["app-networking"]],inputs:{theme:[1,"theme"],initialSearchQuery:[1,"initialSearchQuery"]},outputs:{artistProfileSelected:"artistProfileSelected"},decls:55,vars:40,consts:[[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"bg-red-900/50","text-red-300","p-3","text-center","border","border-red-500","animate-fade-in"],[1,"bg-amber-900/50","text-amber-300","p-3","text-center","border","border-amber-500","animate-fade-in"],[1,"p-4","flex","flex-col","sm:flex-row","gap-4"],[1,"flex-grow","flex","flex-col","gap-2"],["for","location-search",1,"block","text-sm"],["id","location-search","type","text","placeholder","e.g., 'Los Angeles, CA' or 'London, UK'",1,"w-full","p-2","text-sm","focus:ring-500",3,"input","value","disabled"],["for","collaboration-filter",1,"block","text-sm"],["id","collaboration-filter",1,"w-full","p-2","text-sm","focus:ring-500",3,"change","value","disabled"],["value",""],["value","Vocalist"],["value","Producer"],["value","Lyricist"],["value","Guitarist"],["value","Drummer"],["value","Bassist"],["value","DJ"],["value","Songwriter"],["value","Filmmaker"],["value","Mixing Engineer"],["value","Keyboardist"],["value","Saxophonist"],["value","Sound Designer"],[1,"flex","gap-2","justify-center"],[1,"flex-grow","px-4","py-2","border-2","text-lg","max-w-sm",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg","max-w-sm",3,"click"],[1,"text-base","mt-4"],[1,"flex-grow","overflow-y-auto","pr-2","space-y-4","p-2"],[1,"flex","items-center","gap-4","p-4","cursor-pointer","transition-colors","duration-200",3,"class"],[1,"text-center","text-sm","p-4",3,"class"],[1,"flex","items-center","gap-4","p-4","cursor-pointer","transition-colors","duration-200",3,"click"],[1,"w-20","h-20","object-cover","border",3,"src","alt"],[1,"flex-grow"],[1,"text-lg"],[1,"text-sm"],[1,"text-xs","mt-1"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor",1,"w-6","h-6","flex-shrink-0"],["stroke-linecap","round","stroke-linejoin","round","d","m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"],[1,"text-center","text-sm","p-4"],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-lg","flex","flex-col","z-50","animate-slide-up","font-mono","max-h-[90vh]","overflow-hidden"],[1,"flex","justify-between","items-center","mb-4"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"flex","flex-col","sm:flex-row","gap-4","mb-4","flex-shrink-0"],[1,"w-32","h-32","object-cover","border","flex-shrink-0",3,"src","alt"],[1,"flex-grow","space-y-1"],[1,"text-sm",3,"class"],[1,"flex-grow","overflow-y-auto","pr-2","text-sm","border-t","pt-4"],[1,"mb-4"],[1,"space-y-1"],["target","_blank","rel","noopener noreferrer",1,"block","text-xs","underline",3,"href","class"],[1,"text-xs",3,"class"],[1,"text-sm","mt-4"],[1,"text-xs"],["target","_blank","rel","noopener noreferrer",1,"block","text-xs","underline",3,"href"]],template:function(n,i){n&1&&(h(0,"div",0)(1,"h2",1),d(2,"[ AURA NETWORKING HUB ]"),m(),x(3,Av,2,1,"div",2),x(4,Sv,2,0,"div",3),h(5,"div",4)(6,"div",5)(7,"label",6),d(8,"SEARCH LOCATION:"),m(),h(9,"input",7),F("input",function(o){return i.onSearchLocationInput(o)}),m()(),h(10,"div",5)(11,"label",8),d(12,"COLLABORATION INTEREST:"),m(),h(13,"select",9),F("change",function(o){return i.onCollaborationFilterInput(o)}),h(14,"option",10),d(15,"Any"),m(),h(16,"option",11),d(17,"Vocalist"),m(),h(18,"option",12),d(19,"Producer"),m(),h(20,"option",13),d(21,"Lyricist"),m(),h(22,"option",14),d(23,"Guitarist"),m(),h(24,"option",15),d(25,"Drummer"),m(),h(26,"option",16),d(27,"Bassist"),m(),h(28,"option",17),d(29,"DJ"),m(),h(30,"option",18),d(31,"Songwriter"),m(),h(32,"option",19),d(33,"Filmmaker"),m(),h(34,"option",20),d(35,"Mixing Engineer"),m(),h(36,"option",21),d(37,"Keyboardist"),m(),h(38,"option",22),d(39,"Saxophonist"),m(),h(40,"option",23),d(41,"Sound Designer"),m()()()(),h(42,"div",24)(43,"button",25),F("click",function(){return i.searchArtists()}),x(44,Tv,2,0,"span")(45,Nv,2,0,"span"),m(),h(46,"button",26),F("click",function(){return i.clearSearch()}),d(47," [ CLEAR ] "),m()(),h(48,"h3",27),d(49,"// COLLABORATORS FOUND:"),m(),h(50,"div",28),Z(51,Rv,13,20,"div",29,xv,!1,kv,2,2,"p",30),m()(),x(54,Bv,42,37)),n&2&&(p("border border-"+i.theme().blue+"-500/30"),c(),p("text-"+i.theme().blue+"-400"),c(2),M(i.errorMessage()?3:-1),c(),M(i.isAiAvailable()?-1:4),c(),p("border border-"+i.theme().blue+"-500/20"),c(2),p("text-"+i.theme().blue+"-300"),c(2),p("focus:border-"+i.theme().blue+"-500"),O("value",i.searchLocation())("disabled",i.isLoading()),c(2),p("text-"+i.theme().blue+"-300"),c(2),p("focus:border-"+i.theme().blue+"-500"),O("value",i.collaborationFilter())("disabled",i.isLoading()),c(30),p("hover:text-black"),O("disabled",i.isLoading()),c(),M(i.isLoading()?44:45),c(2),p("hover:text-black"),c(2),p("text-"+i.theme().blue+"-300"),c(2),p("border border-"+i.theme().blue+"-500/20"),Re("--chat-history-track-bg","var(--color-"+i.theme().blue+"-950)")("--chat-history-thumb-bg","var(--color-"+i.theme().blue+"-400)")("--chat-history-thumb-border","var(--color-"+i.theme().blue+"-900)")("--chat-history-thumb-hover-bg","var(--color-"+i.theme().blue+"-300)"),c(),K(i.displayedArtists()),c(3),M(i.selectedArtistProfile()&&i.showArtistDetailModal()?54:-1))},dependencies:[me],styles:["[_nghost-%COMP%]{display:contents}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--chat-history-track-bg)}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--chat-history-thumb-bg);border:1px solid var(--chat-history-thumb-border)}.flex-grow.overflow-y-auto[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--chat-history-thumb-hover-bg)}"],changeDetection:0});var co=Tn;var jv=["chatHistory"],Hv=(e,t)=>t.uri;function Uv(e,t){if(e&1&&(h(0,"a",26),d(1),m()),e&2){let n=t.$implicit,i=g(3);p("hover:text-"+i.theme().primary+"-300"),O("href",n.uri,ie),c(),H(" ",n.title||n.uri," ")}}function $v(e,t){if(e&1&&(h(0,"div",23)(1,"p",24),d(2,"Sources:"),m(),Z(3,Uv,2,4,"a",25,Hv),m()),e&2){let n=g().$implicit,i=g();p("border-"+i.theme().primary+"-500/30"),c(3),K(n.urls)}}function Gv(e,t){if(e&1&&(h(0,"div",27),X(1,"img",28),h(2,"p",29),d(3,"Image analyzed:"),m()()),e&2){let n=g().$implicit,i=g();p("border-"+i.theme().primary+"-500/30"),c(),O("src",n.imageUrl,ie),c(),p("text-"+i.theme().primary+"-500")}}function qv(e,t){if(e&1&&(h(0,"div")(1,"div",19)(2,"span",20),d(3),m(),h(4,"span"),d(5),m(),x(6,$v,5,2,"div",21),x(7,Gv,4,5,"div",22),m()()),e&2){let n=t.$implicit,i=g();re("text-right",n.role==="user")("text-left",n.role==="model"),c(),p(n.role==="user"?"bg-"+i.theme().primary+"-700/50":"bg-"+i.theme().primary+"-900/50"),c(),p("text-"+i.theme().primary+"-300"),c(),W(n.role==="user"?"YOU:":"S.M.U.V.E:"),c(2),W(n.content),c(),M(n.urls&&n.urls.length>0?6:-1),c(),M(n.imageUrl?7:-1)}}function zv(e,t){if(e&1&&(h(0,"div",8)(1,"div",19)(2,"span",20),d(3,"S.M.U.V.E:"),m(),h(4,"span"),d(5,"Thinking..."),m()()()),e&2){let n=g();c(),p("bg-"+n.theme().primary+"-900/50"),c(),p("text-"+n.theme().primary+"-300")}}function Wv(e,t){if(e&1&&(h(0,"div",8)(1,"div",30)(2,"span",20),d(3,"S.M.U.V.E:"),m(),h(4,"span"),d(5,"Speaking..."),m()()()),e&2){let n=g();c(),p("bg-"+n.theme().primary+"-900/50"),c(),p("text-"+n.theme().primary+"-300")}}function Qv(e,t){if(e&1&&(h(0,"div",31),d(1," Hi! I'm S.M.U.V.E. How can I help you with your music today? "),m()),e&2){let n=g();p("text-"+n.theme().primary+"-400/70")}}function Yv(e,t){e&1&&(h(0,"div",10),d(1," AI features are currently disabled. Please check the API key configuration. "),m())}function Zv(e,t){e&1&&(h(0,"span"),d(1,"[ DEEP QUERY ACTIVE (GEMINI 3 PRO) ]"),m())}function Kv(e,t){e&1&&(h(0,"span"),d(1,"[ DEEP QUERY (GEMINI 3 PRO) ]"),m())}function Jv(e,t){e&1&&(Ut(),h(0,"svg",15),X(1,"path",32)(2,"path",33),m())}function Xv(e,t){e&1&&(Ut(),h(0,"svg",16),X(1,"path",32)(2,"path",34)(3,"path",35),m())}var Nn=class Nn{constructor(){this.close=we();this.appCommand=we();this.theme=te.required();this.imageToAnalyzeUrl=te(null);this.imageAnalysisResult=we();this.mapLocationQuery=te(null);this.mapLocationResult=we();this.messages=I([]);this.userMessage=I("");this.isLoading=I(!1);this.isVoiceInputActive=I(!1);this.isSpeaking=I(!1);this.isDeepQueryActive=I(!1);this.aiService=T(xe);this.isAiAvailable=Y(()=>this.aiService.isAiAvailable);this.chatHistoryRef=ve("chatHistory");this.speechRecognition=null;this.speechUtterance=null;this.aiService.isAiAvailable||this.messages.update(t=>[...t,{role:"model",content:"AI services are currently unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."}]),"SpeechRecognition"in window||"webkitSpeechRecognition"in window?(this.speechRecognition=new(window.SpeechRecognition||window.webkitSpeechRecognition),this.speechRecognition.continuous=!1,this.speechRecognition.interimResults=!1,this.speechRecognition.lang="en-US",this.speechRecognition.onresult=t=>{let n=t.results[0][0].transcript;this.userMessage.set(n),this.sendMessage(),this.stopVoiceInput()},this.speechRecognition.onerror=t=>{console.error("Speech recognition error:",t.error),t.error==="no-speech"||this.messages.update(n=>[...n,{role:"model",content:`Voice input error: ${t.error}. Please try again.`}]),this.stopVoiceInput()},this.speechRecognition.onend=()=>{this.isVoiceInputActive.set(!1)}):console.warn("Speech Recognition API not supported in this browser."),le(()=>{let t=this.imageToAnalyzeUrl();t&&!this.isLoading()&&(this.messages.update(n=>[...n,{role:"user",content:"Please analyze this image.",imageUrl:t}]),this.analyzeImage(t,"Describe this image in detail. Focus on elements relevant for an album cover or music video concept."))}),le(()=>{let t=this.mapLocationQuery();t&&!this.isLoading()&&(this.messages.update(n=>[...n,{role:"user",content:`Find on map: ${t}`}]),this.sendGoogleMapsQuery(t))})}async sendMessage(){if(!this.aiService.isAiAvailable||!this.aiService.chatInstance)return;let t=this.userMessage().trim();if(t){if(this.messages.update(n=>[...n,{role:"user",content:t}]),this.userMessage.set(""),this.isLoading.set(!0),this.stopSpeaking(),this.isDeepQueryActive())await this.sendDeepQuery(t),this.isDeepQueryActive.set(!1);else if(t.toLowerCase().startsWith("search google for")||t.toLowerCase().startsWith("google for")){let n=t.toLowerCase().startsWith("google for")?t.substring(10).trim():t.substring(17).trim();await this.sendGoogleSearchQuery(n)}else if(t.toLowerCase().startsWith("find on map")||t.toLowerCase().startsWith("map for")){let n=t.toLowerCase().startsWith("map for")?t.substring(7).trim():t.substring(11).trim();await this.sendGoogleMapsQuery(n)}else if(t.toLowerCase().startsWith("view artist profile")){let n=t.substring(19).trim();if(n){let i=nt.find(r=>r.name.toLowerCase()===n.toLowerCase());if(i)await this.getArtistInsight(i),this.appCommand.emit({action:"VIEW_ARTIST_PROFILE",parameters:{name:n}});else{let r=`S.M.U.V.E doesn't have data for "${n}". Please try searching for artists first.`;this.messages.update(o=>[...o,{role:"model",content:r}]),this.speakResponse(r)}}else{let i="Please specify an artist name to view their profile.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}else try{let i=(await this.aiService.chatInstance.sendMessage({message:t})).text;if(typeof i!="string"||i.trim()===""){console.warn("Gemini API returned empty or non-string response:",i);let s="S.M.U.V.E received an empty response. Please try rephrasing.";this.messages.update(a=>[...a,{role:"model",content:s}]),this.speakResponse(s),this.isLoading.set(!1),this.scrollToBottom();return}let r=i.trim(),o=r.split(":::");if(o.length>=2&&o[0]==="CHAT"){let s=o.slice(1).join(":::");this.messages.update(a=>[...a,{role:"model",content:s}]),this.speakResponse(s)}else if(o.length>=2&&o[0]==="COMMAND"){let s=o[1].trim(),a=(o[2]||"").trim();try{let l={};if(a){let f=/(\w+)\s*=\s*'([^']*)'|(\w+)\s*=\s*(\d+)/g,E;for(;(E=f.exec(a))!==null;){let b=E[1]||E[3],D=E[2]!==void 0?E[2]:E[4];l[b]=D}}this.appCommand.emit({action:s,parameters:l});let u=`Executing command: ${s}`;this.messages.update(f=>[...f,{role:"model",content:u}]),this.speakResponse(u)}catch(l){console.error("Failed to parse command parameters:",l,"from string:",a);let u="S.M.U.V.E sent a command I couldn't understand. Please try again.";this.messages.update(f=>[...f,{role:"model",content:u}]),this.speakResponse(u)}}else console.warn("AI response did not match expected CHAT/COMMAND format:",r),this.messages.update(s=>[...s,{role:"model",content:r}]),this.speakResponse(r)}catch(n){console.error("Error sending message to Gemini API:",n);let i="Oops! Something went wrong. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}this.isLoading.set(!1),this.scrollToBottom()}}async sendGoogleSearchQuery(t){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let n=await this.aiService.genAI.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{tools:[{googleSearch:{}}]}}),i=n.text,r=n.candidates?.[0]?.groundingMetadata?.groundingChunks,o=[];if(r)for(let a of r)a.web&&a.web.uri&&o.push({uri:a.web.uri,title:a.web.title});let s={role:"model",content:i,urls:o.length>0?o:void 0};this.messages.update(a=>[...a,s]),this.speakResponse(i)}catch(n){console.error("Error sending Google Search query to Gemini API:",n);let i="Oops! Failed to perform Google Search. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async sendGoogleMapsQuery(t){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let n=await this.aiService.genAI.models.generateContent({model:"gemini-2.5-flash",contents:t,config:{tools:[{googleSearch:{}}]}}),i=n.text,r=n.candidates?.[0]?.groundingMetadata?.groundingChunks,o=[];if(r)for(let a of r)a.web&&a.web.uri&&o.push({uri:a.web.uri,title:a.web.title});let s={role:"model",content:i,urls:o.length>0?o:void 0};this.messages.update(a=>[...a,s]),this.speakResponse(i),this.mapLocationResult.emit(i)}catch(n){console.error("Error sending Google Maps query to Gemini API:",n);let i="Oops! Failed to find location on map. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async sendDeepQuery(t){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI))try{let i=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:t,config:{systemInstruction:this.aiService.chatInstance.config.systemInstruction,topK:64,topP:.95,temperature:1,seed:42}})).text;this.messages.update(r=>[...r,{role:"model",content:`[DEEP QUERY RESPONSE]: ${i}`}]),this.speakResponse(i)}catch(n){console.error("Error sending deep query to Gemini API:",n);let i="Oops! Deep query failed. Please try again.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}}async analyzeImage(t,n="Describe this image in detail. Focus on elements relevant for an album cover or music video concept."){if(!this.aiService.isAiAvailable||!this.aiService.genAI){let i="AI services are unavailable to analyze image. Please check API key.";this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i);return}this.isLoading.set(!0);try{let i=t.split(";")[0].split(":")[1],r=t.split(",")[1],o={inlineData:{mimeType:i,data:r}},s={text:n},l=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:[o,s]})).text,u={role:"model",content:`IMAGE ANALYSIS: ${l}`,imageUrl:t};this.messages.update(f=>[...f,u]),this.speakResponse(`Image analysis complete. ${l}`),this.imageAnalysisResult.emit(l)}catch(i){console.error("Error analyzing image with Gemini API:",i);let r="Oops! Failed to analyze image. Please try again.";this.messages.update(o=>[...o,{role:"model",content:r}]),this.speakResponse(r)}finally{this.isLoading.set(!1),this.scrollToBottom()}}async getArtistInsight(t){if(!(!this.aiService.isAiAvailable||!this.aiService.genAI)){this.isLoading.set(!0);try{let n=`You are S.M.U.V.E, an expert AI music manager toolkit specialized in Southern Rap, Hip-Hop, R&B, and Trap music, with advanced management and marketing skills. Provide an adaptive, detailed insight into the following independent music artist's profile. Your insights should be highly specific to their genre(s) and location, and offer actionable advice. Include:
      - Strengths (musicality, production, stage presence, lyrical ability etc.)
      - Specific collaboration potential (e.g., "collaborate with a Memphis trap producer for a new single," "feature on an Atlanta R&B singer's track").
      - Career advice (e.g., "focus on building a strong presence on TikTok," "consider licensing your beats for video games").
      - Marketing insights (e.g., "target college radio stations in the Southeast," "run Instagram ad campaigns geotargeted to your city").

Artist Profile:
Name: ${t.name}
Genre(s): ${t.genres.join(", ")}
Location: ${t.location}
Bio: ${t.bio}
Collaboration Interests: ${t.collaborationInterest.join(", ")}
Influences: ${t.influences.join(", ")}
Contact: ${t.contact}
Links: ${t.links.map(o=>`${o.type}: ${o.url}`).join(", ")}
Specialties: ${t.specialties?t.specialties.join(", "):"N/A"}
Target Audience: ${t.targetAudience||"N/A"}
Career Goals: ${t.careerGoals||"N/A"}

Provide insights relevant to their profile and the independent music scene, focusing on growth, networking, and strategic moves within their specified genres. Be specific to Southern Rap, Hip-Hop, R&B, and Trap where appropriate.`,r=(await this.aiService.genAI.models.generateContent({model:"gemini-3-pro-preview",contents:n,config:{systemInstruction:this.aiService.chatInstance.config.systemInstruction,topK:64,topP:.95,temperature:1,seed:42}})).text;this.messages.update(o=>[...o,{role:"model",content:`[INSIGHT for ${t.name}]: ${r}`}]),this.speakResponse(`Here's an insight for ${t.name}. ${r}`)}catch(n){console.error("Error getting artist insight:",n);let i=`S.M.U.V.E failed to provide insight for ${t.name}.`;this.messages.update(r=>[...r,{role:"model",content:i}]),this.speakResponse(i)}finally{this.isLoading.set(!1),this.scrollToBottom()}}}toggleVoiceInput(){if(!this.speechRecognition){alert("Speech Recognition is not supported in this browser.");return}this.isVoiceInputActive()?this.stopVoiceInput():this.startVoiceInput()}startVoiceInput(){this.speechRecognition&&(this.stopSpeaking(),this.isVoiceInputActive.set(!0),this.speechRecognition.start(),this.messages.update(t=>[...t,{role:"model",content:"Listening for voice input..."}]))}stopVoiceInput(){this.speechRecognition&&(this.speechRecognition.stop(),this.isVoiceInputActive.set(!1))}speakResponse(t){"speechSynthesis"in window?(this.stopSpeaking(),this.speechUtterance=new SpeechSynthesisUtterance(t),this.speechUtterance.onstart=()=>this.isSpeaking.set(!0),this.speechUtterance.onend=()=>this.isSpeaking.set(!1),this.speechUtterance.onerror=n=>{console.error("Speech synthesis error:",n),this.isSpeaking.set(!1)},window.speechSynthesis.speak(this.speechUtterance)):console.warn("Speech Synthesis API not supported in this browser.")}stopSpeaking(){this.speechUtterance&&(window.speechSynthesis.cancel(),this.isSpeaking.set(!1))}scrollToBottom(){requestAnimationFrame(()=>{if(this.chatHistoryRef()){let t=this.chatHistoryRef().nativeElement;t.scrollTop=t.scrollHeight}})}toggleDeepQuery(){this.isDeepQueryActive.update(t=>!t),this.isDeepQueryActive()?(this.messages.update(t=>[...t,{role:"model",content:"Deep Query mode activated. I will use Gemini 3 Pro for more complex reasoning. Please ask your question."}]),this.speakResponse("Deep Query mode activated. Please ask your question.")):(this.messages.update(t=>[...t,{role:"model",content:"Deep Query mode deactivated."}]),this.speakResponse("Deep Query mode deactivated."))}onClose(){this.stopVoiceInput(),this.stopSpeaking(),this.close.emit()}};Nn.\u0275fac=function(n){return new(n||Nn)},Nn.\u0275cmp=ue({type:Nn,selectors:[["app-chatbot"]],viewQuery:function(n,i){n&1&&pe(i.chatHistoryRef,jv,5),n&2&&Ne()},inputs:{theme:[1,"theme"],imageToAnalyzeUrl:[1,"imageToAnalyzeUrl"],mapLocationQuery:[1,"mapLocationQuery"]},outputs:{close:"close",appCommand:"appCommand",imageAnalysisResult:"imageAnalysisResult",mapLocationResult:"mapLocationResult"},decls:26,vars:41,consts:[["chatHistory",""],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:right-4","sm:bottom-4","border-2","bg-black/90","backdrop-blur-lg","p-4","w-full","max-w-sm","h-[70vh]","flex","flex-col","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-lg"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"flex-grow","overflow-y-auto","pr-2","mb-4","border-b","pb-2","space-y-3","chat-history"],[3,"text-right","text-left"],[1,"text-left"],[1,"text-center","py-4",3,"class"],[1,"text-center","py-4","text-red-400"],[1,"flex","gap-2","mb-2"],["type","button",1,"flex-grow","p-2","border","hover:text-black","text-sm","transition-colors",3,"click","disabled"],[1,"flex","gap-2",3,"submit"],["type","button",1,"p-2","border","hover:text-black","text-sm","transition-colors","flex","items-center","justify-center","w-10","h-10",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5","animate-pulse"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","currentColor",1,"w-5","h-5"],["type","text","placeholder","Type your message...",1,"flex-grow","bg-black","border","px-2","py-1","text-sm","focus:ring-500",3,"input","value","disabled"],["type","submit",1,"p-2","border","hover:text-black","text-sm",3,"disabled"],[1,"inline-block","p-2","rounded-lg","max-w-[85%]"],[1,"text-xs","mr-2"],[1,"text-xs","mt-2","border-t","pt-1",3,"class"],[1,"mt-2","p-1","border",3,"class"],[1,"text-xs","mt-2","border-t","pt-1"],[1,"font-bold"],["target","_blank","rel","noopener noreferrer",1,"block","underline",3,"href","class"],["target","_blank","rel","noopener noreferrer",1,"block","underline",3,"href"],[1,"mt-2","p-1","border"],["alt","Image for analysis",1,"max-w-full","h-auto","object-contain",3,"src"],[1,"text-xs","mt-1"],[1,"inline-block","p-2","rounded-lg","max-w-[85%]","animate-pulse"],[1,"text-center","py-4"],["d","M8.25 4.5a3.75 3.75 0 1 1 7.5 0v8.25a3.75 3.75 0 1 1-7.5 0V4.5Z"],["d","M6 10.5a.75.75 0 0 1 .75.75v1.5a5.25 5.25 0 1 0 10.5 0v-1.5a.75.75 0 0 1 1.5 0v1.5a6.75 6.75 0 1 1-13.5 0v-1.5a.75.75 0 0 1 .75-.75Z"],["d","M12 21a2.25 2.25 0 0 0 2.25-2.25V15a.75.75 0 0 0-1.5 0v3.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75V15a.75.75 0 0 0-1.5 0v3.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75V15a.75.75 0 0 0-1.5 0v3.75A2.25 2.25 0 0 0 12 21Z"],["d","M18.75 10.5a.75.75 0 0 0-1.5 0v1.5a6.75 6.75 0 0 1-13.5 0v-1.5a.75.75 0 0 0-1.5 0v1.5a8.25 8.25 0 1 0 16.5 0v-1.5A.75.75 0 0 0 18.75 10.5Z"]],template:function(n,i){if(n&1){let r=j();h(0,"div",1),F("click",function(){return C(r),_(i.onClose())}),m(),h(1,"div",2)(2,"div",3)(3,"h2",4),d(4,"[[ S.M.U.V.E ]]"),m(),h(5,"button",5),F("click",function(){return C(r),_(i.onClose())}),d(6," [X] "),m()(),h(7,"div",6,0),Z(9,qv,8,12,"div",7,be),x(11,zv,6,4,"div",8)(12,Wv,6,4,"div",8),x(13,Qv,2,2,"div",9)(14,Yv,2,0,"div",10),m(),h(15,"div",11)(16,"button",12),F("click",function(){return C(r),_(i.toggleDeepQuery())}),x(17,Zv,2,0,"span")(18,Kv,2,0,"span"),m()(),h(19,"form",13),F("submit",function(){return C(r),_(i.sendMessage())}),h(20,"button",14),F("click",function(){return C(r),_(i.toggleVoiceInput())}),x(21,Jv,3,0,":svg:svg",15)(22,Xv,4,0,":svg:svg",16),m(),h(23,"input",17),F("input",function(s){return C(r),_(i.userMessage.set(s.target.value))}),m(),h(24,"button",18),d(25," [ SEND ] "),m()()()}n&2&&(c(),p("text-"+i.theme().primary+"-400"),c(4),p("hover:bg-"+i.theme().primary+"-400"),c(2),p("border-"+i.theme().primary+"-400/30"),Re("--chat-history-track-bg","var(--color-"+i.theme().primary+"-950)")("--chat-history-thumb-bg","var(--color-"+i.theme().primary+"-400)")("--chat-history-thumb-border","var(--color-"+i.theme().primary+"-900)")("--chat-history-thumb-hover-bg","var(--color-"+i.theme().primary+"-300)"),c(2),K(i.messages()),c(2),M(i.isLoading()?11:i.isSpeaking()?12:-1),c(2),M(i.messages().length===0&&!i.isLoading()&&!i.isSpeaking()&&i.isAiAvailable()?13:i.isAiAvailable()?-1:14),c(3),p("hover:bg-"+i.theme().primary+"-400"),re("bg-green-500",i.isDeepQueryActive())("text-black",i.isDeepQueryActive()),O("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()),c(),M(i.isDeepQueryActive()?17:18),c(2),re("opacity-50",!i.isAiAvailable()),c(),p("hover:bg-"+i.theme().primary+"-400"),re("bg-green-500",i.isVoiceInputActive())("text-black",i.isVoiceInputActive()),O("disabled",i.isLoading()||i.isDeepQueryActive()||!i.isAiAvailable()),c(),M(i.isVoiceInputActive()?21:22),c(2),p("focus:border-"+i.theme().primary+"-500"),O("value",i.userMessage())("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()),c(),p("hover:bg-"+i.theme().primary+"-400"),O("disabled",i.isLoading()||i.isVoiceInputActive()||!i.isAiAvailable()))},dependencies:[me],styles:[".chat-history[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--chat-history-track-bg)}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--chat-history-thumb-bg);border:1px solid var(--chat-history-thumb-border)}.chat-history[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--chat-history-thumb-hover-bg)}"],changeDetection:0});var uo=Nn;var e0=["fileInput"],t0=()=>["1:1","4:3","3:4","16:9","9:16"];function n0(e,t){if(e&1&&X(0,"img",7),e&2){let n=g();O("src",n.originalImageUrl(),ie)}}function i0(e,t){if(e&1&&(h(0,"span",23),d(1,"[ Upload an image for reference or leave empty ]"),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-500")}}function r0(e,t){if(e&1){let n=j();h(0,"button",24),F("click",function(){let r=C(n).$implicit,o=g();return _(o.aspectRatio.set(r))}),d(1),m()}if(e&2){let n=t.$implicit,i=g();p(i.aspectRatio()===n?"bg-"+i.theme().purple+"-500 text-black":"hover:bg-"+i.theme().purple+"-700/50"),O("disabled",i.isLoading()||!i.isAiAvailable()),c(),H(" ",n," ")}}function o0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),m())}function s0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATE ]"),m())}function a0(e,t){if(e&1&&(h(0,"p",19),d(1),m()),e&2){let n=g();c(),W(n.errorMessage())}}function l0(e,t){e&1&&(h(0,"p",19),d(1,"AI features are disabled due to an invalid API key."),m())}function c0(e,t){if(e&1&&X(0,"img",25),e&2){let n=t.$implicit;O("src",n,ie)}}function u0(e,t){if(e&1&&Z(0,c0,1,1,"img",25,be),e&2){let n=g();K(n.generatedImageUrls())}}function d0(e,t){if(e&1&&(h(0,"span",26),d(1,"[ Generating image... ]"),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-500")}}function f0(e,t){if(e&1&&(h(0,"span",23),d(1,"[ No image generated yet ]"),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-500")}}function p0(e,t){if(e&1){let n=j();h(0,"button",27),F("click",function(){C(n);let r=g();return _(r.useAsAlbumArt())}),d(1," [ USE AS ALBUM ART ] "),m()}if(e&2){let n=g();p("hover:bg-"+n.theme().purple+"-500"),O("disabled",!n.isAiAvailable())}}function m0(e,t){if(e&1){let n=j();h(0,"button",27),F("click",function(){C(n);let r=g();return _(r.requestImageAnalysis())}),d(1," [ ANALYZE IMAGE ] "),m()}if(e&2){let n=g();p("hover:bg-"+n.theme().purple+"-500"),O("disabled",!n.isAiAvailable())}}function h0(e,t){if(e&1&&(h(0,"a",28),d(1," [ DOWNLOAD ] "),m()),e&2){let n=g();p("hover:bg-"+n.theme().purple+"-500"),re("opacity-50",!n.isAiAvailable()),O("href",n.generatedImageUrls()[0],ie),Xr("disabled",n.isAiAvailable()?null:!0)}}var Rn=class Rn{constructor(){this.initialPrompt=te(null);this.theme=te.required();this.originalImageUrl=I(null);this.editPrompt=I("");this.generatedImageUrls=I([]);this.isLoading=I(!1);this.errorMessage=I(null);this.aspectRatio=I("1:1");this.aiService=T(xe);this.isAiAvailable=Y(()=>this.aiService.isAiAvailable);this.fileInputRef=ve("fileInput");this.imageSelected=we();this.imageAnalysisRequest=we();this.genAI=void 0;this.aiService.isAiAvailable?this.genAI=this.aiService.genAI:this.errorMessage.set("AI features are unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."),le(()=>{let t=this.initialPrompt();t&&t!==this.editPrompt()&&this.editPrompt.set(t)})}handleImageUpload(t){let n=t.target.files?.[0];if(n){this.errorMessage.set(null),this.generatedImageUrls.set([]);let i=new FileReader;i.onload=r=>{this.originalImageUrl.set(r.target?.result)},i.onerror=()=>{this.errorMessage.set("Failed to read file.")},i.readAsDataURL(n)}else this.originalImageUrl.set(null),this.generatedImageUrls.set([])}async generateImage(){if(!this.isAiAvailable()||!this.genAI){this.errorMessage.set("AI features are unavailable. Please check your configuration (window.AURA_GEMINI_API_KEY).");return}let t=this.editPrompt().trim();if(!t){this.errorMessage.set("Please enter an edit prompt.");return}this.isLoading.set(!0),this.errorMessage.set(null),this.generatedImageUrls.set([]);try{let i=(await this.genAI.models.generateImages({model:"imagen-4.0-generate-001",prompt:t,config:{numberOfImages:1,outputMimeType:"image/png",aspectRatio:this.aspectRatio()}})).generatedImages[0]?.image?.imageBytes;i?this.generatedImageUrls.set([`data:image/png;base64,${i}`]):this.errorMessage.set("No image generated. Please try a different prompt.")}catch(n){console.error("Error generating image:",n),this.errorMessage.set(`Image generation failed: ${n.message||"Unknown error"}.`)}finally{this.isLoading.set(!1)}}clearImage(){this.originalImageUrl.set(null),this.generatedImageUrls.set([]),this.editPrompt.set(""),this.errorMessage.set(null),this.fileInputRef()&&(this.fileInputRef().nativeElement.value="")}useAsAlbumArt(){let t=this.generatedImageUrls().length>0?this.generatedImageUrls()[0]:this.originalImageUrl();t?this.imageSelected.emit(t):this.errorMessage.set("No image to use as album art.")}requestImageAnalysis(){let t=this.generatedImageUrls().length>0?this.generatedImageUrls()[0]:this.originalImageUrl();t?(this.imageAnalysisRequest.emit(t),alert("Image analysis requested. Check chatbot for results!")):this.errorMessage.set("No image available to analyze.")}};Rn.\u0275fac=function(n){return new(n||Rn)},Rn.\u0275cmp=ue({type:Rn,selectors:[["app-image-editor"]],viewQuery:function(n,i){n&1&&pe(i.fileInputRef,e0,5),n&2&&Ne()},inputs:{initialPrompt:[1,"initialPrompt"],theme:[1,"theme"]},outputs:{imageSelected:"imageSelected",imageAnalysisRequest:"imageAnalysisRequest"},decls:40,vars:40,consts:[["fileInput",""],[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","flex-grow"],[1,"flex","flex-col","gap-4","p-4"],[1,"text-base"],[1,"flex-grow","flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden"],["alt","Uploaded Image",1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"text-sm",3,"class"],[1,"w-full","text-center","block","p-2","border","hover:text-black","cursor-pointer","text-sm"],["type","file","accept","image/*",1,"hidden",3,"change"],["for","edit-prompt",1,"block","text-sm"],["id","edit-prompt","placeholder","e.g., 'A retro-futuristic album cover with glowing elements', 'A sci-fi landscape art with vibrant colors'","rows","4",1,"w-full","p-2","text-sm","focus:ring-500","resize-y",3,"input","value","disabled"],[1,"block","text-sm","mt-2"],[1,"flex","flex-wrap","gap-2","text-sm"],["type","button",1,"px-3","py-1","border",3,"class","disabled"],[1,"flex","gap-2","mt-4"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg",3,"click"],[1,"text-red-500","text-sm","mt-2","text-center"],[1,"text-sm","animate-pulse",3,"class"],[1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg","mb-2",3,"class","disabled"],["download","aura-edited-image.png",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href","class","opacity-50"],[1,"text-sm"],["type","button",1,"px-3","py-1","border",3,"click","disabled"],["alt","Generated Image",1,"max-w-full","max-h-full","object-contain",3,"src"],[1,"text-sm","animate-pulse"],[1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg","mb-2",3,"click","disabled"],["download","aura-edited-image.png",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"]],template:function(n,i){if(n&1){let r=j();h(0,"div",1)(1,"h2",2),d(2,"[ AURA IMAGE LAB ]"),m(),h(3,"div",3)(4,"div",4)(5,"h3",5),d(6,"// ORIGINAL IMAGE (FOR CONTEXT)"),m(),h(7,"div",6),x(8,n0,1,1,"img",7)(9,i0,2,2,"span",8),m(),h(10,"label",9),d(11," [ UPLOAD IMAGE ] "),h(12,"input",10,0),F("change",function(s){return C(r),_(i.handleImageUpload(s))}),m()(),h(14,"label",11),d(15,"GENERATION PROMPT:"),m(),h(16,"textarea",12),F("input",function(s){return C(r),_(i.editPrompt.set(s.target.value))}),m(),h(17,"label",13),d(18,"ASPECT RATIO:"),m(),h(19,"div",14),Z(20,r0,2,4,"button",15,yi),m(),h(22,"div",16)(23,"button",17),F("click",function(){return C(r),_(i.generateImage())}),x(24,o0,2,0,"span")(25,s0,2,0,"span"),m(),h(26,"button",18),F("click",function(){return C(r),_(i.clearImage())}),d(27," [ CLEAR ] "),m()(),x(28,a0,2,1,"p",19),x(29,l0,2,0,"p",19),m(),h(30,"div",4)(31,"h3",5),d(32,"// GENERATED IMAGE"),m(),h(33,"div",6),x(34,u0,2,0)(35,d0,2,2,"span",20)(36,f0,2,2,"span",8),m(),x(37,p0,2,3,"button",21),x(38,m0,2,3,"button",21),x(39,h0,2,6,"a",22),m()()()}n&2&&(p("border border-"+i.theme().purple+"-500/30"),c(),p("text-"+i.theme().purple+"-400"),c(3),p("border border-"+i.theme().purple+"-500/20"),c(),p("text-"+i.theme().purple+"-300"),c(2),p("border-"+i.theme().purple+"-700/50"),c(),M(i.originalImageUrl()?8:9),c(2),p("hover:bg-"+i.theme().purple+"-500"),c(4),p("text-"+i.theme().purple+"-300"),c(2),p("focus:border-"+i.theme().purple+"-500"),O("value",i.editPrompt())("disabled",i.isLoading()||!i.isAiAvailable()),c(),p("text-"+i.theme().purple+"-300"),c(3),K(_t(39,t0)),c(3),p("hover:text-black"),O("disabled",!i.editPrompt()||i.isLoading()||!i.isAiAvailable()),c(),M(i.isLoading()?24:25),c(2),p("hover:text-black"),c(2),M(i.errorMessage()?28:-1),c(),M(i.isAiAvailable()?-1:29),c(),p("border border-"+i.theme().purple+"-500/20"),c(),p("text-"+i.theme().purple+"-300"),c(2),p("border-"+i.theme().purple+"-700/50"),c(),M(i.generatedImageUrls().length>0?34:i.isLoading()?35:36),c(3),M(i.generatedImageUrls().length>0?37:-1),c(),M(i.generatedImageUrls().length>0?38:-1),c(),M(i.generatedImageUrls().length>0?39:-1))},dependencies:[me],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0});var fo=Rn;var g0=["liveVideoPreview"],v0=["recordedVideoPlayer"],y0=()=>["1:1","4:3","3:4","16:9","9:16"];function E0(e,t){if(e&1&&(h(0,"div",4),d(1),m()),e&2){let n=g();c(),H(" ",n.error()," ")}}function C0(e,t){if(e&1&&(h(0,"span",26),d(1,"[ Camera Off ]"),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-500")}}function _0(e,t){if(e&1&&(h(0,"span",11),X(1,"span",27),d(2),m()),e&2){let n=g();c(2),H(" REC: ",n.formatTime(n.recordingTime())," ")}}function D0(e,t){e&1&&(h(0,"span"),d(1,"[ DISABLE CAMERA ]"),m())}function b0(e,t){e&1&&(h(0,"span"),d(1,"[ ENABLE CAMERA ]"),m())}function I0(e,t){e&1&&(h(0,"span"),d(1,"[ RECORDING... ]"),m())}function w0(e,t){e&1&&(h(0,"span"),d(1,"[ START RECORDING ]"),m())}function x0(e,t){if(e&1&&(h(0,"h3",28),d(1,"// RECORDED VIDEO"),m(),h(2,"div",29),X(3,"video",30,1),m(),h(5,"a",31),d(6," [ DOWNLOAD RECORDED VIDEO ] "),m()),e&2){let n=g();p("text-"+n.theme().purple+"-300"),c(2),p("border-"+n.theme().purple+"-700/50"),c(),O("src",n.recordedVideoUrl(),ie),c(2),p("hover:bg-"+n.theme().purple+"-500"),O("href",n.recordedVideoUrl(),ie)}}function M0(e,t){if(e&1&&(h(0,"div",15)(1,"h4",32),d(2,"// IMAGE INPUT FROM EDITOR"),m(),X(3,"img",33),m()),e&2){let n=g();c(),p("text-"+n.theme().neutral+"-400"),c(2),p("border-"+n.theme().neutral+"-600"),O("src",n.imageForVideoGeneration(),ie)}}function A0(e,t){if(e&1){let n=j();h(0,"button",34),F("click",function(){let r=C(n).$implicit,o=g();return _(o.aspectRatio.set(r))}),d(1),m()}if(e&2){let n=t.$implicit,i=g();p(i.aspectRatio()===n?"bg-"+i.theme().purple+"-500 text-black":"hover:bg-"+i.theme().purple+"-700/50"),O("disabled",i.isGeneratingVideo()||!i.isAiAvailable()),c(),H(" ",n," ")}}function S0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),m())}function T0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATE FROM PROMPT ]"),m())}function N0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATING... ]"),m())}function R0(e,t){e&1&&(h(0,"span"),d(1,"[ GENERATE FROM IMAGE + PROMPT ]"),m())}function k0(e,t){if(e&1){let n=j();h(0,"button",13),F("click",function(){C(n);let r=g();return _(r.generateVideo(!0))}),x(1,N0,2,0,"span")(2,R0,2,0,"span"),m()}if(e&2){let n=g();p("hover:text-black"),O("disabled",!n.videoPrompt()||n.isGeneratingVideo()||!n.isAiAvailable()),c(),M(n.isGeneratingVideo()?1:2)}}function P0(e,t){if(e&1&&(h(0,"p",35),d(1),m()),e&2){let n=g();p("text-"+n.theme().neutral+"-400"),c(),W(n.generationProgressMessage())}}function F0(e,t){if(e&1&&(h(0,"h3",28),d(1,"// GENERATED AI VIDEO"),m(),h(2,"div",29),X(3,"video",36),m(),h(4,"a",37),d(5," [ DOWNLOAD AI VIDEO ] "),m()),e&2){let n=g();p("text-"+n.theme().purple+"-300"),c(2),p("border-"+n.theme().purple+"-700/50"),c(),O("src",n.generatedVideoUrl(),ie),c(),p("hover:bg-"+n.theme().purple+"-500"),O("href",n.generatedVideoUrl(),ie)}}var kn=class kn{constructor(){this.imageForVideoGeneration=te(null);this.initialPrompt=te(null);this.theme=te.required();this.mediaStream=I(null);this.isRecording=I(!1);this.recordedVideoBlob=I(null);this.recordedVideoUrl=I(null);this.recordingTime=I(0);this.cameraEnabled=I(!1);this.isCameraActive=I(!1);this.videoPrompt=I("");this.generatedVideoUrl=I(null);this.isGeneratingVideo=I(!1);this.generationProgressMessage=I(null);this.aspectRatio=I("16:9");this.aiService=T(xe);this.isAiAvailable=Y(()=>this.aiService.isAiAvailable);this.error=I(null);this.liveVideoPreviewRef=ve("liveVideoPreview");this.recordedVideoPlayerRef=ve("recordedVideoPlayer");this.mediaRecorder=null;this.recordedChunks=[];this.genAI=void 0;this.aiService.isAiAvailable?this.genAI=this.aiService.genAI:this.error.set("AI features are unavailable. An API key is required and was not found or was invalid in window.AURA_GEMINI_API_KEY."),le(()=>{let t=this.initialPrompt();t&&t!==this.videoPrompt()&&this.videoPrompt.set(t)})}ngOnDestroy(){this.stopMediaStream()}async requestMediaPermissions(){this.error.set(null),this.mediaStream()&&this.stopMediaStream();try{let t=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});this.mediaStream.set(t),this.cameraEnabled.set(!0),this.isCameraActive.set(!0),this.liveVideoPreviewRef()&&(this.liveVideoPreviewRef().nativeElement.srcObject=t,await this.liveVideoPreviewRef().nativeElement.play()),console.log("Camera and microphone access granted.")}catch(t){console.error("Error accessing media devices:",t),this.error.set(`Failed to access camera/microphone: ${t.name||t.message}. Please check permissions.`),this.cameraEnabled.set(!1),this.isCameraActive.set(!1)}}stopMediaStream(){this.mediaStream()?.getTracks().forEach(t=>t.stop()),this.mediaStream.set(null),this.isCameraActive.set(!1),this.liveVideoPreviewRef()&&(this.liveVideoPreviewRef().nativeElement.srcObject=null),console.log("Media stream stopped.")}toggleCamera(){this.isCameraActive()?(this.stopMediaStream(),this.cameraEnabled.set(!1)):this.requestMediaPermissions()}startRecording(){if(!this.mediaStream()||!this.isCameraActive()){this.error.set("Camera is not active. Please enable camera first.");return}if(!this.isRecording()){this.recordedChunks=[],this.recordedVideoBlob.set(null),this.recordedVideoUrl.set(null),this.recordingTime.set(0),this.error.set(null);try{this.mediaRecorder=new MediaRecorder(this.mediaStream(),{mimeType:"video/webm; codecs=vp8,opus"}),this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&this.recordedChunks.push(t.data)},this.mediaRecorder.onstop=()=>{let t=new Blob(this.recordedChunks,{type:"video/webm"});this.recordedVideoBlob.set(t),this.recordedVideoUrl.set(URL.createObjectURL(t)),console.log("Recording stopped. Blob created."),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.onerror=t=>{console.error("MediaRecorder error:",t.error),this.error.set(`Recording error: ${t.error.name||t.error.message}`),this.isRecording.set(!1),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.start(),this.isRecording.set(!0),this.recordingIntervalId=window.setInterval(()=>this.recordingTime.update(t=>t+1),1e3),console.log("Recording started.")}catch(t){console.error("Error starting MediaRecorder:",t),this.error.set(`Failed to start recording: ${t.message}`),this.isRecording.set(!1)}}}stopRecording(){this.mediaRecorder&&this.isRecording()&&(this.mediaRecorder.stop(),this.isRecording.set(!1),console.log("Attempting to stop recording..."))}playRecordedVideo(){this.recordedVideoUrl()&&this.recordedVideoPlayerRef()&&(this.recordedVideoPlayerRef().nativeElement.load(),this.recordedVideoPlayerRef().nativeElement.play().catch(t=>console.error("Error playing recorded video:",t)))}async generateVideo(t){if(!this.isAiAvailable()||!this.genAI){this.error.set("AI features are unavailable. Please check your configuration (window.AURA_GEMINI_API_KEY).");return}let n=this.videoPrompt().trim();if(!n){this.error.set("Please enter a prompt for video generation.");return}if(t&&!this.imageForVideoGeneration()){this.error.set('Please select an image first or clear "Generate from image" option.');return}this.isGeneratingVideo.set(!0),this.error.set(null),this.generatedVideoUrl.set(null),this.generationProgressMessage.set("Starting video generation...");try{let i,r={numberOfVideos:1,aspectRatio:this.aspectRatio()};if(t&&this.imageForVideoGeneration()){let s=this.imageForVideoGeneration().split(";")[0].split(":")[1],a=this.imageForVideoGeneration().split(",")[1];i=await this.genAI.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:n,image:{imageBytes:a,mimeType:s},config:r})}else i=await this.genAI.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:n,config:r});for(this.generationProgressMessage.set("Video generation in progress. This may take a few minutes...");!i.done;)await new Promise(s=>setTimeout(s,1e4)),this.generationProgressMessage.set(`Still generating... Current status: ${i.metadata?.state||"processing"}`),i=await this.genAI.operations.getVideosOperation({operation:i});let o=i.response?.generatedVideos?.[0]?.video?.uri;o?(this.generatedVideoUrl.set(`${o}&key=${this.aiService.getApiKey()}`),this.generationProgressMessage.set("Video generation complete!")):(this.error.set("Video generation failed: No download link in response."),this.generationProgressMessage.set(null))}catch(i){console.error("Error generating video:",i),this.error.set(`Video generation failed: ${i.message||"Unknown error"}.`),this.generationProgressMessage.set(null)}finally{this.isGeneratingVideo.set(!1)}}formatTime(t){if(isNaN(t)||t<0)return"00:00";let n=Math.floor(t/60),i=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}clearAll(){this.stopMediaStream(),this.isRecording.set(!1),this.recordedVideoBlob.set(null),this.recordedVideoUrl.set(null),this.recordingTime.set(0),this.videoPrompt.set(""),this.generatedVideoUrl.set(null),this.isGeneratingVideo.set(!1),this.generationProgressMessage.set(null),this.aspectRatio.set("16:9"),this.error.set(null)}};kn.\u0275fac=function(n){return new(n||kn)},kn.\u0275cmp=ue({type:kn,selectors:[["app-video-editor"]],viewQuery:function(n,i){n&1&&(pe(i.liveVideoPreviewRef,g0,5),pe(i.recordedVideoPlayerRef,v0,5)),n&2&&Ne(2)},inputs:{imageForVideoGeneration:[1,"imageForVideoGeneration"],initialPrompt:[1,"initialPrompt"],theme:[1,"theme"]},decls:46,vars:48,consts:[["liveVideoPreview",""],["recordedVideoPlayer",""],[1,"w-full","p-4","flex","flex-col","gap-4","relative","min-h-[600px]"],[1,"text-center","text-lg"],[1,"bg-red-900/50","text-red-300","p-3","text-center","border","border-red-500","animate-fade-in"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4","flex-grow"],[1,"flex","flex-col","gap-4","p-4"],[1,"text-base"],[1,"flex-grow","flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden","bg-black","relative"],["autoplay","","muted","","playsinline","",1,"max-w-full","max-h-full","object-contain"],[1,"absolute","text-sm",3,"class"],[1,"absolute","top-2","left-2","text-red-500","animate-pulse","text-sm","flex","items-center","gap-1"],[1,"flex","gap-2"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"px-4","py-2","border-2","text-lg",3,"click","disabled"],[1,"flex","flex-col","items-center","gap-2"],["for","video-prompt",1,"block","text-sm"],["id","video-prompt","placeholder","e.g., 'A neon hologram of a cat driving at top speed', 'A futuristic city at sunset with flying cars and towering skyscrapers.'","rows","4",1,"w-full","p-2","text-sm","focus:ring-500","resize-y",3,"input","value","disabled"],[1,"block","text-sm","mt-2"],[1,"flex","flex-wrap","gap-2","text-sm"],["type","button",1,"px-3","py-1","border",3,"class","disabled"],[1,"flex","flex-col","gap-2","mt-4"],[1,"flex-grow","px-4","py-2","border-2","text-lg",3,"class","disabled"],[1,"text-sm","mt-2","text-center","animate-pulse",3,"class"],[1,"flex","justify-center","mt-4"],[1,"px-6","py-2","border-2","text-lg",3,"click"],[1,"absolute","text-sm"],[1,"w-2","h-2","rounded-full","bg-red-500"],[1,"text-base","mt-4"],[1,"flex","items-center","justify-center","border-2","border-dashed","p-2","min-h-[200px]","overflow-hidden","bg-black"],["controls","",1,"max-w-full","max-h-full","object-contain",3,"src"],["download","aura-recorded-video.webm",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"],[1,"text-sm"],["alt","Image from editor",1,"w-24","h-24","object-cover","border",3,"src"],["type","button",1,"px-3","py-1","border",3,"click","disabled"],[1,"text-sm","mt-2","text-center","animate-pulse"],["controls","","autoplay","","loop","","muted","","playsinline","",1,"max-w-full","max-h-full","object-contain",3,"src"],["download","aura-ai-generated-video.mp4",1,"w-full","text-center","px-4","py-2","border-2","hover:text-black","text-lg",3,"href"]],template:function(n,i){if(n&1){let r=j();h(0,"div",2)(1,"h2",3),d(2,"[ AURA VIDEO LAB ]"),m(),x(3,E0,2,1,"div",4),h(4,"div",5)(5,"div",6)(6,"h3",7),d(7,"// CAMERA & RECORDING"),m(),h(8,"div",8),X(9,"video",9,0),x(11,C0,2,2,"span",10),x(12,_0,3,1,"span",11),m(),h(13,"div",12)(14,"button",13),F("click",function(){return C(r),_(i.toggleCamera())}),x(15,D0,2,0,"span")(16,b0,2,0,"span"),m()(),h(17,"div",12)(18,"button",13),F("click",function(){return C(r),_(i.startRecording())}),x(19,I0,2,0,"span")(20,w0,2,0,"span"),m(),h(21,"button",14),F("click",function(){return C(r),_(i.stopRecording())}),d(22," [ STOP ] "),m()(),x(23,x0,7,8),m(),h(24,"div",6)(25,"h3",7),d(26,"// AI VIDEO GENERATION"),m(),x(27,M0,4,5,"div",15),h(28,"label",16),d(29,"VIDEO PROMPT:"),m(),h(30,"textarea",17),F("input",function(s){return C(r),_(i.videoPrompt.set(s.target.value))}),m(),h(31,"label",18),d(32,"ASPECT RATIO:"),m(),h(33,"div",19),Z(34,A0,2,4,"button",20,yi),m(),h(36,"div",21)(37,"button",13),F("click",function(){return C(r),_(i.generateVideo(!1))}),x(38,S0,2,0,"span")(39,T0,2,0,"span"),m(),x(40,k0,3,4,"button",22),m(),x(41,P0,2,3,"p",23),x(42,F0,6,8),m()(),h(43,"div",24)(44,"button",25),F("click",function(){return C(r),_(i.clearAll())}),d(45," [ CLEAR ALL ] "),m()()()}n&2&&(p("border border-"+i.theme().purple+"-500/30"),c(),p("text-"+i.theme().purple+"-400"),c(2),M(i.error()?3:-1),c(2),p("border border-"+i.theme().purple+"-500/20"),c(),p("text-"+i.theme().purple+"-300"),c(2),p("border-"+i.theme().purple+"-700/50"),c(3),M(i.isCameraActive()?-1:11),c(),M(i.isRecording()?12:-1),c(2),p("hover:text-black"),O("disabled",i.isRecording()),c(),M(i.isCameraActive()?15:16),c(3),p("hover:text-black"),O("disabled",i.isRecording()||!i.isCameraActive()),c(),M(i.isRecording()?19:20),c(2),p("hover:text-black"),O("disabled",!i.isRecording()),c(2),M(i.recordedVideoUrl()?23:-1),c(),p("border border-"+i.theme().purple+"-500/20"),c(),p("text-"+i.theme().purple+"-300"),c(2),M(i.imageForVideoGeneration()?27:-1),c(),p("text-"+i.theme().purple+"-300"),c(2),p("focus:border-"+i.theme().purple+"-500"),O("value",i.videoPrompt())("disabled",i.isGeneratingVideo()||!i.isAiAvailable()),c(),p("text-"+i.theme().purple+"-300"),c(3),K(_t(47,y0)),c(3),p("hover:text-black"),O("disabled",!i.videoPrompt()||i.isGeneratingVideo()||!i.isAiAvailable()),c(),M(i.isGeneratingVideo()?38:39),c(2),M(i.imageForVideoGeneration()?40:-1),c(),M(i.generationProgressMessage()?41:-1),c(),M(i.generatedVideoUrl()?42:-1),c(2),p("hover:text-black"))},dependencies:[me],styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0});var po=kn;var O0=["visualizerCanvas"],Pn=class Pn{constructor(){this.analyserNode=te(void 0);this.canvasRef=ve.required("visualizerCanvas");this.theme=te.required();le(()=>{let t=this.analyserNode(),n=this.theme();t?(t.fftSize=256,this.dataArray=new Uint8Array(t.frequencyBinCount),this.startVisualizer()):this.stopVisualizer()})}ngAfterViewInit(){let t=this.canvasRef().nativeElement,n=t.getContext("2d");n?(this.ctx=n,t.width=t.offsetWidth,t.height=t.offsetHeight):console.error("Failed to get 2D rendering context for visualizer canvas.")}ngOnDestroy(){this.stopVisualizer()}startVisualizer(){if(this.stopVisualizer(),!this.ctx||!this.analyserNode()||!this.dataArray)return;let t=this.canvasRef().nativeElement;t.width=t.offsetWidth,t.height=t.offsetHeight,this.animationFrameId=requestAnimationFrame(this.draw.bind(this))}stopVisualizer(){if(this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.ctx){let t=this.canvasRef().nativeElement;this.ctx.clearRect(0,0,t.width,t.height)}}draw(){let t=this.analyserNode(),n=this.canvasRef().nativeElement,i=this.ctx;if(!t||!i||!this.dataArray){this.stopVisualizer();return}t.getByteFrequencyData(this.dataArray),i.clearRect(0,0,n.width,n.height);let r=t.frequencyBinCount,o=n.width/r*.9,s=0;for(let a=0;a<r;a++){let l=this.dataArray[a]/255*n.height,u=a*(360/r);i.fillStyle=`hsl(${u}, 80%, 60%)`,i.fillRect(s,n.height-l,o,l),s+=o+n.width/r*.1}this.animationFrameId=requestAnimationFrame(this.draw.bind(this))}};Pn.\u0275fac=function(n){return new(n||Pn)},Pn.\u0275cmp=ue({type:Pn,selectors:[["app-audio-visualizer"]],viewQuery:function(n,i){n&1&&pe(i.canvasRef,O0,5),n&2&&Ne()},inputs:{analyserNode:[1,"analyserNode"],theme:[1,"theme"]},decls:3,vars:2,consts:[["visualizerCanvas",""],[1,"visualizer-container"]],template:function(n,i){n&1&&(h(0,"div",1),X(1,"canvas",null,0),m()),n&2&&Re("--primary-color","var(--color-"+i.theme().primary+"-700)")},dependencies:[me],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.visualizer-container[_ngcontent-%COMP%]{width:100%;height:100%;background-color:transparent;overflow:hidden;border:1px solid var(--primary-color)}canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0});var mo=Pn;var Jd=()=>[],L0=(e,t)=>t.midi;function V0(e,t){e&1&&(h(0,"span"),d(1,"[ STOP ]"),m())}function B0(e,t){e&1&&(h(0,"span"),d(1,"[ PLAY ]"),m())}function j0(e,t){if(e&1&&(h(0,"div",14),d(1),m()),e&2){let n=t.$index,i=g();p(i.currentStep()===n?"text-"+i.theme().primary+"-300":"text-"+i.theme().neutral+"-400"),re("font-bold",i.currentStep()===n),c(),H(" ",n+1," ")}}function H0(e,t){if(e&1){let n=j();h(0,"div",17),F("click",function(){let r=C(n).$index,o=g().$implicit,s=g();return _(s.toggleNote(o.midi,r))}),m()}if(e&2){let n=t.$implicit,i=t.$index,r=g(2);p(n&&r.currentStep()===i?"bg-"+r.theme().primary+"-400":"")}}function U0(e,t){if(e&1&&(h(0,"div",15),d(1),m(),Z(2,H0,1,2,"div",16,be)),e&2){let n=t.$implicit,i=g();p(n.name.includes("#")?"text-"+i.theme().primary+"-400/70":"text-"+i.theme().primary+"-400"),re("font-bold",n.name.includes("#")),c(),H(" ",i.getNoteDisplay(n)," "),c(),K(i.sequence().get(n.midi)||_t(5,Jd))}}var Zd=3,$0=12,G0=2,Kd=16,Ka=[],q0=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];for(let e=Zd;e<Zd+G0;e++)for(let t=0;t<$0;t++)Ka.push({midi:60+(e-4)*12+t,name:q0[t],octave:e});Ka.reverse();var Fn=class Fn{constructor(){this.theme=te.required();this.allNotes=Ka;this.bpm=I(120);this.isPlaying=I(!1);this.currentStep=I(-1);this.sequence=I(new Map);this.audioContext=null;this.initializeEmptySequence(),le(()=>{this.initializeEmptySequence()})}ngAfterViewInit(){}ngOnDestroy(){this.stop(),this.audioContext?.close().catch(t=>console.error("Error closing AudioContext:",t))}initializeEmptySequence(){let t=new Map;this.allNotes.forEach(n=>{t.set(n.midi,Array(Kd).fill(!1))}),this.sequence.set(t)}async initAudio(){this.audioContext&&this.audioContext.state==="running"||(this.audioContext||(this.audioContext=new AudioContext,this.masterGainNode=this.audioContext.createGain(),this.masterGainNode.gain.value=.5,this.masterGainNode.connect(this.audioContext.destination)),this.audioContext.state==="suspended"&&await this.audioContext.resume())}async togglePlay(){await this.initAudio(),this.isPlaying()?this.stop():this.start()}start(){this.isPlaying()||(this.isPlaying.set(!0),this.currentStep.set(this.currentStep()===-1?0:this.currentStep()),this.scheduleNextStep())}stop(){this.isPlaying.set(!1),this.timerId&&(clearTimeout(this.timerId),this.timerId=void 0)}resetSequence(){this.stop(),this.currentStep.set(-1),this.initializeEmptySequence()}scheduleNextStep(){if(!this.isPlaying()||!this.audioContext)return;let n=60/this.bpm()/4;this.timerId=window.setTimeout(()=>{let i=this.currentStep();this.playStep(i),this.currentStep.update(r=>(r+1)%Kd),this.scheduleNextStep()},n*1e3)}playStep(t){!this.audioContext||!this.masterGainNode||this.sequence().forEach((n,i)=>{n[t]&&this.playNote(i,this.audioContext.currentTime)})}playNote(t,n){if(!this.audioContext||!this.masterGainNode)return;let i=440*Math.pow(2,(t-69)/12),r=this.audioContext.createOscillator(),o=this.audioContext.createGain();r.type="sine",r.frequency.setValueAtTime(i,n),o.gain.setValueAtTime(.3,n),o.gain.exponentialRampToValueAtTime(1e-4,n+.5),r.connect(o),o.connect(this.masterGainNode),r.start(n),r.stop(n+.5)}toggleNote(t,n){this.sequence.update(i=>{let r=i.get(t);return r&&(r[n]=!r[n]),new Map(i)})}onBpmChange(t){let n=parseInt(t.target.value,10);!isNaN(n)&&n>=60&&n<=240&&(this.bpm.set(n),this.isPlaying()&&(this.stop(),this.start()))}getNoteDisplay(t){return`${t.name}${t.octave}`}};Fn.\u0275fac=function(n){return new(n||Fn)},Fn.\u0275cmp=ue({type:Fn,selectors:[["app-piano-roll"]],inputs:{theme:[1,"theme"]},decls:22,vars:18,consts:[[1,"w-full","p-4","flex","flex-col","gap-4","relative"],[1,"text-center","text-lg"],[1,"flex","flex-col","sm:flex-row","justify-between","items-center","gap-4","p-2"],[1,"flex","items-center","gap-4"],[1,"w-24","px-4","py-2","border-2","text-lg",3,"click"],[1,"px-3","py-2","border-2","text-lg",3,"click"],[1,"flex","items-center","gap-2"],["for","bpm",1,"text-sm"],["id","bpm-slider","type","range","min","60","max","240",1,"w-24","aura-slider",3,"input","value"],["id","bpm-text","type","number","min","60","max","240",1,"p-1","text-sm","w-16","text-center",3,"input","value"],[1,"w-full","overflow-x-auto"],[1,"piano-roll-grid","grid","gap-0.5","p-2"],[1,"sequencer-header","text-neutral-400","text-xs","text-right","pr-2"],[1,"step-header","text-xs","text-center","p-1",3,"class","font-bold"],[1,"step-header","text-xs","text-center","p-1"],[1,"note-name","text-xs","text-right","pr-2","py-1"],[1,"note-step","w-6","h-6","border","cursor-pointer","transition-all","duration-75",3,"class"],[1,"note-step","w-6","h-6","border","cursor-pointer","transition-all","duration-75",3,"click"]],template:function(n,i){n&1&&(h(0,"div",0)(1,"h2",1),d(2,"[ AURA PIANO ROLL ]"),m(),h(3,"div",2)(4,"div",3)(5,"button",4),F("click",function(){return i.togglePlay()}),x(6,V0,2,0,"span")(7,B0,2,0,"span"),m(),h(8,"button",5),F("click",function(){return i.resetSequence()}),d(9," [ RESET ] "),m(),h(10,"div",6)(11,"label",7),d(12,"BPM:"),m(),h(13,"input",8),F("input",function(o){return i.onBpmChange(o)}),m(),h(14,"input",9),F("input",function(o){return i.onBpmChange(o)}),m()()()(),h(15,"div",10)(16,"div",11),X(17,"div",12),Z(18,j0,2,5,"div",13,be),Z(20,U0,4,6,null,null,L0),m()()()),n&2&&(p("border border-"+i.theme().primary+"-500/30"),c(),p("text-"+i.theme().primary+"-400"),c(2),p("border border-"+i.theme().primary+"-500/20"),c(2),p("hover:text-black"),c(),M(i.isPlaying()?6:7),c(2),p("hover:text-black"),c(5),O("value",i.bpm()),c(),p("focus:border-"+i.theme().primary+"-500"),O("value",i.bpm()),c(2),p("border border-"+i.theme().primary+"-500/20"),c(2),K(_t(17,Jd).constructor(16)),c(2),K(i.allNotes))},dependencies:[me],styles:[".piano-roll-grid[_ngcontent-%COMP%]{grid-template-columns:80px repeat(16,1fr);grid-auto-rows:24px;width:max-content}.sequencer-header[_ngcontent-%COMP%], .note-name[_ngcontent-%COMP%], .note-step[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.aura-slider[_ngcontent-%COMP%]{-webkit-appearance:none;height:4px;border-radius:2px;background:var(--color-amber-900);outline:none;opacity:.7;transition:opacity .2s}.aura-slider[_ngcontent-%COMP%]:hover{opacity:1}.aura-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:12px;height:12px;border-radius:50%;background:var(--color-amber-400);cursor:pointer;border:1px solid var(--color-amber-900)}.aura-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:12px;height:12px;border-radius:50%;background:var(--color-amber-400);cursor:pointer;border:1px solid var(--color-amber-900)}div[_ngcontent-%COMP%]::-webkit-scrollbar{height:8px}div[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--color-neutral-800)}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--color-primary-400);border-radius:4px;border:1px solid var(--color-primary-700)}div[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:var(--color-primary-300)}"],changeDetection:0});var ho=Fn;var z0=["audioPlayerA"],W0=["videoPlayerA"],Q0=["audioPlayerB"],Y0=["videoPlayerB"],Z0=["fileInput"],ef=(e,t)=>t.title,K0=(e,t)=>t.audioSrc;function J0(e,t){e&1&&(v(0,"span"),d(1,"[ DJ ]"),y())}function X0(e,t){e&1&&(v(0,"span"),d(1,"[ PIANO EDITOR ]"),y())}function ey(e,t){e&1&&(v(0,"span"),d(1,"[ IMAGE EDITOR ]"),y())}function ty(e,t){e&1&&(v(0,"span"),d(1,"[ VIDEO EDITOR ]"),y())}function ny(e,t){e&1&&(v(0,"span"),d(1,"[ NETWORKING ]"),y())}function iy(e,t){e&1&&(v(0,"span"),d(1,"[ PLAYER ]"),y())}function ry(e,t){e&1&&(v(0,"span"),d(1,"[ CLOSE CHATBOT ]"),y())}function oy(e,t){e&1&&(v(0,"span"),d(1,"[ CHATBOT ]"),y())}function sy(e,t){if(e&1){let n=j();v(0,"video",71,3),w("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("timeupdate",function(r){C(n);let o=g(2);return _(o.onTimeUpdate(r,"A"))})("loadedmetadata",function(r){C(n);let o=g(2);return _(o.onLoadedMetadata(r,"A"))})("ended",function(){C(n);let r=g(2);return _(r.onEnded("A"))}),y()}}function ay(e,t){if(e&1){let n=j();v(0,"div",72),w("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"A"))}),de(1,"div",73)(2,"div",74),y()}if(e&2){let n=g(2);Re("transform",n.scratchRotationA()),re("spinning",n.deckA().isPlaying&&!n.isScratchingA()),c(),p("bg-"+n.currentTheme().accent+"-600"),c(),p(n.djBgStone900)}}function ly(e,t){e&1&&(v(0,"span"),d(1,"[ || ]"),y())}function cy(e,t){e&1&&(v(0,"span"),d(1,"[ > ]"),y())}function uy(e,t){if(e&1&&de(0,"div",75),e&2){let n=t.$index,i=g(2);re("green",n/12<i.vuLevelA()&&n<8)("yellow",n/12<i.vuLevelA()&&n>=8&&n<10)("red",n/12<i.vuLevelA()&&n>=10)}}function dy(e,t){if(e&1&&(v(0,"div",76),d(1,"[ SEARCHING... ]"),y()),e&2){let n=g(2);p("border-"+n.currentTheme().accent+"-500/50")}}function fy(e,t){if(e&1){let n=j();v(0,"div",79)(1,"p",80),d(2),y(),v(3,"div",81)(4,"p",82),d(5),y(),v(6,"div",83)(7,"button",84),w("click",function(){let r=C(n).$implicit,o=g(3);return _(o.loadTrackToDeck(r,"A"))}),d(8,"->A"),y(),v(9,"button",84),w("click",function(){let r=C(n).$implicit,o=g(3);return _(o.loadTrackToDeck(r,"B"))}),d(10,"->B"),y()()()()}if(e&2){let n=t.$implicit,i=g(3);p("hover:bg-"+i.currentTheme().neutral+"-700/50"),c(2),H("> ",n.title),c(2),p(i.djTextNeutral400Class),c(),H("-- ",n.artist),c(2),p(i.djHoverBgClass),c(2),p(i.djHoverBgClass)}}function py(e,t){if(e&1&&(v(0,"div",77),Z(1,fy,11,10,"div",78,ef),y()),e&2){let n=g(2);p("border-"+n.currentTheme().accent+"-500/50"),c(),K(n.searchResults())}}function my(e,t){if(e&1){let n=j();v(0,"button",87),w("click",function(){C(n);let r=g(3);return _(r.shareMix())}),d(1,"[ SHARE ]"),y()}if(e&2){let n=g(3);p(n.djHoverBgClass)}}function hy(e,t){if(e&1&&(v(0,"div",63)(1,"a",85),d(2,"[ DOWNLOAD ]"),y(),x(3,my,2,2,"button",86),y()),e&2){let n=g(2);c(),p(n.djHoverBgClass),L("href",t,ie),c(2),M(n.canShare()?3:-1)}}function gy(e,t){e&1&&(de(0,"span",88),v(1,"span",89),d(2,"[ ACTIVE ]"),y())}function vy(e,t){if(e&1&&de(0,"div",75),e&2){let n=t.$index,i=g(3);re("green",n/12<i.vuLevelMic()&&n<8)("yellow",n/12<i.vuLevelMic()&&n>=8&&n<10)("red",n/12<i.vuLevelMic()&&n>=10)}}function yy(e,t){if(e&1){let n=j();v(0,"div",65)(1,"div",90),Z(2,vy,1,6,"div",45,be),y(),v(4,"div",41)(5,"span",91),d(6,"VOL"),y(),v(7,"input",92),w("input",function(r){C(n);let o=g(2);return _(o.onMicVolumeChange(r))}),y()(),v(8,"div",41)(9,"span",91),d(10,"HI"),y(),v(11,"input",92),w("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"High"))}),y()(),v(12,"div",41)(13,"span",91),d(14,"MID"),y(),v(15,"input",92),w("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"Mid"))}),y()(),v(16,"div",41)(17,"span",91),d(18,"LOW"),y(),v(19,"input",92),w("input",function(r){C(n);let o=g(2);return _(o.onMicEqChange(r,"Low"))}),y()(),v(20,"div",41)(21,"span",91),d(22,"FX"),y(),v(23,"input",93),w("input",function(r){C(n);let o=g(2);return _(o.onMicFilterChange(r))}),y()()()}if(e&2){let n=g(2);c(),p(n.djBgStone800),c(),K(n.vuBars),c(5),L("value",n.micVolume()),c(4),L("value",n.micEqHigh()),c(4),L("value",n.micEqMid()),c(4),L("value",n.micEqLow()),c(4),L("value",n.getNormalizedFilterValue(n.micFilterFreq()))}}function Ey(e,t){if(e&1&&de(0,"div",75),e&2){let n=t.$index,i=g(2);re("green",n/12<i.vuLevelMaster()&&n<8)("yellow",n/12<i.vuLevelMaster()&&n>=8&&n<10)("red",n/12<i.vuLevelMaster()&&n>=10)}}function Cy(e,t){if(e&1){let n=j();v(0,"video",71,4),w("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("timeupdate",function(r){C(n);let o=g(2);return _(o.onTimeUpdate(r,"B"))})("loadedmetadata",function(r){C(n);let o=g(2);return _(o.onLoadedMetadata(r,"B"))})("ended",function(){C(n);let r=g(2);return _(r.onEnded("B"))}),y()}}function _y(e,t){if(e&1){let n=j();v(0,"div",72),w("mousedown",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))})("touchstart",function(r){C(n);let o=g(2);return _(o.onScratchStart(r,"B"))}),de(1,"div",94)(2,"div",74),y()}if(e&2){let n=g(2);Re("transform",n.scratchRotationB()),re("spinning",n.deckB().isPlaying&&!n.isScratchingB()),c(),p("bg-"+n.currentTheme().accent+"-600"),c(),p(n.djBgStone900)}}function Dy(e,t){e&1&&(v(0,"span"),d(1,"[ || ]"),y())}function by(e,t){e&1&&(v(0,"span"),d(1,"[ > ]"),y())}function Iy(e,t){if(e&1&&de(0,"div",75),e&2){let n=t.$index,i=g(2);re("green",n/12<i.vuLevelB()&&n<8)("yellow",n/12<i.vuLevelB()&&n>=8&&n<10)("red",n/12<i.vuLevelB()&&n>=10)}}function wy(e,t){if(e&1){let n=j();v(0,"div",22)(1,"div",23)(2,"h2",24),d(3," [ DECK A ] "),y(),v(4,"div",25)(5,"div",26)(6,"div",27),x(7,sy,2,0,"video",28)(8,ay,3,8,"div",29),y(),v(9,"div",30)(10,"h3",31),d(11),y(),v(12,"p",32),d(13),y()(),v(14,"div",33)(15,"input",34),w("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"A"))}),y(),v(16,"div",35)(17,"span"),d(18),y(),v(19,"span"),d(20),y()()(),v(21,"div",36)(22,"button",37),w("click",function(){C(n);let r=g();return _(r.togglePlayPause("A"))}),x(23,ly,2,0,"span")(24,cy,2,0,"span"),y(),v(25,"button",38),w("click",function(){C(n);let r=g();return _(r.toggleLoop("A"))}),v(26,"span"),d(27,"[ REPEAT ]"),y()()()(),v(28,"div",39)(29,"div",40)(30,"div",41)(31,"span"),d(32,"GAIN"),y(),v(33,"input",42),w("input",function(r){C(n);let o=g();return _(o.onGainChange(r,"A"))}),y()(),v(34,"div",41)(35,"span"),d(36,"HI"),y(),v(37,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","High"))}),y()(),v(38,"div",41)(39,"span"),d(40,"MID"),y(),v(41,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","Mid"))}),y()(),v(42,"div",41)(43,"span"),d(44,"LOW"),y(),v(45,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"A","Low"))}),y()(),v(46,"div",41)(47,"span"),d(48,"FX"),y(),v(49,"input",43),w("input",function(r){C(n);let o=g();return _(o.onFilterChange(r,"A"))}),y()()(),v(50,"div",44),Z(51,uy,1,6,"div",45,be),y(),v(53,"div",46)(54,"span",47),d(55,"PITCH"),y(),v(56,"input",48),w("input",function(r){C(n);let o=g();return _(o.onPitchChange(r,"A"))}),y()()()()(),v(57,"div",49)(58,"h2",50),d(59,"[ MIXER ]"),y(),v(60,"div",51)(61,"form",52),w("submit",function(r){C(n);let o=g();return _(o.performSearch(r))}),v(62,"div",53)(63,"input",54),w("input",function(r){C(n);let o=g();return _(o.onSearchQueryInput(r))}),y(),v(64,"button",55),d(65,"[SCN]"),y()()(),x(66,dy,2,2,"div",56),x(67,py,3,2,"div",57),y(),v(68,"div",58)(69,"h3",47),d(70,"[ RECORDING ]"),y(),v(71,"div",59)(72,"button",60),w("click",function(){C(n);let r=g();return _(r.toggleRecording())}),v(73,"span",9),de(74,"span",61),d(75),y()(),v(76,"span",62),d(77),y()(),x(78,hy,4,4,"div",63),y(),v(79,"div",58)(80,"h3",64),d(81," [ MICROPHONE ] "),x(82,gy,3,0),y(),v(83,"div",59)(84,"button",60),w("click",function(){C(n);let r=g();return _(r.toggleMicrophone())}),d(85),y()(),x(86,yy,24,7,"div",65),y(),v(87,"div",66)(88,"div",44),Z(89,Ey,1,6,"div",45,be),y(),v(91,"input",67),w("input",function(r){C(n);let o=g();return _(o.onCrossfadeChange(r))}),y(),v(92,"input",68),w("input",function(r){C(n);let o=g();return _(o.onVolumeChange(r))}),y()(),v(93,"div",69)(94,"span"),d(95,"DECK A"),y(),v(96,"span"),d(97,"MASTER"),y(),v(98,"span"),d(99,"DECK B"),y()(),v(100,"button",70),w("click",function(){C(n);let r=g();return _(r.openFilePickerForDeck("B"))}),d(101,"[ LOAD FILE ]"),y()(),v(102,"div",23)(103,"h2",24),d(104," [ DECK B ] "),y(),v(105,"div",25)(106,"div",26)(107,"div",27),x(108,Cy,2,0,"video",28)(109,_y,3,8,"div",29),y(),v(110,"div",30)(111,"h3",31),d(112),y(),v(113,"p",32),d(114),y()(),v(115,"div",33)(116,"input",34),w("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"B"))}),y(),v(117,"div",35)(118,"span"),d(119),y(),v(120,"span"),d(121),y()()(),v(122,"div",36)(123,"button",37),w("click",function(){C(n);let r=g();return _(r.togglePlayPause("B"))}),x(124,Dy,2,0,"span")(125,by,2,0,"span"),y(),v(126,"button",38),w("click",function(){C(n);let r=g();return _(r.toggleLoop("B"))}),v(127,"span"),d(128,"[ REPEAT ]"),y()()()(),v(129,"div",39)(130,"div",40)(131,"div",41)(132,"span"),d(133,"GAIN"),y(),v(134,"input",42),w("input",function(r){C(n);let o=g();return _(o.onGainChange(r,"B"))}),y()(),v(135,"div",41)(136,"span"),d(137,"HI"),y(),v(138,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","High"))}),y()(),v(139,"div",41)(140,"span"),d(141,"MID"),y(),v(142,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","Mid"))}),y()(),v(143,"div",41)(144,"span"),d(145,"LOW"),y(),v(146,"input",42),w("input",function(r){C(n);let o=g();return _(o.onEqChange(r,"B","Low"))}),y()(),v(147,"div",41)(148,"span"),d(149,"FX"),y(),v(150,"input",43),w("input",function(r){C(n);let o=g();return _(o.onFilterChange(r,"B"))}),y()()(),v(151,"div",44),Z(152,Iy,1,6,"div",45,be),y(),v(154,"div",46)(155,"span",47),d(156,"PITCH"),y(),v(157,"input",48),w("input",function(r){C(n);let o=g();return _(o.onPitchChange(r,"B"))}),y()()()()()()}if(e&2){let n,i=g();p(i.djTextNeutral400Class),c(),p(i.djBorderClass),c(),p(i.djTextColorClass),c(5),M(i.deckA().track.videoSrc?7:8),c(3),p(i.mainTextColorClass()),L("title",i.deckA().track.title),c(),W(i.deckA().track.title),c(),p(i.djTextNeutral400Class),L("title",i.deckA().track.artist),c(),H("-- ",i.deckA().track.artist," --"),c(2),L("max",i.deckA().duration)("value",i.deckA().progress),c(),p(i.djTextNeutral400Class),c(2),W(i.formatTime(i.deckA().progress)),c(2),W(i.formatTime(i.deckA().duration)),c(2),p(i.djHoverBgClass),c(),M(i.deckA().isPlaying?23:24),c(2),p(i.deckA().loop?"text-black":""),c(3),p("border-l-2 border-"+i.currentTheme().accent+"-500/20"),c(5),L("value",i.deckA().gain),c(4),L("value",i.deckA().eqHigh),c(4),L("value",i.deckA().eqMid),c(4),L("value",i.deckA().eqLow),c(4),L("value",i.getNormalizedFilterValue(i.deckA().filterFreq)),c(),p(i.djBgStone800),c(),K(i.vuBars),c(5),L("value",i.deckA().playbackRate),c(),p(i.djBorderClass),c(),p(i.djTextColorClass),c(5),p("focus:border-"+i.currentTheme().accent+"-500"),L("value",i.searchQuery()),c(),p(i.djHoverBgClass),c(2),M(i.isSearching()?66:-1),c(),M(i.searchResults().length>0?67:-1),c(),p(i.djBorderClass),c(4),p(i.djHoverBgClass),c(2),re("recording",i.isRecording()),c(),H(" ",i.isRecording()?"STOP":"REC"," "),c(2),W(i.formatTime(i.recordingTime())),c(),M((n=i.recordedMixUrl())?78:-1,n),c(),p(i.djBorderClass),c(3),M(i.micEnabled()?82:-1),c(2),p(i.djHoverBgClass),c(),H(" ",i.micEnabled()?"DISABLE":"ENABLE"," "),c(),M(i.micEnabled()?86:-1),c(2),p(i.djBgStone800),c(),K(i.vuBars),c(2),L("value",i.crossfade()),c(),L("value",i.volume()),c(8),p(i.djHoverBgClass),c(2),p(i.djBorderClass),c(),p(i.djTextColorClass),c(5),M(i.deckB().track.videoSrc?108:109),c(3),p(i.mainTextColorClass()),L("title",i.deckB().track.title),c(),W(i.deckB().track.title),c(),p(i.djTextNeutral400Class),L("title",i.deckB().track.artist),c(),H("-- ",i.deckB().track.artist," --"),c(2),L("max",i.deckB().duration)("value",i.deckB().progress),c(),p(i.djTextNeutral400Class),c(2),W(i.formatTime(i.deckB().progress)),c(2),W(i.formatTime(i.deckB().duration)),c(2),p(i.djHoverBgClass),c(),M(i.deckB().isPlaying?124:125),c(2),p(i.deckB().loop?"text-black":""),c(3),p("border-l-2 border-"+i.currentTheme().accent+"-500/20"),c(5),L("value",i.deckB().gain),c(4),L("value",i.deckB().eqHigh),c(4),L("value",i.deckB().eqMid),c(4),L("value",i.deckB().eqLow),c(4),L("value",i.getNormalizedFilterValue(i.deckB().filterFreq)),c(),p(i.djBgStone800),c(),K(i.vuBars),c(5),L("value",i.deckB().playbackRate)}}function xy(e,t){if(e&1&&de(0,"app-piano-roll",13),e&2){let n=g();L("theme",n.currentTheme())}}function My(e,t){e&1&&de(0,"video",97,3)}function Ay(e,t){if(e&1&&de(0,"img",98),e&2){let n=g(2);L("src",n.deckA().track.albumArtUrl,ie)}}function Sy(e,t){e&1&&(v(0,"span"),d(1,"[ || ]"),y())}function Ty(e,t){e&1&&(v(0,"span"),d(1,"[ > ]"),y())}function Ny(e,t){if(e&1&&(v(0,"div",76),d(1,"[ SEARCHING... ]"),y()),e&2){let n=g(2);p(n.mainBorderClass())}}function Ry(e,t){if(e&1){let n=j();v(0,"div",79)(1,"p",80),d(2),y(),v(3,"div",81)(4,"p",119),d(5),y(),v(6,"div",83)(7,"button",120),w("click",function(){let r=C(n).$implicit,o=g(3);return _(o.addTrackToPlaylist(r,!0))}),d(8,"[ PLAY ]"),y(),v(9,"button",120),w("click",function(){let r=C(n).$implicit,o=g(3);return _(o.addTrackToPlaylist(r,!1))}),d(10,"[ +QUEUE ]"),y()()()()}if(e&2){let n=t.$implicit,i=g(3);p("hover:bg-"+i.currentTheme().primary+"-900/50"),c(),p(i.mainTextColorClass()),c(),H("> ",n.title),c(3),H("-- ",n.artist),c(2),p(i.mainHoverBgClass()),c(2),p(i.mainHoverBgClass())}}function ky(e,t){if(e&1&&(v(0,"div",117)(1,"h3",118),d(2,"[ Search Results ]"),y(),Z(3,Ry,11,10,"div",78,ef),y()),e&2){let n=g(2);p(n.mainBorderClass()),c(3),K(n.searchResults())}}function Py(e,t){if(e&1){let n=j();v(0,"div",121),w("click",function(){let r=C(n).$index,o=g(2);return _(o.playTrackFromPlaylist(r))}),v(1,"p",80),d(2),y(),v(3,"p",119),d(4),y()()}if(e&2){let n=t.$implicit,i=t.$index,r=g(2);p(r.currentTrackIndex()===i?"bg-"+r.currentTheme().primary+"-900/50":""),c(),re("text-white",r.currentTrackIndex()===i),c(),H("> ",n.title),c(2),H("-- ",n.artist)}}function Fy(e,t){e&1&&(v(0,"p",115),d(1,"[ Load a file or search to begin ]"),y())}function Oy(e,t){if(e&1){let n=j();v(0,"div",14)(1,"div",95)(2,"div",96),x(3,My,2,0,"video",97)(4,Ay,1,1,"img",98),y(),de(5,"app-audio-visualizer",99),v(6,"div",30)(7,"h3",100),d(8),y(),v(9,"p",101),d(10),y()(),v(11,"div",33)(12,"input",34),w("input",function(r){C(n);let o=g();return _(o.onProgressChange(r,"A"))}),y(),v(13,"div",102)(14,"span"),d(15),y(),v(16,"span"),d(17),y()()(),v(18,"div",103)(19,"button",104),w("click",function(){C(n);let r=g();return _(r.playPrevious())}),d(20,"[ << ]"),y(),v(21,"button",105),w("click",function(){C(n);let r=g();return _(r.togglePlayPause("A"))}),x(22,Sy,2,0,"span")(23,Ty,2,0,"span"),y(),v(24,"button",104),w("click",function(){C(n);let r=g();return _(r.playNext())}),d(25,"[ >> ]"),y()(),v(26,"div",65)(27,"span",47),d(28,"VOL:"),y(),v(29,"input",106),w("input",function(r){C(n);let o=g();return _(o.onVolumeChange(r))}),y(),v(30,"button",107),w("click",function(){C(n);let r=g();return _(r.toggleEqPanel())}),d(31,"[EQ]"),y()()(),v(32,"div",108)(33,"form",52),w("submit",function(r){C(n);let o=g();return _(o.performSearch(r))}),v(34,"div",53)(35,"input",109),w("input",function(r){C(n);let o=g();return _(o.onSearchQueryInput(r))}),y(),v(36,"button",110),d(37,"[SCN]"),y()()(),x(38,Ny,2,2,"div",56),x(39,ky,5,2,"div",111),v(40,"div",112)(41,"h3",113),d(42,"[ Playlist ]"),y(),Z(43,Py,5,6,"div",114,K0),x(45,Fy,2,0,"p",115),y(),v(46,"button",116),w("click",function(){C(n);let r=g();return _(r.openFilePickerForDeck(null))}),d(47,"[LOAD FILE]"),y()()()}if(e&2){let n=g();c(2),p(n.mainBorderClass()),c(),M(n.deckA().track.videoSrc?3:4),c(2),L("analyserNode",n.getMasterAnalyser())("theme",n.currentTheme()),c(2),p(n.mainTextColorClass()),L("title",n.deckA().track.title),c(),W(n.deckA().track.title),c(),L("title",n.deckA().track.artist),c(),H("-- ",n.deckA().track.artist," --"),c(2),L("max",n.deckA().duration)("value",n.deckA().progress),c(3),W(n.formatTime(n.deckA().progress)),c(2),W(n.formatTime(n.deckA().duration)),c(2),p(n.mainHoverBgClass()),c(2),p(n.mainHoverBgClass()),c(),M(n.deckA().isPlaying?22:23),c(2),p(n.mainHoverBgClass()),c(3),p(n.mainTextColorClass()),c(2),L("value",n.volume()),c(),p(n.mainHoverBgClass()),c(5),p("focus:border-"+n.currentTheme().primary+"-500"),L("value",n.searchQuery()),c(),p(n.mainHoverBgClass()),c(2),M(n.isSearching()?38:-1),c(),M(n.searchResults().length>0?39:-1),c(),p(n.mainBorderClass()),c(),p(n.mainTextColorClass()),c(2),K(n.playlist()),c(2),M(n.playlist().length===0?45:-1),c(),p(n.mainHoverBgClass())}}function Ly(e,t){if(e&1){let n=j();v(0,"app-image-editor",122),w("imageSelected",function(r){C(n);let o=g();return _(o.handleImageSelectedForAlbumArt(r))})("imageAnalysisRequest",function(r){C(n);let o=g();return o.imageToAnalyzeUrl.set(r),_(o.showChatbot.set(!0))}),y()}if(e&2){let n=g();L("initialPrompt",n.imageEditorInitialPrompt())("theme",n.currentTheme())}}function Vy(e,t){if(e&1&&de(0,"app-video-editor",16),e&2){let n=g();L("imageForVideoGeneration",n.lastImageEditorImageUrl())("initialPrompt",n.videoEditorInitialPrompt())("theme",n.currentTheme())}}function By(e,t){if(e&1&&de(0,"app-networking",17),e&2){let n=g();L("initialSearchQuery",n.networkingLocationQuery())("theme",n.currentTheme())}}function jy(e,t){if(e&1){let n=j();v(0,"app-eq-panel",123),w("close",function(){C(n);let r=g();return _(r.toggleEqPanel())})("eqChange",function(r){C(n);let o=g();return _(o.onMasterEqChange(r))})("enhancementsChange",function(r){C(n);let o=g();return _(o.onEnhancementsChange(r))}),y()}if(e&2){let n=g();L("eqSettings",n.eqSettings())("enhancements",n.enhancements())("theme",n.currentTheme())}}function Hy(e,t){if(e&1){let n=j();v(0,"app-chatbot",124),w("appCommand",function(r){C(n);let o=g();return _(o.handleChatbotCommand(r))})("close",function(){C(n);let r=g();return _(r.showChatbot.set(!1))})("imageAnalysisResult",function(r){C(n);let o=g();return o.imageAnalysisResult.set(r),_(o.imageToAnalyzeUrl.set(null))})("mapLocationResult",function(r){C(n);let o=g();return o.mapLocationResult.set(r),_(o.mapLocationQuery.set(null))}),y()}if(e&2){let n=g();L("theme",n.currentTheme())("imageToAnalyzeUrl",n.imageToAnalyzeUrl())("mapLocationQuery",n.mapLocationQuery())}}function Uy(e,t){if(e&1){let n=j();v(0,"div",125),w("click",function(){C(n);let r=g();return _(r.showApplyAlbumArtModal.set(!1))}),y(),v(1,"div",126)(2,"div",127)(3,"h2",62),d(4,"[[ Apply Album Art ]]"),y(),v(5,"button",128),w("click",function(){C(n);let r=g();return _(r.showApplyAlbumArtModal.set(!1))}),d(6," [X] "),y()(),v(7,"p",129),d(8,"Where do you want to apply this image?"),y(),v(9,"div",130)(10,"button",131),w("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("player"))}),d(11,"[ CURRENT PLAYER TRACK ]"),y(),v(12,"button",131),w("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("A"))}),d(13,"[ DECK A ]"),y(),v(14,"button",131),w("click",function(){C(n);let r=g();return _(r.applyImageAsAlbumArt("B"))}),d(15,"[ DECK B ]"),y()()()}if(e&2){let n=g();c(),p(n.mainTextColorClass()),c(4),p(n.mainHoverBgClass()),c(5),p(n.mainHoverBgClass()),c(2),p(n.mainHoverBgClass()),c(2),p(n.mainHoverBgClass())}}function $y(e,t){if(e&1&&(v(0,"div",133),de(1,"img",135),y()),e&2){let n=g(2);c(),p(n.mainBorderClass()),L("src",n.imageToAnalyzeUrl(),ie)}}function Gy(e,t){if(e&1){let n=j();v(0,"div",125),w("click",function(){C(n);let r=g();return _(r.showImageAnalysisModal.set(!1))}),y(),v(1,"div",132)(2,"div",127)(3,"h2",62),d(4,"[[ Image Analysis Result ]]"),y(),v(5,"button",128),w("click",function(){C(n);let r=g();return r.showImageAnalysisModal.set(!1),r.imageAnalysisResult.set(null),_(r.imageToAnalyzeUrl.set(null))}),d(6," [X] "),y()(),x(7,$y,2,3,"div",133),v(8,"div",134)(9,"p"),d(10),y()()()}if(e&2){let n=g();c(),p(n.mainTextColorClass()),c(4),p(n.mainHoverBgClass()),c(2),M(n.imageToAnalyzeUrl()?7:-1),c(),p(n.mainBorderClass()),c(2),W(n.imageAnalysisResult())}}function qy(e,t){if(e&1&&(v(0,"p",137),d(1),y()),e&2){let n=g(2);p(n.mainTextColorClass()),c(),H('Query: "',n.mapLocationQuery(),'"')}}function zy(e,t){if(e&1){let n=j();v(0,"div",125),w("click",function(){C(n);let r=g();return _(r.showMapResultsModal.set(!1))}),y(),v(1,"div",132)(2,"div",127)(3,"h2",62),d(4,"[[ Map Search Result ]]"),y(),v(5,"button",128),w("click",function(){C(n);let r=g();return r.showMapResultsModal.set(!1),r.mapLocationResult.set(null),_(r.mapLocationQuery.set(null))}),d(6," [X] "),y()(),x(7,qy,2,3,"p",136),v(8,"div",134)(9,"p"),d(10),y()()()}if(e&2){let n=g();c(),p(n.mainTextColorClass()),c(4),p(n.mainHoverBgClass()),c(2),M(n.mapLocationQuery()?7:-1),c(),p(n.mainBorderClass()),c(2),W(n.mapLocationResult())}}var go={track:{title:"NO SIGNAL",artist:"Load a track into deck",albumArtUrl:"https://picsum.photos/seed/placeholder/500/500",audioSrc:""},isPlaying:!1,progress:0,duration:0,playbackRate:1,filterFreq:2e4,loop:!1,gain:50,eqHigh:50,eqMid:50,eqLow:50,wasPlayingBeforeScratch:!1},Xd=[{name:"Green Vintage",primary:"green",accent:"amber",neutral:"neutral",purple:"purple",red:"red",blue:"blue"},{name:"Blue Retro",primary:"blue",accent:"fuchsia",neutral:"zinc",purple:"purple",red:"red",blue:"blue"},{name:"Red Glitch",primary:"red",accent:"cyan",neutral:"stone",purple:"purple",red:"red",blue:"blue"},{name:"Amber Glow",primary:"amber",accent:"green",neutral:"neutral",purple:"purple",red:"red",blue:"blue"},{name:"Purple Haze",primary:"purple",accent:"lime",neutral:"slate",purple:"purple",red:"red",blue:"blue"},{name:"Cyan Wave",primary:"cyan",accent:"violet",neutral:"gray",purple:"purple",red:"red",blue:"blue"},{name:"Yellow Neon",primary:"yellow",accent:"red",neutral:"stone",purple:"purple",red:"red",blue:"blue"}],On=class On{constructor(){this.audioPlayerARef=ve("audioPlayerA");this.videoPlayerARef=ve("videoPlayerA");this.audioPlayerBRef=ve("audioPlayerB");this.videoPlayerBRef=ve("videoPlayerB");this.fileInputRef=ve("fileInput");this.mainViewMode=I("player");this.showChatbot=I(!0);this.deckA=I(A({},go));this.deckB=I(A({},go));this.crossfade=I(0);this.loadingTargetDeck=I(null);this.isScratchingA=I(!1);this.isScratchingB=I(!1);this.scratchRotationA=I("");this.scratchRotationB=I("");this.scratchStateA={active:!1,lastAngle:0,platterElement:null};this.scratchStateB={active:!1,lastAngle:0,platterElement:null};this.SCRATCH_SENSITIVITY=2.5;this.playlist=I([]);this.currentTrackIndex=I(-1);this.currentPlayerTrack=Y(()=>{let t=this.currentTrackIndex(),n=this.playlist();return t>=0&&t<n.length?n[t]:null});this.volume=I(.75);this.showEqPanel=I(!1);this.searchQuery=I("");this.isSearching=I(!1);this.searchResults=I([]);this.eqSettings=I([{label:"60Hz",value:50},{label:"310Hz",value:50},{label:"1KHz",value:50},{label:"6KHz",value:50},{label:"16KHz",value:50}]);this.enhancements=I({bassBoost:!1,surroundSound:!1});this.isRecording=I(!1);this.recordingTime=I(0);this.recordedMixUrl=I(null);this.recordedBlob=I(null);this.canShare=Y(()=>!!(navigator.share&&this.recordedBlob()));this.vuLevelA=I(0);this.vuLevelB=I(0);this.vuLevelMaster=I(0);this.vuBars=Array(12).fill(0);this.micEnabled=I(!1);this.micVolume=I(50);this.micEqHigh=I(50);this.micEqMid=I(50);this.micEqLow=I(50);this.micFilterFreq=I(2e4);this.vuLevelMic=I(0);this.THEMES=Xd;this.currentTheme=I(Xd[0]);this.mainBorderClass=Y(()=>`border-${this.currentTheme().primary}-400/50`);this.mainTextColorClass=Y(()=>`text-${this.currentTheme().primary}-400`);this.mainHoverBgClass=Y(()=>`hover:bg-${this.currentTheme().primary}-400 hover:text-black`);this.mainBg90050Class=Y(()=>`bg-${this.currentTheme().primary}-900/50`);this.djBorderClass=Y(()=>`border-${this.currentTheme().accent}-500/30`);this.djTextColorClass=Y(()=>`text-${this.currentTheme().accent}-400`);this.djActiveBgClass=Y(()=>`bg-${this.currentTheme().accent}-500`);this.djHoverBgClass=Y(()=>`hover:bg-${this.currentTheme().accent}-500 hover:text-black`);this.djBg80050Class=Y(()=>`bg-${this.currentTheme().neutral}-800/50`);this.djTextAccent300Class=Y(()=>`text-${this.currentTheme().accent}-300`);this.djTextNeutral400Class=Y(()=>`text-${this.currentTheme().neutral}-400`);this.djBgStone900=Y(()=>`bg-${this.currentTheme().neutral}-900`);this.djBgStone700=Y(()=>`bg-${this.currentTheme().neutral}-700`);this.eqNodesMaster=[];this.micSourceNode=null;this.micGainNode=null;this.micEqNodes=[];this.micFilterNode=null;this.micStream=null;this.mediaRecorder=null;this.recordedChunks=[];this.imageEditorInitialPrompt=I("");this.videoEditorInitialPrompt=I("");this.lastImageEditorImageUrl=I(null);this.showApplyAlbumArtModal=I(!1);this.imageToApplyAsAlbumArt=I(null);this.imageToAnalyzeUrl=I(null);this.imageAnalysisResult=I(null);this.showImageAnalysisModal=I(!1);this.mapLocationQuery=I(null);this.mapLocationResult=I(null);this.showMapResultsModal=I(!1);this.networkingLocationQuery=I(null);this.selectedArtistProfile=I(null);this.showArtistDetailModal=I(!1);this.aiService=T(xe);this.activeFileInputDeck=null;this.activeFileInputTrackPlayer=!1;this.initAudioContext(),this.initVUAnalysis(),le(()=>{this.aiService.isAiAvailable||console.warn("AppComponent: AI services are not available.")}),le(()=>{this.imageAnalysisResult()&&this.showImageAnalysisModal.set(!0)}),le(()=>{this.mapLocationResult()&&this.showMapResultsModal.set(!0)}),le(()=>{this.selectedArtistProfile()&&this.showArtistDetailModal.set(!0)}),this.loadTrackToDeck(go.track,"A")}ngOnDestroy(){this.stopAllAudio(),this.audioContext&&this.audioContext.state!=="closed"&&this.audioContext.close().catch(t=>console.error("Error closing audio context:",t)),this.vuIntervalId&&clearInterval(this.vuIntervalId),this.stopMediaStream()}initAudioContext(){this.audioContext||(this.audioContext=new AudioContext,this.gainNodeMaster=this.audioContext.createGain(),this.crossfadeNode=this.audioContext.createGain(),this.analyserMaster=this.audioContext.createAnalyser(),this.analyserA=this.audioContext.createAnalyser(),this.analyserB=this.audioContext.createAnalyser(),this.analyserMic=this.audioContext.createAnalyser(),this.destinationNode=this.audioContext.createMediaStreamDestination(),this.crossfadeNode.connect(this.gainNodeMaster),this.setupMasterEq(this.gainNodeMaster),this.eqNodesMaster[this.eqNodesMaster.length-1].connect(this.analyserMaster),this.analyserMaster.connect(this.destinationNode),this.analyserMaster.connect(this.audioContext.destination),this.onCrossfadeChange({target:{value:this.crossfade()}}),this.onVolumeChange({target:{value:this.volume()}}),this.eqSettings().forEach((t,n)=>{this.onMasterEqChange(this.eqSettings())}))}setupMasterEq(t){this.eqNodesMaster=[];let n=[60,310,1e3,6e3,16e3];for(let i=0;i<n.length;i++){let r=this.audioContext.createBiquadFilter();r.type="peaking",r.frequency.value=n[i],r.Q.value=1,r.gain.value=0,this.eqNodesMaster.push(r)}if(this.eqNodesMaster.length>0){t.connect(this.eqNodesMaster[0]);for(let i=0;i<this.eqNodesMaster.length-1;i++)this.eqNodesMaster[i].connect(this.eqNodesMaster[i+1])}}initVUAnalysis(){this.vuIntervalId=window.setInterval(()=>{if(this.analyserA){let t=new Uint8Array(this.analyserA.fftSize);this.analyserA.getByteFrequencyData(t);let n=t.reduce((i,r)=>i+r,0)/t.length;this.vuLevelA.set(n/255)}if(this.analyserB){let t=new Uint8Array(this.analyserB.fftSize);this.analyserB.getByteFrequencyData(t);let n=t.reduce((i,r)=>i+r,0)/t.length;this.vuLevelB.set(n/255)}if(this.analyserMaster){let t=new Uint8Array(this.analyserMaster.fftSize);this.analyserMaster.getByteFrequencyData(t);let n=t.reduce((i,r)=>i+r,0)/t.length;this.vuLevelMaster.set(n/255)}if(this.analyserMic&&this.micEnabled()){let t=new Uint8Array(this.analyserMic.fftSize);this.analyserMic.getByteFrequencyData(t);let n=t.reduce((i,r)=>i+r,0)/t.length;this.vuLevelMic.set(n/255)}},100)}getMasterAnalyser(){return this.analyserMaster}openFilePickerForDeck(t){this.activeFileInputDeck=t,this.activeFileInputTrackPlayer=t===null,this.fileInputRef().nativeElement.click()}handleFileInput(t){let n=t.target.files?.[0];if(n){let i=URL.createObjectURL(n),r={title:n.name,artist:"Local File",albumArtUrl:"https://picsum.photos/seed/"+Math.random().toString(36).substring(7)+"/500/500",audioSrc:i,videoSrc:n.type.startsWith("video/")?i:void 0};this.activeFileInputDeck==="A"?this.loadTrackToDeck(r,"A"):this.activeFileInputDeck==="B"?this.loadTrackToDeck(r,"B"):this.activeFileInputTrackPlayer&&this.addTrackToPlaylist(r,!0)}this.fileInputRef()&&(this.fileInputRef().nativeElement.value=""),this.activeFileInputDeck=null,this.activeFileInputTrackPlayer=!1}loadTrackToDeck(t,n){let i=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),r=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();if((n==="A"?this.deckA():this.deckB()).isPlaying&&(i?.nativeElement.pause(),r?.nativeElement&&r.nativeElement.pause()),!i){console.error(`Audio player reference for deck ${n} not found.`);return}this.loadingTargetDeck.set(n);let s=S(A({},go),{track:t,isPlaying:!1});n==="A"?(this.deckA.set(s),i.nativeElement.src=t.audioSrc,this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.src=t.videoSrc||"")):(this.deckB.set(s),i.nativeElement.src=t.audioSrc,this.videoPlayerBRef()?.nativeElement&&(this.videoPlayerBRef().nativeElement.src=t.videoSrc||""))}togglePlayPause(t="player"){let n=t==="A"?this.audioPlayerARef():t==="B"?this.audioPlayerBRef():this.audioPlayerARef(),i=t==="A"?this.videoPlayerARef():t==="B"?this.videoPlayerBRef():this.videoPlayerARef(),r=t==="A"?this.deckA():t==="B"?this.deckB():this.deckA();if(!n||!n.nativeElement.src){console.warn(`No track loaded for deck ${t}.`);return}this.audioContext.state==="suspended"&&this.audioContext.resume().catch(a=>console.error("Error resuming AudioContext:",a));let o=!r.isPlaying;if(o){let a=n.nativeElement.__sourceNode;a||(a=this.audioContext.createMediaElementSource(n.nativeElement),n.nativeElement.__sourceNode=a,t==="A"?(this.gainNodeA=this.audioContext.createGain(),a.connect(this.gainNodeA),this.gainNodeA.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode)):t==="B"?(this.gainNodeB=this.audioContext.createGain(),a.connect(this.gainNodeB),this.gainNodeB.connect(this.analyserB),this.analyserB.connect(this.crossfadeNode)):(this.gainNodeA=this.audioContext.createGain(),a.connect(this.gainNodeA),a.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode))),n.nativeElement.play().catch(l=>console.error(`Error playing deck ${t}:`,l)),i?.nativeElement&&i.nativeElement.play().catch(l=>console.error(`Error playing video for deck ${t}:`,l))}else n.nativeElement.pause(),i?.nativeElement&&i.nativeElement.pause();let s=a=>S(A({},a),{isPlaying:o});t==="A"||t==="player"?this.deckA.update(s):this.deckB.update(s)}onTimeUpdate(t,n){let i=t.target,r=o=>S(A({},o),{progress:i.currentTime});n==="A"?this.deckA.update(r):this.deckB.update(r)}onLoadedMetadata(t,n){let i=t.target,r=o=>S(A({},o),{duration:i.duration,progress:0});if(n==="A"){this.deckA.update(r),this.gainNodeA&&(this.gainNodeA.gain.value=this.mapSliderToGain(this.deckA().gain));let o=i.__sourceNode;o||(o=this.audioContext.createMediaElementSource(i),i.__sourceNode=o,this.gainNodeA=this.audioContext.createGain(),o.connect(this.gainNodeA),this.gainNodeA.connect(this.analyserA),this.analyserA.connect(this.crossfadeNode)),this.onEqChange({target:{value:this.deckA().eqHigh}},"A","High"),this.onEqChange({target:{value:this.deckA().eqMid}},"A","Mid"),this.onEqChange({target:{value:this.deckA().eqLow}},"A","Low"),this.onFilterChange({target:{value:this.getNormalizedFilterValue(this.deckA().filterFreq)}},"A")}else{this.deckB.update(r),this.gainNodeB&&(this.gainNodeB.gain.value=this.mapSliderToGain(this.deckB().gain));let o=i.__sourceNode;o||(o=this.audioContext.createMediaElementSource(i),i.__sourceNode=o,this.gainNodeB=this.audioContext.createGain(),o.connect(this.gainNodeB),this.gainNodeB.connect(this.analyserB),this.analyserB.connect(this.crossfadeNode)),this.onEqChange({target:{value:this.deckB().eqHigh}},"B","High"),this.onEqChange({target:{value:this.deckB().eqMid}},"B","Mid"),this.onEqChange({target:{value:this.deckB().eqLow}},"B","Low"),this.onFilterChange({target:{value:this.getNormalizedFilterValue(this.deckB().filterFreq)}},"B")}this.loadingTargetDeck.set(null)}onEnded(t){let n=i=>S(A({},i),{isPlaying:!1,progress:0});t==="A"?(this.deckA.update(i=>i.loop?S(A({},i),{progress:0,isPlaying:!0}):n(i)),this.deckA().loop&&(this.audioPlayerARef().nativeElement.currentTime=0,this.audioPlayerARef().nativeElement.play(),this.videoPlayerARef()?.nativeElement.play())):(this.deckB.update(i=>i.loop?S(A({},i),{progress:0,isPlaying:!0}):n(i)),this.deckB().loop&&(this.audioPlayerBRef().nativeElement.currentTime=0,this.audioPlayerBRef().nativeElement.play(),this.videoPlayerBRef()?.nativeElement.play())),this.mainViewMode()==="player"&&t==="A"&&!this.deckA().loop&&this.playNext()}onProgressChange(t,n){let i=parseInt(t.target.value,10),r=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),o=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();r?.nativeElement&&(r.nativeElement.currentTime=i,o?.nativeElement&&(o.nativeElement.currentTime=i));let s=a=>S(A({},a),{progress:i});n==="A"?this.deckA.update(s):this.deckB.update(s)}toggleLoop(t){let n=i=>S(A({},i),{loop:!i.loop});t==="A"?this.deckA.update(n):this.deckB.update(n)}addTrackToPlaylist(t,n=!1){if(this.playlist.update(i=>[...i,t]),this.searchResults.set([]),n){let i=this.playlist().length-1;this.playTrackFromPlaylist(i)}}playTrackFromPlaylist(t){let n=this.playlist();if(t>=0&&t<n.length){this.currentTrackIndex.set(t);let i=n[t];this.loadTrackToDeck(i,"A"),this.deckA().isPlaying||this.togglePlayPause("A")}}playNext(){let t=this.playlist();if(t.length===0)return;let n=(this.currentTrackIndex()+1)%t.length;this.playTrackFromPlaylist(n)}playPrevious(){let t=this.playlist();if(t.length===0)return;let n=this.currentTrackIndex()-1;n<0&&(n=t.length-1),this.playTrackFromPlaylist(n)}onVolumeChange(t){let n=parseFloat(t.target.value);this.volume.set(n),this.gainNodeMaster&&(this.gainNodeMaster.gain.value=n)}toggleEqPanel(){this.showEqPanel.update(t=>!t)}onMasterEqChange(t){this.eqSettings.set(t),t.forEach((n,i)=>{this.eqNodesMaster[i]&&(this.eqNodesMaster[i].gain.value=this.mapSliderToDb(n.value))})}onEnhancementsChange(t){this.enhancements.set(t),console.log("Enhancements updated:",t)}mapSliderToGain(t){return t/100}onGainChange(t,n){let i=parseInt(t.target.value,10),r=this.mapSliderToGain(i),o=s=>S(A({},s),{gain:i});n==="A"?(this.deckA.update(o),this.gainNodeA&&(this.gainNodeA.gain.value=r)):(this.deckB.update(o),this.gainNodeB&&(this.gainNodeB.gain.value=r))}mapSliderToDb(t){return(t-50)*.48}onEqChange(t,n,i){let r=parseInt(t.target.value,10),o=this.mapSliderToDb(r),s=a=>S(A({},a),{[`eq${i}`]:r});n==="A"?this.deckA.update(s):this.deckB.update(s)}getNormalizedFilterValue(t){return Math.log10(t/20)/Math.log10(1e3)}mapFilterSliderToFreq(t){let r=Math.log10(20),o=Math.log10(2e4),s=r+t*(o-r);return Math.pow(10,s)}onFilterChange(t,n){let i=parseFloat(t.target.value),r=this.mapFilterSliderToFreq(i),o=s=>S(A({},s),{filterFreq:r});n==="A"?this.deckA.update(o):this.deckB.update(o)}onPitchChange(t,n){let i=parseFloat(t.target.value),r=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),o=n==="A"?this.videoPlayerARef():this.videoPlayerBRef();r?.nativeElement&&(r.nativeElement.playbackRate=i,o?.nativeElement&&(o.nativeElement.playbackRate=i));let s=a=>S(A({},a),{playbackRate:i});n==="A"?this.deckA.update(s):this.deckB.update(s)}onCrossfadeChange(t){let n=parseFloat(t.target.value);this.crossfade.set(n);let i=Math.cos((n+1)/2*(Math.PI/2)),r=Math.cos((1-n)/2*(Math.PI/2));this.gainNodeA&&(this.gainNodeA.gain.value=i),this.gainNodeB&&(this.gainNodeB.gain.value=r)}getElementAngle(t,n,i){let r=t.getBoundingClientRect(),o=r.left+r.width/2,s=r.top+r.height/2;return Math.atan2(i-s,n-o)}onScratchStart(t,n){let i=t.currentTarget.querySelector(".vinyl-platter");if(!i)return;t.preventDefault();let r,o;t instanceof TouchEvent?(r=t.touches[0].clientX,o=t.touches[0].clientY):(r=t.clientX,o=t.clientY);let s=n==="A"?this.deckA():this.deckB(),a=n==="A"?this.audioPlayerARef():this.audioPlayerBRef(),l=n==="A"?this.videoPlayerARef():this.videoPlayerBRef(),u=n==="A"?this.scratchStateA:this.scratchStateB;u.active=!0,u.platterElement=i,u.lastAngle=this.getElementAngle(i,r,o),u.initialTouchX=r,u.initialTouchY=o,a?.nativeElement&&s.isPlaying?(a.nativeElement.pause(),l?.nativeElement&&l.nativeElement.pause(),n==="A"?this.deckA.update(f=>S(A({},f),{isPlaying:!1,wasPlayingBeforeScratch:!0})):this.deckB.update(f=>S(A({},f),{isPlaying:!1,wasPlayingBeforeScratch:!0}))):a?.nativeElement&&(n==="A"?this.deckA.update(f=>S(A({},f),{wasPlayingBeforeScratch:!1})):this.deckB.update(f=>S(A({},f),{wasPlayingBeforeScratch:!1}))),n==="A"?this.isScratchingA.set(!0):this.isScratchingB.set(!0)}onScratch(t){if(!this.scratchStateA.active&&!this.scratchStateB.active)return;t.preventDefault();let n,i;if(t instanceof TouchEvent){if(t.touches.length===0)return;n=t.touches[0].clientX,i=t.touches[0].clientY}else n=t.clientX,i=t.clientY;this.scratchStateA.active&&this.scratchStateA.platterElement&&this.applyScratch(this.scratchStateA,n,i,"A"),this.scratchStateB.active&&this.scratchStateB.platterElement&&this.applyScratch(this.scratchStateB,n,i,"B")}applyScratch(t,n,i,r){if(!t.platterElement)return;let o=r==="A"?this.audioPlayerARef():this.audioPlayerBRef(),s=r==="A"?this.videoPlayerARef():this.videoPlayerBRef(),a=this.getElementAngle(t.platterElement,n,i),l=a-t.lastAngle;l>Math.PI&&(l-=2*Math.PI),l<-Math.PI&&(l+=2*Math.PI);let f=parseInt(t.platterElement.style.transform.replace("rotate(","").replace("deg)","")||"0",10)+l*180/Math.PI;if((r==="A"?this.scratchRotationA:this.scratchRotationB).set(`rotate(${f}deg)`),o?.nativeElement?.src){let b=l*this.SCRATCH_SENSITIVITY;o.nativeElement.currentTime+=b,s?.nativeElement&&(s.nativeElement.currentTime+=b)}t.lastAngle=a}onScratchEnd(){this.isScratchingA()||this.isScratchingB(),this.scratchStateA.active&&(this.scratchStateA.active=!1,this.scratchStateA.platterElement=null,this.isScratchingA.set(!1),this.deckA().wasPlayingBeforeScratch&&this.audioPlayerARef()?.nativeElement&&!this.deckA().isPlaying&&this.togglePlayPause("A")),this.scratchStateB.active&&(this.scratchStateB.active=!1,this.scratchStateB.platterElement=null,this.isScratchingB.set(!1),this.deckB().wasPlayingBeforeScratch&&this.audioPlayerBRef()?.nativeElement&&!this.deckB().isPlaying&&this.togglePlayPause("B"))}toggleRecording(){this.isRecording()?this.stopMasterRecording():this.startMasterRecording()}startMasterRecording(){if(!this.audioContext||!this.destinationNode){console.error("AudioContext or MediaStreamAudioDestinationNode not initialized.");return}if(!this.isRecording()){this.recordedChunks=[],this.recordedMixUrl.set(null),this.recordedBlob.set(null),this.recordingTime.set(0);try{this.mediaRecorder=new MediaRecorder(this.destinationNode.stream,{mimeType:"audio/webm; codecs=opus"}),this.mediaRecorder.ondataavailable=t=>{t.data.size>0&&this.recordedChunks.push(t.data)},this.mediaRecorder.onstop=()=>{let t=new Blob(this.recordedChunks,{type:"audio/webm"});this.recordedBlob.set(t),this.recordedMixUrl.set(URL.createObjectURL(t)),console.log("Master recording stopped. Blob created."),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.onerror=t=>{console.error("Master MediaRecorder error:",t.error),this.isRecording.set(!1),this.recordingIntervalId&&clearInterval(this.recordingIntervalId),this.recordingIntervalId=void 0},this.mediaRecorder.start(),this.isRecording.set(!0),this.recordingIntervalId=window.setInterval(()=>this.recordingTime.update(t=>t+1),1e3),console.log("Master recording started.")}catch(t){console.error("Error starting Master MediaRecorder:",t),this.isRecording.set(!1)}}}stopMasterRecording(){this.mediaRecorder&&this.isRecording()&&(this.mediaRecorder.stop(),this.isRecording.set(!1),console.log("Attempting to stop master recording..."))}async shareMix(){let t=this.recordedBlob();if(!t||!this.canShare()){console.warn("No recorded mix available or Web Share API not supported.");return}let n=new File([t],"aura-mix.webm",{type:t.type});try{await navigator.share({files:[n],title:"Aura Mix",text:"Check out my latest mix from Aura Music Player!"}),console.log("Mix shared successfully.")}catch(i){console.error("Error sharing mix:",i)}}async toggleMicrophone(){this.micEnabled()?this.stopMicrophone():await this.startMicrophone()}async startMicrophone(){if(!this.micEnabled())try{this.micStream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.micSourceNode=this.audioContext.createMediaStreamSource(this.micStream),this.micGainNode=this.audioContext.createGain(),this.micFilterNode=this.audioContext.createBiquadFilter(),this.micFilterNode.type="lowpass",this.micFilterNode.frequency.value=this.micFilterFreq();let t=[250,2500,1e4];this.micEqNodes=t.map(n=>{let i=this.audioContext.createBiquadFilter();return i.type="peaking",i.frequency.value=n,i.Q.value=1,i.gain.value=0,i}),this.micSourceNode.connect(this.micGainNode),this.micGainNode.connect(this.micEqNodes[0]),this.micEqNodes[0].connect(this.micEqNodes[1]),this.micEqNodes[1].connect(this.micEqNodes[2]),this.micEqNodes[2].connect(this.micFilterNode),this.micFilterNode.connect(this.analyserMic),this.analyserMic.connect(this.gainNodeMaster),this.onMicVolumeChange({target:{value:this.micVolume()}}),this.onMicEqChange({target:{value:this.micEqHigh()}},"High"),this.onMicEqChange({target:{value:this.micEqMid()}},"Mid"),this.onMicEqChange({target:{value:this.micEqLow()}},"Low"),this.onMicFilterChange({target:{value:this.getNormalizedFilterValue(this.micFilterFreq())}}),this.micEnabled.set(!0),console.log("Microphone enabled.")}catch(t){console.error("Error enabling microphone:",t),this.micEnabled.set(!1),alert("Failed to access microphone. Please ensure permissions are granted.")}}stopMicrophone(){this.micStream&&(this.micStream.getTracks().forEach(t=>t.stop()),this.micStream=null),this.micSourceNode&&this.micSourceNode.disconnect(),this.micGainNode&&this.micGainNode.disconnect(),this.micFilterNode&&this.micFilterNode.disconnect(),this.micEqNodes.forEach(t=>t.disconnect()),this.analyserMic&&this.analyserMic.disconnect(),this.micSourceNode=null,this.micGainNode=null,this.micFilterNode=null,this.micEqNodes=[],this.micEnabled.set(!1),this.vuLevelMic.set(0),console.log("Microphone disabled.")}onMicVolumeChange(t){let n=parseInt(t.target.value,10);this.micVolume.set(n),this.micGainNode&&(this.micGainNode.gain.value=this.mapSliderToGain(n))}onMicEqChange(t,n){let i=parseInt(t.target.value,10),r=this.mapSliderToDb(i);n==="High"&&this.micEqNodes[2]?(this.micEqHigh.set(i),this.micEqNodes[2].gain.value=r):n==="Mid"&&this.micEqNodes[1]?(this.micEqMid.set(i),this.micEqNodes[1].gain.value=r):n==="Low"&&this.micEqNodes[0]&&(this.micEqLow.set(i),this.micEqNodes[0].gain.value=r)}onMicFilterChange(t){let n=parseFloat(t.target.value),i=this.mapFilterSliderToFreq(n);this.micFilterFreq.set(i),this.micFilterNode&&(this.micFilterNode.frequency.value=i)}toggleMainViewMode(){let t=["player","dj","piano-roll","image-editor","video-editor","networking"],n=this.mainViewMode(),r=(t.indexOf(n)+1)%t.length;this.mainViewMode.set(t[r]),this.stopAllAudio(),t[r]!=="image-editor"&&this.imageEditorInitialPrompt.set(""),t[r]!=="video-editor"&&this.videoEditorInitialPrompt.set(""),t[r]!=="networking"&&(this.networkingLocationQuery.set(null),this.selectedArtistProfile.set(null)),this.lastImageEditorImageUrl.set(null),t[r]==="dj"&&(this.audioPlayerARef()?.nativeElement.load(),this.audioPlayerBRef()?.nativeElement.load(),this.deckA().isPlaying&&this.togglePlayPause("A"),this.deckB().isPlaying&&this.togglePlayPause("B"))}toggleChatbot(){this.showChatbot.update(t=>!t),this.showChatbot()||(this.imageToAnalyzeUrl.set(null),this.imageAnalysisResult.set(null),this.mapLocationQuery.set(null),this.mapLocationResult.set(null),this.showImageAnalysisModal.set(!1),this.showMapResultsModal.set(!1),this.networkingLocationQuery.set(null),this.selectedArtistProfile.set(null),this.showArtistDetailModal.set(!1))}handleChatbotCommand(t){console.log("AppComponent: Received chatbot command:",t);let{action:n,parameters:i,aiContext:r}=t;switch(n){case"SET_THEME":let o=i.theme,s=this.THEMES.find(a=>a.name.toLowerCase()===o.toLowerCase());s?(this.currentTheme.set(s),console.log(`Theme set to: ${s.name}`)):console.warn(`Theme "${o}" not found.`);break;case"PLAY_TRACK":if(i.title){let a=this.playlist().find(l=>l.title.toLowerCase().includes(i.title.toLowerCase()))||this.searchResults().find(l=>l.title.toLowerCase().includes(i.title.toLowerCase()));if(a){let l=this.playlist().indexOf(a);l!==-1?this.playTrackFromPlaylist(l):this.addTrackToPlaylist(a,!0)}else console.warn(`Track with title "${i.title}" not found.`)}break;case"PAUSE_TRACK":this.deckA().isPlaying&&this.togglePlayPause("A");break;case"STOP_TRACK":this.audioPlayerARef()?.nativeElement.pause(),this.audioPlayerARef()?.nativeElement&&(this.audioPlayerARef().nativeElement.currentTime=0),this.videoPlayerARef()?.nativeElement.pause(),this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.currentTime=0),this.deckA.update(a=>S(A({},a),{isPlaying:!1,progress:0}));break;case"NEXT_TRACK":this.playNext();break;case"PREVIOUS_TRACK":this.playPrevious();break;case"TOGGLE_LOOP":this.toggleLoop("A");break;case"LOAD_TRACK":console.warn("LOAD_TRACK command not fully implemented for chatbot direct loading.");break;case"GENERATE_IMAGE":i.prompt&&(this.imageEditorInitialPrompt.set(i.prompt),this.mainViewMode.set("image-editor"),this.showChatbot.set(!1));break;case"GENERATE_VIDEO":i.prompt&&(this.videoEditorInitialPrompt.set(i.prompt),this.mainViewMode.set("video-editor"),this.showChatbot.set(!1));break;case"ANALYZE_IMAGE":i.imageUrl&&(this.imageToAnalyzeUrl.set(i.imageUrl),this.showChatbot.set(!0));break;case"FIND_ON_MAP":i.query&&(this.mapLocationQuery.set(i.query),this.showChatbot.set(!0));break;case"FIND_ARTISTS":i.location&&(this.networkingLocationQuery.set(i.location),this.mainViewMode.set("networking"),this.showChatbot.set(!1));break;case"VIEW_ARTIST_PROFILE":if(i.name){let a=nt.filter(l=>l.name.toLowerCase()===i.name.toLowerCase()||i.genre&&l.genres.some(u=>u.toLowerCase().includes(i.genre.toLowerCase()))||i.location&&l.location.toLowerCase().includes(i.location.toLowerCase()));a.length>0?(this.selectedArtistProfile.set(a[0]),this.mainViewMode.set("networking"),this.showChatbot.set(!1)):console.warn(`Artist "${i.name}" not found in mock data or no matching criteria.`)}break;default:console.warn(`Unknown chatbot command: ${n}`);break}}handleImageSelectedForAlbumArt(t){this.imageToApplyAsAlbumArt.set(t),this.showApplyAlbumArtModal.set(!0),this.lastImageEditorImageUrl.set(t),this.showChatbot.set(!1)}applyImageAsAlbumArt(t){let n=this.imageToApplyAsAlbumArt();n&&(t==="player"&&this.currentPlayerTrack()?(this.playlist.update(i=>i.map((r,o)=>o===this.currentTrackIndex()?S(A({},r),{albumArtUrl:n}):r)),this.deckA.update(i=>S(A({},i),{track:S(A({},i.track),{albumArtUrl:n})}))):t==="A"?this.deckA.update(i=>S(A({},i),{track:S(A({},i.track),{albumArtUrl:n})})):t==="B"&&this.deckB.update(i=>S(A({},i),{track:S(A({},i.track),{albumArtUrl:n})})),this.showApplyAlbumArtModal.set(!1),this.imageToApplyAsAlbumArt.set(null))}stopAllAudio(){this.audioPlayerARef()?.nativeElement.pause(),this.audioPlayerARef()?.nativeElement&&(this.audioPlayerARef().nativeElement.currentTime=0),this.videoPlayerARef()?.nativeElement.pause(),this.videoPlayerARef()?.nativeElement&&(this.videoPlayerARef().nativeElement.currentTime=0),this.deckA.update(t=>S(A({},t),{isPlaying:!1,progress:0})),this.audioPlayerBRef()?.nativeElement.pause(),this.audioPlayerBRef()?.nativeElement&&(this.audioPlayerBRef().nativeElement.currentTime=0),this.videoPlayerBRef()?.nativeElement.pause(),this.videoPlayerBRef()?.nativeElement&&(this.videoPlayerBRef().nativeElement.currentTime=0),this.deckB.update(t=>S(A({},t),{isPlaying:!1,progress:0})),this.stopMicrophone()}stopMediaStream(){this.micStream&&(this.micStream.getTracks().forEach(t=>t.stop()),this.micStream=null)}formatTime(t){if(isNaN(t)||t<0)return"00:00";let n=Math.floor(t/60),i=Math.floor(t%60);return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`}randomizeTheme(){let t=this.currentTheme();for(;t===this.currentTheme();)t=this.THEMES[Math.floor(Math.random()*this.THEMES.length)];this.currentTheme.set(t)}};On.\u0275fac=function(n){return new(n||On)},On.\u0275cmp=ue({type:On,selectors:[["app-root"]],viewQuery:function(n,i){n&1&&(pe(i.audioPlayerARef,z0,5),pe(i.videoPlayerARef,W0,5),pe(i.audioPlayerBRef,Q0,5),pe(i.videoPlayerBRef,Y0,5),pe(i.fileInputRef,Z0,5)),n&2&&Ne(5)},hostBindings:function(n,i){n&1&&w("mousemove",function(o){return i.onScratch(o)},xn)("touchmove",function(o){return i.onScratch(o)},xn)("mouseup",function(){return i.onScratchEnd()},xn)("touchend",function(){return i.onScratchEnd()},xn)},decls:38,vars:20,consts:[["audioPlayerA",""],["audioPlayerB",""],["fileInput",""],["videoPlayerA",""],["videoPlayerB",""],[1,"bg-black","text-green-400","font-mono","min-h-screen","flex","items-center","justify-center","p-2","sm:p-4","relative","overflow-hidden"],[1,"w-full","max-w-7xl","border-2","bg-black/80","backdrop-blur-sm","z-10","flex","flex-col","transition-colors","duration-500"],[1,"flex","justify-between","items-center","p-2","sm:p-4","border-b-2","border-inherit"],[1,"text-xl","sm:text-2xl"],[1,"flex","items-center","gap-2"],[1,"p-2","border","border-inherit","hover:text-black","text-sm","transition-colors",3,"click"],[1,"p-2","sm:p-4"],[1,"flex","flex-col","lg:flex-row","gap-4",3,"class"],[3,"theme"],[1,"flex","flex-col","md:flex-row","gap-4"],[3,"initialPrompt","theme"],[3,"imageForVideoGeneration","initialPrompt","theme"],[3,"initialSearchQuery","theme"],[3,"eqSettings","enhancements","theme"],["preload","auto",3,"timeupdate","loadedmetadata","ended"],["type","file","accept","audio/*,video/*",1,"hidden",3,"change"],[3,"theme","imageToAnalyzeUrl","mapLocationQuery"],[1,"flex","flex-col","lg:flex-row","gap-4"],[1,"flex-1","p-2","space-y-3"],[1,"text-center","text-lg","flex","items-center","justify-center","gap-2"],[1,"flex","gap-4"],[1,"flex-1","space-y-3"],[1,"w-full","aspect-square","mx-auto","flex","items-center","justify-center","bg-black","relative"],["muted","","playsinline","","preload","auto",1,"w-full","h-full","object-cover"],[1,"vinyl-platter",3,"spinning","transform"],[1,"text-center"],[1,"text-base","truncate",3,"title"],[1,"text-xs","truncate",3,"title"],[1,"space-y-1"],["type","range","min","0",1,"w-full","h-1","aura-slider",3,"input","max","value"],[1,"flex","justify-between","text-xs"],[1,"flex","items-center","justify-around"],[1,"w-16","h-10","flex","items-center","justify-center","border-2",3,"click"],[1,"p-2","border","hover:text-black","text-xs",3,"click"],[1,"flex","items-center","gap-4","pl-4"],[1,"flex","flex-col","items-center","justify-between","h-full","space-y-2","text-sm"],[1,"flex","flex-col","items-center"],["type","range","min","0","max","100",1,"w-20","aura-slider",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"w-20","aura-slider",3,"input","value"],[1,"vu-meter"],[1,"vu-bar",3,"green","yellow","red"],[1,"flex","flex-col","items-center","justify-center","space-y-2"],[1,"text-sm"],["type","range","min","0.5","max","2","step","0.01",1,"aura-slider","vertical-slider",3,"input","value"],[1,"w-full","lg:w-[450px]","p-2","space-y-3","flex","flex-col","justify-between"],[1,"text-center","text-lg"],[1,"space-y-2"],[3,"submit"],[1,"flex","space-x-2"],["type","text","placeholder","Search online...",1,"flex-grow","border","text-neutral-200","p-1","text-sm","focus:ring-500",3,"input","value"],["type","submit",1,"p-2","border","hover:text-black","text-sm"],[1,"text-center","text-sm","p-2","border","border-dashed",3,"class"],[1,"border","p-1","space-y-1","max-h-40","overflow-y-auto",3,"class"],[1,"p-2","space-y-2","text-center"],[1,"flex","justify-center","items-center","gap-4"],[1,"px-3","py-1","border","hover:text-black",3,"click"],[1,"w-3","h-3","rounded-full","bg-red-800","rec-indicator"],[1,"text-lg"],[1,"flex","justify-center","gap-2","pt-2"],[1,"text-sm","flex","items-center","justify-center","gap-2"],[1,"flex","items-center","justify-center","gap-4","pt-2"],[1,"flex","items-center","gap-4"],["type","range","min","-1","max","1","step","0.01",1,"flex-grow","aura-slider",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"aura-slider","vertical-slider",3,"input","value"],[1,"flex","justify-between","items-center","text-xs"],[1,"w-full","p-2","border","hover:text-black","text-sm",3,"click"],["muted","","playsinline","","preload","auto",1,"w-full","h-full","object-cover",3,"mousedown","touchstart","timeupdate","loadedmetadata","ended"],[1,"vinyl-platter",3,"mousedown","touchstart"],[1,"label","deck-a"],[1,"spindle"],[1,"vu-bar"],[1,"text-center","text-sm","p-2","border","border-dashed"],[1,"border","p-1","space-y-1","max-h-40","overflow-y-auto"],[1,"text-sm","p-1",3,"class"],[1,"text-sm","p-1"],[1,"truncate"],[1,"flex","justify-between","items-center","mt-1"],[1,"text-xs","truncate","pl-2"],[1,"flex","gap-1"],[1,"px-1","border","hover:text-black",3,"click"],["download","aura-mix.webm",1,"text-sm","p-1","border","hover:text-black",3,"href"],[1,"text-sm","p-1","border","hover:text-black",3,"class"],[1,"text-sm","p-1","border","hover:text-black",3,"click"],[1,"w-3","h-3","rounded-full","bg-green-500","rec-indicator","recording"],[1,"text-xs","text-green-500"],[1,"vu-meter","h-24"],[1,"text-xs"],["type","range","min","0","max","100",1,"w-20","aura-slider","vertical-slider","h-24",3,"input","value"],["type","range","min","0","max","1","step","0.01",1,"w-20","aura-slider","vertical-slider","h-24",3,"input","value"],[1,"label","deck-b"],[1,"flex-1","md:w-2/3","space-y-3"],[1,"w-full","aspect-video","mx-auto","border-2","p-1","media-container"],["muted","","playsinline","",1,"w-full","h-full","object-cover","media-element"],["alt","Album Art",1,"w-full","h-full","object-cover","media-element",3,"src"],[1,"w-full","h-24","mt-2",3,"analyserNode","theme"],[1,"text-xl","truncate",3,"title"],[1,"text-base","text-green-400/70","truncate",3,"title"],[1,"flex","justify-between","text-sm","text-green-400/70"],[1,"flex","items-center","justify-center","gap-4"],[1,"w-12","h-12","flex","items-center","justify-center","border-2","text-xl",3,"click"],[1,"w-20","h-20","flex","items-center","justify-center","border-2","text-3xl",3,"click"],["type","range","min","0","max","1","step","0.01",1,"w-1/2","aura-slider",3,"input","value"],[1,"p-2","border","text-sm",3,"click"],[1,"flex-1","md:w-1/3","space-y-3","flex","flex-col"],["type","text","placeholder","Search to add tracks...",1,"flex-grow","bg-black","border","text-sm","focus:ring-500",3,"input","value"],["type","submit",1,"p-2","border","text-sm"],[1,"border","p-1","space-y-1",3,"class"],[1,"flex-grow","border","p-2","space-y-2","overflow-y-auto","max-h-96"],[1,"text-center","text-base"],[1,"p-2","text-sm","cursor-pointer",3,"class"],[1,"text-center","text-sm","text-green-400/60","p-4"],[1,"w-full","p-2","border","text-sm",3,"click"],[1,"border","p-1","space-y-1"],[1,"text-center","text-base","py-1"],[1,"text-xs","text-green-400/70","truncate","pl-2"],[1,"px-1","border","text-black",3,"click"],[1,"p-2","text-sm","cursor-pointer",3,"click"],[3,"imageSelected","imageAnalysisRequest","initialPrompt","theme"],[3,"close","eqChange","enhancementsChange","eqSettings","enhancements","theme"],[3,"appCommand","close","imageAnalysisResult","mapLocationResult","theme","imageToAnalyzeUrl","mapLocationQuery"],[1,"fixed","inset-0","bg-black/60","z-40","animate-fade-in",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-sm","z-50","animate-slide-up","font-mono"],[1,"flex","justify-between","items-center","mb-4"],[1,"border","px-2","hover:text-black","transition-colors",3,"click"],[1,"mb-4"],[1,"flex","flex-col","gap-2"],[1,"p-2","border","hover:text-black","text-sm",3,"click"],[1,"fixed","inset-x-4","bottom-4","sm:inset-auto","sm:left-1/2","sm:top-1/2","sm:-translate-x-1/2","sm:-translate-y-1/2","border-2","bg-black/90","backdrop-blur-lg","p-6","w-full","max-w-xl","h-2/3","flex","flex-col","z-50","animate-slide-up","font-mono"],[1,"flex-shrink-0","mb-4","overflow-hidden","flex","justify-center"],[1,"flex-grow","overflow-y-auto","pr-2","text-sm","border-t","pt-4"],["alt","Image being analyzed",1,"max-h-40","object-contain","border",3,"src"],[1,"mb-4","text-sm",3,"class"],[1,"mb-4","text-sm"]],template:function(n,i){if(n&1){let r=j();v(0,"main",5),de(1,"app-matrix-background"),v(2,"div",6)(3,"header",7)(4,"h1",8),d(5,"[ AURA ]"),y(),v(6,"div",9)(7,"button",10),w("click",function(){return C(r),_(i.randomizeTheme())}),v(8,"span"),d(9,"[ RANDOM THEME ]"),y()(),v(10,"button",10),w("click",function(){return C(r),_(i.toggleMainViewMode())}),x(11,J0,2,0,"span")(12,X0,2,0,"span")(13,ey,2,0,"span")(14,ty,2,0,"span")(15,ny,2,0,"span")(16,iy,2,0,"span"),y(),v(17,"button",10),w("click",function(){return C(r),_(i.toggleChatbot())}),x(18,ry,2,0,"span")(19,oy,2,0,"span"),y()()(),v(20,"div",11),x(21,wy,158,103,"div",12)(22,xy,1,1,"app-piano-roll",13)(23,Oy,48,41,"div",14)(24,Ly,1,2,"app-image-editor",15)(25,Vy,1,3,"app-video-editor",16)(26,By,1,2,"app-networking",17),y(),x(27,jy,1,3,"app-eq-panel",18),v(28,"audio",19,0),w("timeupdate",function(s){return C(r),_(i.onTimeUpdate(s,"A"))})("loadedmetadata",function(s){return C(r),_(i.onLoadedMetadata(s,"A"))})("ended",function(){return C(r),_(i.onEnded("A"))}),y(),v(30,"audio",19,1),w("timeupdate",function(s){return C(r),_(i.onTimeUpdate(s,"B"))})("loadedmetadata",function(s){return C(r),_(i.onLoadedMetadata(s,"B"))})("ended",function(){return C(r),_(i.onEnded("B"))}),y(),v(32,"input",20,2),w("change",function(s){return C(r),_(i.handleFileInput(s))}),y()(),x(34,Hy,1,3,"app-chatbot",21),x(35,Uy,16,10),x(36,Gy,11,8),x(37,zy,11,8),y()}if(n&2){let r;c(2),p(i.mainBorderClass()),re("dj-vintage-theme",i.mainViewMode()==="dj"),c(2),p(i.mainTextColorClass()),c(3),p(i.mainHoverBgClass()),c(3),p(i.mainHoverBgClass()),c(),M(i.mainViewMode()==="player"?11:i.mainViewMode()==="dj"?12:i.mainViewMode()==="piano-roll"?13:i.mainViewMode()==="image-editor"?14:i.mainViewMode()==="video-editor"?15:i.mainViewMode()==="networking"?16:-1),c(6),p(i.mainHoverBgClass()),c(),M(i.showChatbot()?18:19),c(3),M((r=i.mainViewMode())==="dj"?21:r==="piano-roll"?22:r==="player"?23:r==="image-editor"?24:r==="video-editor"?25:r==="networking"?26:-1),c(6),M(i.showEqPanel()?27:-1),c(7),M(i.showChatbot()?34:-1),c(),M(i.showApplyAlbumArtModal()?35:-1),c(),M(i.showImageAnalysisModal()&&i.imageAnalysisResult()?36:-1),c(),M(i.showMapResultsModal()&&i.mapLocationResult()?37:-1)}},dependencies:[me,ao,lo,uo,fo,po,mo,ho,co],encapsulation:2,changeDetection:0});var vo=On;if(typeof window.process>"u"||window.process===null)window.process={env:{}},console.warn("index.tsx: Forcibly initialized window.process.");else if(typeof window.process.env!="object"||window.process.env===null||Object.isFrozen(window.process.env)||!Object.isExtensible(window.process.env)){let e=window.process.env;if(window.process.env={},e&&typeof e=="object")for(let t in e)t!=="API_KEY"&&Object.prototype.hasOwnProperty.call(e,t)&&(window.process.env[t]=e[t]);console.warn("index.tsx: Replaced/initialized window.process.env object to ensure mutability and extensibility.")}var Ja=window.process.env.API_KEY,Ai="",yo=(typeof Ja=="string"?Ja:"").trim();yo.toLowerCase()==="undefined"||yo===""||yo.length<30?(Ai="",console.warn(`index.tsx: Detected problematic API_KEY in window.process.env (original value: "${Ja}"). Setting to empty string.`)):(Ai=yo,console.log(`index.tsx: Valid API_KEY detected from window.process.env (length: ${Ai.length}).`));window.process.env.API_KEY=Ai;console.log(`index.tsx: window.process.env.API_KEY is now explicitly set to a sanitized value (length: ${window.process.env.API_KEY.length}).`);window.AURA_GEMINI_API_KEY=Ai;window.AURA_GEMINI_API_KEY===""?console.warn("index.tsx: Final AURA_GEMINI_API_KEY for application use is empty. AI features will be disabled."):console.log(`index.tsx: AURA_GEMINI_API_KEY is available for application use (length: ${window.AURA_GEMINI_API_KEY.length}).`);var Za=new $("GEMINI_API_KEY");Ya(vo,{providers:[Fa(),Yd(),{provide:Za,useValue:window.AURA_GEMINI_API_KEY}]}).catch(e=>console.error(e));export{Za as API_KEY_TOKEN};
